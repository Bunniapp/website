(self.webpackChunktimeless_frontend=self.webpackChunktimeless_frontend||[]).push([[7125],{67083:(Oe,p,F)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0});var M=F(94846);function pe(R,j,v){return void 0===j&&(j=new Uint8Array(2)),void 0===v&&(v=0),j[v+0]=R>>>8,j[v+1]=R>>>0,j}function K(R,j,v){return void 0===j&&(j=new Uint8Array(2)),void 0===v&&(v=0),j[v+0]=R>>>0,j[v+1]=R>>>8,j}function $(R,j){return void 0===j&&(j=0),R[j]<<24|R[j+1]<<16|R[j+2]<<8|R[j+3]}function L(R,j){return void 0===j&&(j=0),(R[j]<<24|R[j+1]<<16|R[j+2]<<8|R[j+3])>>>0}function C(R,j){return void 0===j&&(j=0),R[j+3]<<24|R[j+2]<<16|R[j+1]<<8|R[j]}function W(R,j){return void 0===j&&(j=0),(R[j+3]<<24|R[j+2]<<16|R[j+1]<<8|R[j])>>>0}function fe(R,j,v){return void 0===j&&(j=new Uint8Array(4)),void 0===v&&(v=0),j[v+0]=R>>>24,j[v+1]=R>>>16,j[v+2]=R>>>8,j[v+3]=R>>>0,j}function se(R,j,v){return void 0===j&&(j=new Uint8Array(4)),void 0===v&&(v=0),j[v+0]=R>>>0,j[v+1]=R>>>8,j[v+2]=R>>>16,j[v+3]=R>>>24,j}function y(R,j,v){return void 0===j&&(j=new Uint8Array(8)),void 0===v&&(v=0),fe(R/4294967296>>>0,j,v),fe(R>>>0,j,v+4),j}function O(R,j,v){return void 0===j&&(j=new Uint8Array(8)),void 0===v&&(v=0),se(R>>>0,j,v),se(R/4294967296>>>0,j,v+4),j}p.readInt16BE=function(R,j){return void 0===j&&(j=0),(R[j+0]<<8|R[j+1])<<16>>16},p.readUint16BE=function(R,j){return void 0===j&&(j=0),(R[j+0]<<8|R[j+1])>>>0},p.readInt16LE=function(R,j){return void 0===j&&(j=0),(R[j+1]<<8|R[j])<<16>>16},p.readUint16LE=function(R,j){return void 0===j&&(j=0),(R[j+1]<<8|R[j])>>>0},p.writeUint16BE=pe,p.writeInt16BE=pe,p.writeUint16LE=K,p.writeInt16LE=K,p.readInt32BE=$,p.readUint32BE=L,p.readInt32LE=C,p.readUint32LE=W,p.writeUint32BE=fe,p.writeInt32BE=fe,p.writeUint32LE=se,p.writeInt32LE=se,p.readInt64BE=function(R,j){void 0===j&&(j=0);var v=$(R,j),V=$(R,j+4);return 4294967296*v+V-4294967296*(V>>31)},p.readUint64BE=function(R,j){return void 0===j&&(j=0),4294967296*L(R,j)+L(R,j+4)},p.readInt64LE=function(R,j){void 0===j&&(j=0);var v=C(R,j);return 4294967296*C(R,j+4)+v-4294967296*(v>>31)},p.readUint64LE=function(R,j){void 0===j&&(j=0);var v=W(R,j);return 4294967296*W(R,j+4)+v},p.writeUint64BE=y,p.writeInt64BE=y,p.writeUint64LE=O,p.writeInt64LE=O,p.readUintBE=function(R,j,v){if(void 0===v&&(v=0),R%8!=0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(R/8>j.length-v)throw new Error("readUintBE: array is too short for the given bitLength");for(var V=0,de=1,q=R/8+v-1;q>=v;q--)V+=j[q]*de,de*=256;return V},p.readUintLE=function(R,j,v){if(void 0===v&&(v=0),R%8!=0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(R/8>j.length-v)throw new Error("readUintLE: array is too short for the given bitLength");for(var V=0,de=1,q=v;q<v+R/8;q++)V+=j[q]*de,de*=256;return V},p.writeUintBE=function(R,j,v,V){if(void 0===v&&(v=new Uint8Array(R/8)),void 0===V&&(V=0),R%8!=0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!M.isSafeInteger(j))throw new Error("writeUintBE value must be an integer");for(var de=1,q=R/8+V-1;q>=V;q--)v[q]=j/de&255,de*=256;return v},p.writeUintLE=function(R,j,v,V){if(void 0===v&&(v=new Uint8Array(R/8)),void 0===V&&(V=0),R%8!=0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!M.isSafeInteger(j))throw new Error("writeUintLE value must be an integer");for(var de=1,q=V;q<V+R/8;q++)v[q]=j/de&255,de*=256;return v},p.readFloat32BE=function(R,j){return void 0===j&&(j=0),new DataView(R.buffer,R.byteOffset,R.byteLength).getFloat32(j)},p.readFloat32LE=function(R,j){return void 0===j&&(j=0),new DataView(R.buffer,R.byteOffset,R.byteLength).getFloat32(j,!0)},p.readFloat64BE=function(R,j){return void 0===j&&(j=0),new DataView(R.buffer,R.byteOffset,R.byteLength).getFloat64(j)},p.readFloat64LE=function(R,j){return void 0===j&&(j=0),new DataView(R.buffer,R.byteOffset,R.byteLength).getFloat64(j,!0)},p.writeFloat32BE=function(R,j,v){return void 0===j&&(j=new Uint8Array(4)),void 0===v&&(v=0),new DataView(j.buffer,j.byteOffset,j.byteLength).setFloat32(v,R),j},p.writeFloat32LE=function(R,j,v){return void 0===j&&(j=new Uint8Array(4)),void 0===v&&(v=0),new DataView(j.buffer,j.byteOffset,j.byteLength).setFloat32(v,R,!0),j},p.writeFloat64BE=function(R,j,v){return void 0===j&&(j=new Uint8Array(8)),void 0===v&&(v=0),new DataView(j.buffer,j.byteOffset,j.byteLength).setFloat64(v,R),j},p.writeFloat64LE=function(R,j,v){return void 0===j&&(j=new Uint8Array(8)),void 0===v&&(v=0),new DataView(j.buffer,j.byteOffset,j.byteLength).setFloat64(v,R,!0),j}},25046:(Oe,p,F)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0});var M=F(67083),oe=F(91897);function ge($,L,C){for(var W=1634760805,fe=857760878,se=2036477234,ue=1797285236,w=C[3]<<24|C[2]<<16|C[1]<<8|C[0],ye=C[7]<<24|C[6]<<16|C[5]<<8|C[4],me=C[11]<<24|C[10]<<16|C[9]<<8|C[8],y=C[15]<<24|C[14]<<16|C[13]<<8|C[12],O=C[19]<<24|C[18]<<16|C[17]<<8|C[16],E=C[23]<<24|C[22]<<16|C[21]<<8|C[20],b=C[27]<<24|C[26]<<16|C[25]<<8|C[24],N=C[31]<<24|C[30]<<16|C[29]<<8|C[28],A=L[3]<<24|L[2]<<16|L[1]<<8|L[0],a=L[7]<<24|L[6]<<16|L[5]<<8|L[4],u=L[11]<<24|L[10]<<16|L[9]<<8|L[8],m=L[15]<<24|L[14]<<16|L[13]<<8|L[12],g=W,x=fe,T=se,_=ue,I=w,R=ye,j=me,v=y,V=O,de=E,q=b,Se=N,ve=A,Ee=a,Ie=u,Ce=m,Ae=0;Ae<20;Ae+=2)I=(I^=V=V+(ve=(ve^=g=g+I|0)>>>16|ve<<16)|0)>>>20|I<<12,R=(R^=de=de+(Ee=(Ee^=x=x+R|0)>>>16|Ee<<16)|0)>>>20|R<<12,j=(j^=q=q+(Ie=(Ie^=T=T+j|0)>>>16|Ie<<16)|0)>>>20|j<<12,v=(v^=Se=Se+(Ce=(Ce^=_=_+v|0)>>>16|Ce<<16)|0)>>>20|v<<12,j=(j^=q=q+(Ie=(Ie^=T=T+j|0)>>>24|Ie<<8)|0)>>>25|j<<7,v=(v^=Se=Se+(Ce=(Ce^=_=_+v|0)>>>24|Ce<<8)|0)>>>25|v<<7,R=(R^=de=de+(Ee=(Ee^=x=x+R|0)>>>24|Ee<<8)|0)>>>25|R<<7,I=(I^=V=V+(ve=(ve^=g=g+I|0)>>>24|ve<<8)|0)>>>25|I<<7,R=(R^=q=q+(Ce=(Ce^=g=g+R|0)>>>16|Ce<<16)|0)>>>20|R<<12,j=(j^=Se=Se+(ve=(ve^=x=x+j|0)>>>16|ve<<16)|0)>>>20|j<<12,v=(v^=V=V+(Ee=(Ee^=T=T+v|0)>>>16|Ee<<16)|0)>>>20|v<<12,I=(I^=de=de+(Ie=(Ie^=_=_+I|0)>>>16|Ie<<16)|0)>>>20|I<<12,v=(v^=V=V+(Ee=(Ee^=T=T+v|0)>>>24|Ee<<8)|0)>>>25|v<<7,I=(I^=de=de+(Ie=(Ie^=_=_+I|0)>>>24|Ie<<8)|0)>>>25|I<<7,j=(j^=Se=Se+(ve=(ve^=x=x+j|0)>>>24|ve<<8)|0)>>>25|j<<7,R=(R^=q=q+(Ce=(Ce^=g=g+R|0)>>>24|Ce<<8)|0)>>>25|R<<7;M.writeUint32LE(g+W|0,$,0),M.writeUint32LE(x+fe|0,$,4),M.writeUint32LE(T+se|0,$,8),M.writeUint32LE(_+ue|0,$,12),M.writeUint32LE(I+w|0,$,16),M.writeUint32LE(R+ye|0,$,20),M.writeUint32LE(j+me|0,$,24),M.writeUint32LE(v+y|0,$,28),M.writeUint32LE(V+O|0,$,32),M.writeUint32LE(de+E|0,$,36),M.writeUint32LE(q+b|0,$,40),M.writeUint32LE(Se+N|0,$,44),M.writeUint32LE(ve+A|0,$,48),M.writeUint32LE(Ee+a|0,$,52),M.writeUint32LE(Ie+u|0,$,56),M.writeUint32LE(Ce+m|0,$,60)}function G($,L,C,W,fe){if(void 0===fe&&(fe=0),32!==$.length)throw new Error("ChaCha: key size must be 32 bytes");if(W.length<C.length)throw new Error("ChaCha: destination is shorter than source");var se,ue;if(0===fe){if(8!==L.length&&12!==L.length)throw new Error("ChaCha nonce must be 8 or 12 bytes");(se=new Uint8Array(16)).set(L,ue=se.length-L.length)}else{if(16!==L.length)throw new Error("ChaCha nonce with counter must be 16 bytes");se=L,ue=fe}for(var w=new Uint8Array(64),ye=0;ye<C.length;ye+=64){ge(w,se,$);for(var me=ye;me<ye+64&&me<C.length;me++)W[me]=C[me]^w[me-ye];K(se,0,ue)}return oe.wipe(w),0===fe&&oe.wipe(se),W}function K($,L,C){for(var W=1;C--;)$[L]=255&(W=W+(255&$[L])|0),W>>>=8,L++;if(W>0)throw new Error("ChaCha: counter overflow")}p.streamXOR=G,p.stream=function($,L,C,W){return void 0===W&&(W=0),oe.wipe(C),G($,L,C,C,W)}},91573:(Oe,p,F)=>{"use strict";var oe=F(25046),be=F(37852),ge=F(91897),G=F(67083),pe=F(3054);p.Cv=32,p.WH=12,p.pg=16;var K=new Uint8Array(16),$=function(){function L(C){if(this.nonceLength=p.WH,this.tagLength=p.pg,C.length!==p.Cv)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(C)}return L.prototype.seal=function(C,W,fe,se){if(C.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var ue=new Uint8Array(16);ue.set(C,ue.length-C.length);var w=new Uint8Array(32);oe.stream(this._key,ue,w,4);var me,ye=W.length+this.tagLength;if(se){if(se.length!==ye)throw new Error("ChaCha20Poly1305: incorrect destination length");me=se}else me=new Uint8Array(ye);return oe.streamXOR(this._key,ue,W,me,4),this._authenticate(me.subarray(me.length-this.tagLength,me.length),w,me.subarray(0,me.length-this.tagLength),fe),ge.wipe(ue),me},L.prototype.open=function(C,W,fe,se){if(C.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(W.length<this.tagLength)return null;var ue=new Uint8Array(16);ue.set(C,ue.length-C.length);var w=new Uint8Array(32);oe.stream(this._key,ue,w,4);var ye=new Uint8Array(this.tagLength);if(this._authenticate(ye,w,W.subarray(0,W.length-this.tagLength),fe),!pe.equal(ye,W.subarray(W.length-this.tagLength,W.length)))return null;var y,me=W.length-this.tagLength;if(se){if(se.length!==me)throw new Error("ChaCha20Poly1305: incorrect destination length");y=se}else y=new Uint8Array(me);return oe.streamXOR(this._key,ue,W.subarray(0,W.length-this.tagLength),y,4),ge.wipe(ue),y},L.prototype.clean=function(){return ge.wipe(this._key),this},L.prototype._authenticate=function(C,W,fe,se){var ue=new be.Poly1305(W);se&&(ue.update(se),se.length%16>0&&ue.update(K.subarray(se.length%16))),ue.update(fe),fe.length%16>0&&ue.update(K.subarray(fe.length%16));var w=new Uint8Array(8);se&&G.writeUint64LE(se.length,w),ue.update(w),G.writeUint64LE(fe.length,w),ue.update(w);for(var ye=ue.digest(),me=0;me<ye.length;me++)C[me]=ye[me];ue.clean(),ge.wipe(ye),ge.wipe(w)},L}();p.OK=$},3054:(Oe,p)=>{"use strict";function oe(ge,G){if(ge.length!==G.length)return 0;for(var pe=0,K=0;K<ge.length;K++)pe|=ge[K]^G[K];return 1&pe-1>>>8}Object.defineProperty(p,"__esModule",{value:!0}),p.select=function(ge,G,pe){return~(ge-1)&G|ge-1&pe},p.lessOrEqual=function(ge,G){return(0|ge)-(0|G)-1>>>31&1},p.compare=oe,p.equal=function(ge,G){return 0!==ge.length&&0!==G.length&&0!==oe(ge,G)}},47903:(Oe,p,F)=>{"use strict";p.Xx=p._w=p.aP=p.KS=p.jQ=void 0;F(52632);const be=F(16);F(91897);function G(ae){const le=new Float64Array(16);if(ae)for(let k=0;k<ae.length;k++)le[k]=ae[k];return le}p.jQ=64,p.KS=64,p.aP=32,new Uint8Array(32)[0]=9;const K=G(),$=G([1]),C=(G([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),G([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222])),W=G([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),fe=G([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]);G([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function ue(ae,le){for(let k=0;k<16;k++)ae[k]=0|le[k]}function w(ae){let le=1;for(let k=0;k<16;k++){let h=ae[k]+le+65535;le=Math.floor(h/65536),ae[k]=h-65536*le}ae[0]+=le-1+37*(le-1)}function ye(ae,le,k){const h=~(k-1);for(let H=0;H<16;H++){const De=h&(ae[H]^le[H]);ae[H]^=De,le[H]^=De}}function me(ae,le){const k=G(),h=G();for(let H=0;H<16;H++)h[H]=le[H];w(h),w(h),w(h);for(let H=0;H<2;H++){k[0]=h[0]-65517;for(let Te=1;Te<15;Te++)k[Te]=h[Te]-65535-(k[Te-1]>>16&1),k[Te-1]&=65535;k[15]=h[15]-32767-(k[14]>>16&1);const De=k[15]>>16&1;k[14]&=65535,ye(h,k,1-De)}for(let H=0;H<16;H++)ae[2*H]=255&h[H],ae[2*H+1]=h[H]>>8}function E(ae){const le=new Uint8Array(32);return me(le,ae),1&le[0]}function N(ae,le,k){for(let h=0;h<16;h++)ae[h]=le[h]+k[h]}function A(ae,le,k){for(let h=0;h<16;h++)ae[h]=le[h]-k[h]}function a(ae,le,k){let h,H,De=0,Te=0,Ve=0,ct=0,ke=0,ut=0,St=0,Rt=0,nt=0,et=0,Ge=0,qe=0,Be=0,Fe=0,Me=0,He=0,je=0,tt=0,rt=0,ot=0,at=0,st=0,ft=0,dt=0,hn=0,Jt=0,bn=0,Cn=0,Rn=0,An=0,vn=0,It=k[0],Pt=k[1],Nt=k[2],vt=k[3],Lt=k[4],Mt=k[5],Ut=k[6],Ct=k[7],$t=k[8],jt=k[9],At=k[10],mt=k[11],Ht=k[12],zt=k[13],Bt=k[14],Kt=k[15];h=le[0],De+=h*It,Te+=h*Pt,Ve+=h*Nt,ct+=h*vt,ke+=h*Lt,ut+=h*Mt,St+=h*Ut,Rt+=h*Ct,nt+=h*$t,et+=h*jt,Ge+=h*At,qe+=h*mt,Be+=h*Ht,Fe+=h*zt,Me+=h*Bt,He+=h*Kt,h=le[1],Te+=h*It,Ve+=h*Pt,ct+=h*Nt,ke+=h*vt,ut+=h*Lt,St+=h*Mt,Rt+=h*Ut,nt+=h*Ct,et+=h*$t,Ge+=h*jt,qe+=h*At,Be+=h*mt,Fe+=h*Ht,Me+=h*zt,He+=h*Bt,je+=h*Kt,h=le[2],Ve+=h*It,ct+=h*Pt,ke+=h*Nt,ut+=h*vt,St+=h*Lt,Rt+=h*Mt,nt+=h*Ut,et+=h*Ct,Ge+=h*$t,qe+=h*jt,Be+=h*At,Fe+=h*mt,Me+=h*Ht,He+=h*zt,je+=h*Bt,tt+=h*Kt,h=le[3],ct+=h*It,ke+=h*Pt,ut+=h*Nt,St+=h*vt,Rt+=h*Lt,nt+=h*Mt,et+=h*Ut,Ge+=h*Ct,qe+=h*$t,Be+=h*jt,Fe+=h*At,Me+=h*mt,He+=h*Ht,je+=h*zt,tt+=h*Bt,rt+=h*Kt,h=le[4],ke+=h*It,ut+=h*Pt,St+=h*Nt,Rt+=h*vt,nt+=h*Lt,et+=h*Mt,Ge+=h*Ut,qe+=h*Ct,Be+=h*$t,Fe+=h*jt,Me+=h*At,He+=h*mt,je+=h*Ht,tt+=h*zt,rt+=h*Bt,ot+=h*Kt,h=le[5],ut+=h*It,St+=h*Pt,Rt+=h*Nt,nt+=h*vt,et+=h*Lt,Ge+=h*Mt,qe+=h*Ut,Be+=h*Ct,Fe+=h*$t,Me+=h*jt,He+=h*At,je+=h*mt,tt+=h*Ht,rt+=h*zt,ot+=h*Bt,at+=h*Kt,h=le[6],St+=h*It,Rt+=h*Pt,nt+=h*Nt,et+=h*vt,Ge+=h*Lt,qe+=h*Mt,Be+=h*Ut,Fe+=h*Ct,Me+=h*$t,He+=h*jt,je+=h*At,tt+=h*mt,rt+=h*Ht,ot+=h*zt,at+=h*Bt,st+=h*Kt,h=le[7],Rt+=h*It,nt+=h*Pt,et+=h*Nt,Ge+=h*vt,qe+=h*Lt,Be+=h*Mt,Fe+=h*Ut,Me+=h*Ct,He+=h*$t,je+=h*jt,tt+=h*At,rt+=h*mt,ot+=h*Ht,at+=h*zt,st+=h*Bt,ft+=h*Kt,h=le[8],nt+=h*It,et+=h*Pt,Ge+=h*Nt,qe+=h*vt,Be+=h*Lt,Fe+=h*Mt,Me+=h*Ut,He+=h*Ct,je+=h*$t,tt+=h*jt,rt+=h*At,ot+=h*mt,at+=h*Ht,st+=h*zt,ft+=h*Bt,dt+=h*Kt,h=le[9],et+=h*It,Ge+=h*Pt,qe+=h*Nt,Be+=h*vt,Fe+=h*Lt,Me+=h*Mt,He+=h*Ut,je+=h*Ct,tt+=h*$t,rt+=h*jt,ot+=h*At,at+=h*mt,st+=h*Ht,ft+=h*zt,dt+=h*Bt,hn+=h*Kt,h=le[10],Ge+=h*It,qe+=h*Pt,Be+=h*Nt,Fe+=h*vt,Me+=h*Lt,He+=h*Mt,je+=h*Ut,tt+=h*Ct,rt+=h*$t,ot+=h*jt,at+=h*At,st+=h*mt,ft+=h*Ht,dt+=h*zt,hn+=h*Bt,Jt+=h*Kt,h=le[11],qe+=h*It,Be+=h*Pt,Fe+=h*Nt,Me+=h*vt,He+=h*Lt,je+=h*Mt,tt+=h*Ut,rt+=h*Ct,ot+=h*$t,at+=h*jt,st+=h*At,ft+=h*mt,dt+=h*Ht,hn+=h*zt,Jt+=h*Bt,bn+=h*Kt,h=le[12],Be+=h*It,Fe+=h*Pt,Me+=h*Nt,He+=h*vt,je+=h*Lt,tt+=h*Mt,rt+=h*Ut,ot+=h*Ct,at+=h*$t,st+=h*jt,ft+=h*At,dt+=h*mt,hn+=h*Ht,Jt+=h*zt,bn+=h*Bt,Cn+=h*Kt,h=le[13],Fe+=h*It,Me+=h*Pt,He+=h*Nt,je+=h*vt,tt+=h*Lt,rt+=h*Mt,ot+=h*Ut,at+=h*Ct,st+=h*$t,ft+=h*jt,dt+=h*At,hn+=h*mt,Jt+=h*Ht,bn+=h*zt,Cn+=h*Bt,Rn+=h*Kt,h=le[14],Me+=h*It,He+=h*Pt,je+=h*Nt,tt+=h*vt,rt+=h*Lt,ot+=h*Mt,at+=h*Ut,st+=h*Ct,ft+=h*$t,dt+=h*jt,hn+=h*At,Jt+=h*mt,bn+=h*Ht,Cn+=h*zt,Rn+=h*Bt,An+=h*Kt,h=le[15],He+=h*It,je+=h*Pt,tt+=h*Nt,rt+=h*vt,ot+=h*Lt,at+=h*Mt,st+=h*Ut,ft+=h*Ct,dt+=h*$t,hn+=h*jt,Jt+=h*At,bn+=h*mt,Cn+=h*Ht,Rn+=h*zt,An+=h*Bt,vn+=h*Kt,De+=38*je,Te+=38*tt,Ve+=38*rt,ct+=38*ot,ke+=38*at,ut+=38*st,St+=38*ft,Rt+=38*dt,nt+=38*hn,et+=38*Jt,Ge+=38*bn,qe+=38*Cn,Be+=38*Rn,Fe+=38*An,Me+=38*vn,H=1,h=De+H+65535,H=Math.floor(h/65536),De=h-65536*H,h=Te+H+65535,H=Math.floor(h/65536),Te=h-65536*H,h=Ve+H+65535,H=Math.floor(h/65536),Ve=h-65536*H,h=ct+H+65535,H=Math.floor(h/65536),ct=h-65536*H,h=ke+H+65535,H=Math.floor(h/65536),ke=h-65536*H,h=ut+H+65535,H=Math.floor(h/65536),ut=h-65536*H,h=St+H+65535,H=Math.floor(h/65536),St=h-65536*H,h=Rt+H+65535,H=Math.floor(h/65536),Rt=h-65536*H,h=nt+H+65535,H=Math.floor(h/65536),nt=h-65536*H,h=et+H+65535,H=Math.floor(h/65536),et=h-65536*H,h=Ge+H+65535,H=Math.floor(h/65536),Ge=h-65536*H,h=qe+H+65535,H=Math.floor(h/65536),qe=h-65536*H,h=Be+H+65535,H=Math.floor(h/65536),Be=h-65536*H,h=Fe+H+65535,H=Math.floor(h/65536),Fe=h-65536*H,h=Me+H+65535,H=Math.floor(h/65536),Me=h-65536*H,h=He+H+65535,H=Math.floor(h/65536),He=h-65536*H,De+=H-1+37*(H-1),H=1,h=De+H+65535,H=Math.floor(h/65536),De=h-65536*H,h=Te+H+65535,H=Math.floor(h/65536),Te=h-65536*H,h=Ve+H+65535,H=Math.floor(h/65536),Ve=h-65536*H,h=ct+H+65535,H=Math.floor(h/65536),ct=h-65536*H,h=ke+H+65535,H=Math.floor(h/65536),ke=h-65536*H,h=ut+H+65535,H=Math.floor(h/65536),ut=h-65536*H,h=St+H+65535,H=Math.floor(h/65536),St=h-65536*H,h=Rt+H+65535,H=Math.floor(h/65536),Rt=h-65536*H,h=nt+H+65535,H=Math.floor(h/65536),nt=h-65536*H,h=et+H+65535,H=Math.floor(h/65536),et=h-65536*H,h=Ge+H+65535,H=Math.floor(h/65536),Ge=h-65536*H,h=qe+H+65535,H=Math.floor(h/65536),qe=h-65536*H,h=Be+H+65535,H=Math.floor(h/65536),Be=h-65536*H,h=Fe+H+65535,H=Math.floor(h/65536),Fe=h-65536*H,h=Me+H+65535,H=Math.floor(h/65536),Me=h-65536*H,h=He+H+65535,H=Math.floor(h/65536),He=h-65536*H,De+=H-1+37*(H-1),ae[0]=De,ae[1]=Te,ae[2]=Ve,ae[3]=ct,ae[4]=ke,ae[5]=ut,ae[6]=St,ae[7]=Rt,ae[8]=nt,ae[9]=et,ae[10]=Ge,ae[11]=qe,ae[12]=Be,ae[13]=Fe,ae[14]=Me,ae[15]=He}function u(ae,le){a(ae,le,le)}function x(ae,le){const k=G(),h=G(),H=G(),De=G(),Te=G(),Ve=G(),ct=G(),ke=G(),ut=G();A(k,ae[1],ae[0]),A(ut,le[1],le[0]),a(k,k,ut),N(h,ae[0],ae[1]),N(ut,le[0],le[1]),a(h,h,ut),a(H,ae[3],le[3]),a(H,H,C),a(De,ae[2],le[2]),N(De,De,De),A(Te,h,k),A(Ve,De,H),N(ct,De,H),N(ke,h,k),a(ae[0],Te,Ve),a(ae[1],ke,ct),a(ae[2],ct,Ve),a(ae[3],Te,ke)}function T(ae,le,k){for(let h=0;h<4;h++)ye(ae[h],le[h],k)}function _(ae,le){const k=G(),h=G(),H=G();(function(ae,le){const k=G();let h;for(h=0;h<16;h++)k[h]=le[h];for(h=253;h>=0;h--)u(k,k),2!==h&&4!==h&&a(k,k,le);for(h=0;h<16;h++)ae[h]=k[h]})(H,le[2]),a(k,le[0],H),a(h,le[1],H),me(ae,h),ae[31]^=E(k)<<7}function R(ae,le){const k=[G(),G(),G(),G()];ue(k[0],W),ue(k[1],fe),ue(k[2],$),a(k[3],W,fe),function(ae,le,k){ue(ae[0],K),ue(ae[1],$),ue(ae[2],$),ue(ae[3],K);for(let h=255;h>=0;--h){const H=k[h/8|0]>>(7&h)&1;T(ae,le,H),x(le,ae),x(ae,ae),T(ae,le,H)}}(ae,k,le)}p._w=function(ae){if(ae.length!==p.aP)throw new Error(`ed25519: seed must be ${p.aP} bytes`);const le=(0,be.hash)(ae);le[0]&=248,le[31]&=127,le[31]|=64;const k=new Uint8Array(32),h=[G(),G(),G(),G()];R(h,le),_(k,h);const H=new Uint8Array(64);return H.set(ae),H.set(k,32),{publicKey:k,secretKey:H}};const de=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function q(ae,le){let k,h,H,De;for(h=63;h>=32;--h){for(k=0,H=h-32,De=h-12;H<De;++H)le[H]+=k-16*le[h]*de[H-(h-32)],k=Math.floor((le[H]+128)/256),le[H]-=256*k;le[H]+=k,le[h]=0}for(k=0,H=0;H<32;H++)le[H]+=k-(le[31]>>4)*de[H],k=le[H]>>8,le[H]&=255;for(H=0;H<32;H++)le[H]-=k*de[H];for(h=0;h<32;h++)le[h+1]+=le[h]>>8,ae[h]=255&le[h]}function Se(ae){const le=new Float64Array(64);for(let k=0;k<64;k++)le[k]=ae[k];for(let k=0;k<64;k++)ae[k]=0;q(ae,le)}p.Xx=function(ae,le){const k=new Float64Array(64),h=[G(),G(),G(),G()],H=(0,be.hash)(ae.subarray(0,32));H[0]&=248,H[31]&=127,H[31]|=64;const De=new Uint8Array(64);De.set(H.subarray(32),32);const Te=new be.SHA512;Te.update(De.subarray(32)),Te.update(le);const Ve=Te.digest();Te.clean(),Se(Ve),R(h,Ve),_(De,h),Te.reset(),Te.update(De.subarray(0,32)),Te.update(ae.subarray(32)),Te.update(le);const ct=Te.digest();Se(ct);for(let ke=0;ke<32;ke++)k[ke]=Ve[ke];for(let ke=0;ke<32;ke++)for(let ut=0;ut<32;ut++)k[ke+ut]+=ct[ke]*H[ut];return q(De.subarray(32),k),De}},22266:(Oe,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.isSerializableHash=function(M){return void 0!==M.saveState&&void 0!==M.restoreState&&void 0!==M.cleanSavedState}},37651:(Oe,p,F)=>{"use strict";var oe=F(56283),be=F(91897),ge=function(){function G(pe,K,$,L){void 0===$&&($=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=pe,this._info=L;var C=oe.hmac(this._hash,$,K);this._hmac=new oe.HMAC(pe,C),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return G.prototype._fillBuffer=function(){this._counter[0]++;var pe=this._counter[0];if(0===pe)throw new Error("hkdf: cannot expand more");this._hmac.reset(),pe>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},G.prototype.expand=function(pe){for(var K=new Uint8Array(pe),$=0;$<K.length;$++)this._bufpos===this._buffer.length&&this._fillBuffer(),K[$]=this._buffer[this._bufpos++];return K},G.prototype.clean=function(){this._hmac.clean(),be.wipe(this._buffer),be.wipe(this._counter),this._bufpos=0},G}();p.t=ge},56283:(Oe,p,F)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0});var M=F(22266),oe=F(3054),be=F(91897),ge=function(){function pe(K,$){this._finished=!1,this._inner=new K,this._outer=new K,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var L=new Uint8Array(this.blockSize);$.length>this.blockSize?this._inner.update($).finish(L).clean():L.set($);for(var C=0;C<L.length;C++)L[C]^=54;for(this._inner.update(L),C=0;C<L.length;C++)L[C]^=106;this._outer.update(L),M.isSerializableHash(this._inner)&&M.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),be.wipe(L)}return pe.prototype.reset=function(){if(!M.isSerializableHash(this._inner)||!M.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},pe.prototype.clean=function(){M.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),M.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},pe.prototype.update=function(K){return this._inner.update(K),this},pe.prototype.finish=function(K){return this._finished?(this._outer.finish(K),this):(this._inner.finish(K),this._outer.update(K.subarray(0,this.digestLength)).finish(K),this._finished=!0,this)},pe.prototype.digest=function(){var K=new Uint8Array(this.digestLength);return this.finish(K),K},pe.prototype.saveState=function(){if(!M.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},pe.prototype.restoreState=function(K){if(!M.isSerializableHash(this._inner)||!M.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(K),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},pe.prototype.cleanSavedState=function(K){if(!M.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(K)},pe}();p.HMAC=ge,p.hmac=function(pe,K,$){var L=new ge(pe,K);L.update($);var C=L.digest();return L.clean(),C},p.equal=oe.equal},94846:(Oe,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.mul=Math.imul||function(pe,K){var L=65535&pe,W=65535&K;return L*W+((pe>>>16&65535)*W+L*(K>>>16&65535)<<16>>>0)|0},p.add=function(pe,K){return pe+K|0},p.sub=function(pe,K){return pe-K|0},p.rotl=function(pe,K){return pe<<K|pe>>>32-K},p.rotr=function(pe,K){return pe<<32-K|pe>>>K},p.isInteger=Number.isInteger||function(pe){return"number"==typeof pe&&isFinite(pe)&&Math.floor(pe)===pe},p.MAX_SAFE_INTEGER=9007199254740991,p.isSafeInteger=function(pe){return p.isInteger(pe)&&pe>=-p.MAX_SAFE_INTEGER&&pe<=p.MAX_SAFE_INTEGER}},37852:(Oe,p,F)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0});var M=F(3054),oe=F(91897);p.DIGEST_LENGTH=16;var be=function(){function pe(K){this.digestLength=p.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var $=K[0]|K[1]<<8;this._r[0]=8191&$;var L=K[2]|K[3]<<8;this._r[1]=8191&($>>>13|L<<3);var C=K[4]|K[5]<<8;this._r[2]=7939&(L>>>10|C<<6);var W=K[6]|K[7]<<8;this._r[3]=8191&(C>>>7|W<<9);var fe=K[8]|K[9]<<8;this._r[4]=255&(W>>>4|fe<<12),this._r[5]=fe>>>1&8190;var se=K[10]|K[11]<<8;this._r[6]=8191&(fe>>>14|se<<2);var ue=K[12]|K[13]<<8;this._r[7]=8065&(se>>>11|ue<<5);var w=K[14]|K[15]<<8;this._r[8]=8191&(ue>>>8|w<<8),this._r[9]=w>>>5&127,this._pad[0]=K[16]|K[17]<<8,this._pad[1]=K[18]|K[19]<<8,this._pad[2]=K[20]|K[21]<<8,this._pad[3]=K[22]|K[23]<<8,this._pad[4]=K[24]|K[25]<<8,this._pad[5]=K[26]|K[27]<<8,this._pad[6]=K[28]|K[29]<<8,this._pad[7]=K[30]|K[31]<<8}return pe.prototype._blocks=function(K,$,L){for(var C=this._fin?0:2048,W=this._h[0],fe=this._h[1],se=this._h[2],ue=this._h[3],w=this._h[4],ye=this._h[5],me=this._h[6],y=this._h[7],O=this._h[8],E=this._h[9],b=this._r[0],N=this._r[1],A=this._r[2],a=this._r[3],u=this._r[4],m=this._r[5],g=this._r[6],x=this._r[7],T=this._r[8],_=this._r[9];L>=16;){var I=K[$+0]|K[$+1]<<8,R=K[$+2]|K[$+3]<<8,j=K[$+4]|K[$+5]<<8,v=K[$+6]|K[$+7]<<8,V=K[$+8]|K[$+9]<<8,de=K[$+10]|K[$+11]<<8,q=K[$+12]|K[$+13]<<8,Se=K[$+14]|K[$+15]<<8,ve=0,Ee=ve;Ee+=(W+=8191&I)*b,Ee+=(fe+=8191&(I>>>13|R<<3))*(5*_),Ee+=(se+=8191&(R>>>10|j<<6))*(5*T),Ee+=(ue+=8191&(j>>>7|v<<9))*(5*x),ve=(Ee+=(w+=8191&(v>>>4|V<<12))*(5*g))>>>13,Ee&=8191,Ee+=(ye+=V>>>1&8191)*(5*m),Ee+=(me+=8191&(V>>>14|de<<2))*(5*u),Ee+=(y+=8191&(de>>>11|q<<5))*(5*a),Ee+=(O+=8191&(q>>>8|Se<<8))*(5*A);var Ie=ve+=(Ee+=(E+=Se>>>5|C)*(5*N))>>>13;Ie+=W*N,Ie+=fe*b,Ie+=se*(5*_),Ie+=ue*(5*T),ve=(Ie+=w*(5*x))>>>13,Ie&=8191,Ie+=ye*(5*g),Ie+=me*(5*m),Ie+=y*(5*u),Ie+=O*(5*a),ve+=(Ie+=E*(5*A))>>>13,Ie&=8191;var Ce=ve;Ce+=W*A,Ce+=fe*N,Ce+=se*b,Ce+=ue*(5*_),ve=(Ce+=w*(5*T))>>>13,Ce&=8191,Ce+=ye*(5*x),Ce+=me*(5*g),Ce+=y*(5*m),Ce+=O*(5*u);var Ae=ve+=(Ce+=E*(5*a))>>>13;Ae+=W*a,Ae+=fe*A,Ae+=se*N,Ae+=ue*b,ve=(Ae+=w*(5*_))>>>13,Ae&=8191,Ae+=ye*(5*T),Ae+=me*(5*x),Ae+=y*(5*g),Ae+=O*(5*m);var ae=ve+=(Ae+=E*(5*u))>>>13;ae+=W*u,ae+=fe*a,ae+=se*A,ae+=ue*N,ve=(ae+=w*b)>>>13,ae&=8191,ae+=ye*(5*_),ae+=me*(5*T),ae+=y*(5*x),ae+=O*(5*g);var le=ve+=(ae+=E*(5*m))>>>13;le+=W*m,le+=fe*u,le+=se*a,le+=ue*A,ve=(le+=w*N)>>>13,le&=8191,le+=ye*b,le+=me*(5*_),le+=y*(5*T),le+=O*(5*x);var k=ve+=(le+=E*(5*g))>>>13;k+=W*g,k+=fe*m,k+=se*u,k+=ue*a,ve=(k+=w*A)>>>13,k&=8191,k+=ye*N,k+=me*b,k+=y*(5*_),k+=O*(5*T);var h=ve+=(k+=E*(5*x))>>>13;h+=W*x,h+=fe*g,h+=se*m,h+=ue*u,ve=(h+=w*a)>>>13,h&=8191,h+=ye*A,h+=me*N,h+=y*b,h+=O*(5*_);var H=ve+=(h+=E*(5*T))>>>13;H+=W*T,H+=fe*x,H+=se*g,H+=ue*m,ve=(H+=w*u)>>>13,H&=8191,H+=ye*a,H+=me*A,H+=y*N,H+=O*b;var De=ve+=(H+=E*(5*_))>>>13;De+=W*_,De+=fe*T,De+=se*x,De+=ue*g,ve=(De+=w*m)>>>13,De&=8191,De+=ye*u,De+=me*a,De+=y*A,De+=O*N,W=Ee=8191&(ve=(ve=((ve+=(De+=E*b)>>>13)<<2)+ve|0)+(Ee&=8191)|0),fe=Ie+=ve>>>=13,se=Ce&=8191,ue=Ae&=8191,w=ae&=8191,ye=le&=8191,me=k&=8191,y=h&=8191,O=H&=8191,E=De&=8191,$+=16,L-=16}this._h[0]=W,this._h[1]=fe,this._h[2]=se,this._h[3]=ue,this._h[4]=w,this._h[5]=ye,this._h[6]=me,this._h[7]=y,this._h[8]=O,this._h[9]=E},pe.prototype.finish=function(K,$){void 0===$&&($=0);var C,W,fe,se,L=new Uint16Array(10);if(this._leftover){for(se=this._leftover,this._buffer[se++]=1;se<16;se++)this._buffer[se]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(C=this._h[1]>>>13,this._h[1]&=8191,se=2;se<10;se++)this._h[se]+=C,C=this._h[se]>>>13,this._h[se]&=8191;for(this._h[0]+=5*C,C=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=C,C=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=C,L[0]=this._h[0]+5,C=L[0]>>>13,L[0]&=8191,se=1;se<10;se++)L[se]=this._h[se]+C,C=L[se]>>>13,L[se]&=8191;for(L[9]-=8192,W=(1^C)-1,se=0;se<10;se++)L[se]&=W;for(W=~W,se=0;se<10;se++)this._h[se]=this._h[se]&W|L[se];for(this._h[0]=65535&(this._h[0]|this._h[1]<<13),this._h[1]=65535&(this._h[1]>>>3|this._h[2]<<10),this._h[2]=65535&(this._h[2]>>>6|this._h[3]<<7),this._h[3]=65535&(this._h[3]>>>9|this._h[4]<<4),this._h[4]=65535&(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14),this._h[5]=65535&(this._h[6]>>>2|this._h[7]<<11),this._h[6]=65535&(this._h[7]>>>5|this._h[8]<<8),this._h[7]=65535&(this._h[8]>>>8|this._h[9]<<5),this._h[0]=65535&(fe=this._h[0]+this._pad[0]),se=1;se<8;se++)this._h[se]=65535&(fe=(this._h[se]+this._pad[se]|0)+(fe>>>16)|0);return K[$+0]=this._h[0]>>>0,K[$+1]=this._h[0]>>>8,K[$+2]=this._h[1]>>>0,K[$+3]=this._h[1]>>>8,K[$+4]=this._h[2]>>>0,K[$+5]=this._h[2]>>>8,K[$+6]=this._h[3]>>>0,K[$+7]=this._h[3]>>>8,K[$+8]=this._h[4]>>>0,K[$+9]=this._h[4]>>>8,K[$+10]=this._h[5]>>>0,K[$+11]=this._h[5]>>>8,K[$+12]=this._h[6]>>>0,K[$+13]=this._h[6]>>>8,K[$+14]=this._h[7]>>>0,K[$+15]=this._h[7]>>>8,this._finished=!0,this},pe.prototype.update=function(K){var C,$=0,L=K.length;if(this._leftover){(C=16-this._leftover)>L&&(C=L);for(var W=0;W<C;W++)this._buffer[this._leftover+W]=K[$+W];if(L-=C,$+=C,this._leftover+=C,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(L>=16&&(this._blocks(K,$,C=L-L%16),$+=C,L-=C),L){for(W=0;W<L;W++)this._buffer[this._leftover+W]=K[$+W];this._leftover+=L}return this},pe.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var K=new Uint8Array(16);return this.finish(K),K},pe.prototype.clean=function(){return oe.wipe(this._buffer),oe.wipe(this._r),oe.wipe(this._h),oe.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},pe}();p.Poly1305=be,p.oneTimeAuth=function(pe,K){var $=new be(pe);$.update(K);var L=$.digest();return $.clean(),L},p.equal=function(pe,K){return pe.length===p.DIGEST_LENGTH&&K.length===p.DIGEST_LENGTH&&M.equal(pe,K)}},52632:(Oe,p,F)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.randomStringForEntropy=p.randomString=p.randomUint32=p.randomBytes=p.defaultRandomSource=void 0;const M=F(88920),oe=F(67083),be=F(91897);function ge(L,C=p.defaultRandomSource){return C.randomBytes(L)}p.defaultRandomSource=new M.SystemRandomSource,p.randomBytes=ge,p.randomUint32=function(L=p.defaultRandomSource){const C=ge(4,L),W=(0,oe.readUint32LE)(C);return(0,be.wipe)(C),W};const pe="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function K(L,C=pe,W=p.defaultRandomSource){if(C.length<2)throw new Error("randomString charset is too short");if(C.length>256)throw new Error("randomString charset is too long");let fe="";const se=C.length,ue=256-256%se;for(;L>0;){const w=ge(Math.ceil(256*L/ue),W);for(let ye=0;ye<w.length&&L>0;ye++){const me=w[ye];me<ue&&(fe+=C.charAt(me%se),L--)}(0,be.wipe)(w)}return fe}p.randomString=K,p.randomStringForEntropy=function(L,C=pe,W=p.defaultRandomSource){return K(Math.ceil(L/(Math.log(C.length)/Math.LN2)),C,W)}},65695:(Oe,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.BrowserRandomSource=void 0,p.BrowserRandomSource=class{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const be="undefined"!=typeof self?self.crypto||self.msCrypto:null;be&&void 0!==be.getRandomValues&&(this._crypto=be,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(be){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const ge=new Uint8Array(be);for(let G=0;G<ge.length;G+=65536)this._crypto.getRandomValues(ge.subarray(G,G+Math.min(ge.length-G,65536)));return ge}}},49398:(Oe,p,F)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.NodeRandomSource=void 0;const M=F(91897);p.NodeRandomSource=class{constructor(){this.isAvailable=!1,this.isInstantiated=!1;{const ge=F(19726);ge&&ge.randomBytes&&(this._crypto=ge,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(ge){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let G=this._crypto.randomBytes(ge);if(G.length!==ge)throw new Error("NodeRandomSource: got fewer bytes than requested");const pe=new Uint8Array(ge);for(let K=0;K<pe.length;K++)pe[K]=G[K];return(0,M.wipe)(G),pe}}},88920:(Oe,p,F)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.SystemRandomSource=void 0;const M=F(65695),oe=F(49398);p.SystemRandomSource=class{constructor(){return this.isAvailable=!1,this.name="",this._source=new M.BrowserRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Browser")):(this._source=new oe.NodeRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Node")):void 0)}randomBytes(G){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(G)}}},41027:(Oe,p,F)=>{"use strict";var oe=F(67083),be=F(91897);p.k=32,p.cn=64;var ge=function(){function $(){this.digestLength=p.k,this.blockSize=p.cn,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return $.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},$.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},$.prototype.clean=function(){be.wipe(this._buffer),be.wipe(this._temp),this.reset()},$.prototype.update=function(L,C){if(void 0===C&&(C=L.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var W=0;if(this._bytesHashed+=C,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&C>0;)this._buffer[this._bufferLength++]=L[W++],C--;this._bufferLength===this.blockSize&&(pe(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(C>=this.blockSize&&(W=pe(this._temp,this._state,L,W,C),C%=this.blockSize);C>0;)this._buffer[this._bufferLength++]=L[W++],C--;return this},$.prototype.finish=function(L){if(!this._finished){var C=this._bytesHashed,W=this._bufferLength,fe=C/536870912|0,se=C<<3,ue=C%64<56?64:128;this._buffer[W]=128;for(var w=W+1;w<ue-8;w++)this._buffer[w]=0;oe.writeUint32BE(fe,this._buffer,ue-8),oe.writeUint32BE(se,this._buffer,ue-4),pe(this._temp,this._state,this._buffer,0,ue),this._finished=!0}for(w=0;w<this.digestLength/4;w++)oe.writeUint32BE(this._state[w],L,4*w);return this},$.prototype.digest=function(){var L=new Uint8Array(this.digestLength);return this.finish(L),L},$.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},$.prototype.restoreState=function(L){return this._state.set(L.state),this._bufferLength=L.bufferLength,L.buffer&&this._buffer.set(L.buffer),this._bytesHashed=L.bytesHashed,this._finished=!1,this},$.prototype.cleanSavedState=function(L){be.wipe(L.state),L.buffer&&be.wipe(L.buffer),L.bufferLength=0,L.bytesHashed=0},$}();p.mE=ge;var G=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function pe($,L,C,W,fe){for(;fe>=64;){for(var se=L[0],ue=L[1],w=L[2],ye=L[3],me=L[4],y=L[5],O=L[6],E=L[7],b=0;b<16;b++)$[b]=oe.readUint32BE(C,W+4*b);for(b=16;b<64;b++){var A=$[b-2];$[b]=((a=(A>>>17|A<<15)^(A>>>19|A<<13)^A>>>10)+$[b-7]|0)+((u=((A=$[b-15])>>>7|A<<25)^(A>>>18|A<<14)^A>>>3)+$[b-16]|0)}for(b=0;b<64;b++){var a=(((me>>>6|me<<26)^(me>>>11|me<<21)^(me>>>25|me<<7))+(me&y^~me&O)|0)+(E+(G[b]+$[b]|0)|0)|0,u=((se>>>2|se<<30)^(se>>>13|se<<19)^(se>>>22|se<<10))+(se&ue^se&w^ue&w)|0;E=O,O=y,y=me,me=ye+a|0,ye=w,w=ue,ue=se,se=a+u|0}L[0]+=se,L[1]+=ue,L[2]+=w,L[3]+=ye,L[4]+=me,L[5]+=y,L[6]+=O,L[7]+=E,W+=64,fe-=64}return W}p.vp=function($){var L=new ge;L.update($);var C=L.digest();return L.clean(),C}},16:(Oe,p,F)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0});var M=F(67083),oe=F(91897);p.DIGEST_LENGTH=64,p.BLOCK_SIZE=128;var be=function(){function K(){this.digestLength=p.DIGEST_LENGTH,this.blockSize=p.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return K.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},K.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},K.prototype.clean=function(){oe.wipe(this._buffer),oe.wipe(this._tempHi),oe.wipe(this._tempLo),this.reset()},K.prototype.update=function($,L){if(void 0===L&&(L=$.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var C=0;if(this._bytesHashed+=L,this._bufferLength>0){for(;this._bufferLength<p.BLOCK_SIZE&&L>0;)this._buffer[this._bufferLength++]=$[C++],L--;this._bufferLength===this.blockSize&&(G(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(L>=this.blockSize&&(C=G(this._tempHi,this._tempLo,this._stateHi,this._stateLo,$,C,L),L%=this.blockSize);L>0;)this._buffer[this._bufferLength++]=$[C++],L--;return this},K.prototype.finish=function($){if(!this._finished){var L=this._bytesHashed,C=this._bufferLength,W=L/536870912|0,fe=L<<3,se=L%128<112?128:256;this._buffer[C]=128;for(var ue=C+1;ue<se-8;ue++)this._buffer[ue]=0;M.writeUint32BE(W,this._buffer,se-8),M.writeUint32BE(fe,this._buffer,se-4),G(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,se),this._finished=!0}for(ue=0;ue<this.digestLength/8;ue++)M.writeUint32BE(this._stateHi[ue],$,8*ue),M.writeUint32BE(this._stateLo[ue],$,8*ue+4);return this},K.prototype.digest=function(){var $=new Uint8Array(this.digestLength);return this.finish($),$},K.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},K.prototype.restoreState=function($){return this._stateHi.set($.stateHi),this._stateLo.set($.stateLo),this._bufferLength=$.bufferLength,$.buffer&&this._buffer.set($.buffer),this._bytesHashed=$.bytesHashed,this._finished=!1,this},K.prototype.cleanSavedState=function($){oe.wipe($.stateHi),oe.wipe($.stateLo),$.buffer&&oe.wipe($.buffer),$.bufferLength=0,$.bytesHashed=0},K}();p.SHA512=be;var ge=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function G(K,$,L,C,W,fe,se){for(var _,I,R,j,v,V,de,q,ue=L[0],w=L[1],ye=L[2],me=L[3],y=L[4],O=L[5],E=L[6],b=L[7],N=C[0],A=C[1],a=C[2],u=C[3],m=C[4],g=C[5],x=C[6],T=C[7];se>=128;){for(var Se=0;Se<16;Se++)K[Se]=M.readUint32BE(W,ve=8*Se+fe),$[Se]=M.readUint32BE(W,ve+4);for(Se=0;Se<80;Se++){var h,St,Ie=w,Ce=ye,Ae=me,ae=y,le=O,k=E,De=A,Te=a,Ve=u,ct=m,ke=g,ut=x;if(v=65535&(I=T),V=I>>>16,de=65535&(_=b),q=_>>>16,v+=65535&(I=(m>>>14|y<<18)^(m>>>18|y<<14)^(y>>>9|m<<23)),V+=I>>>16,de+=65535&(_=(y>>>14|m<<18)^(y>>>18|m<<14)^(m>>>9|y<<23)),q+=_>>>16,v+=65535&(I=m&g^~m&x),V+=I>>>16,de+=65535&(_=y&O^~y&E),q+=_>>>16,v+=65535&(I=ge[2*Se+1]),V+=I>>>16,de+=65535&(_=ge[2*Se]),q+=_>>>16,V+=(I=$[Se%16])>>>16,de+=65535&(_=K[Se%16]),q+=_>>>16,de+=(V+=(v+=65535&I)>>>16)>>>16,v=65535&(I=j=65535&v|V<<16),V=I>>>16,de=65535&(_=R=65535&de|(q+=de>>>16)<<16),q=_>>>16,v+=65535&(I=(N>>>28|ue<<4)^(ue>>>2|N<<30)^(ue>>>7|N<<25)),V+=I>>>16,de+=65535&(_=(ue>>>28|N<<4)^(N>>>2|ue<<30)^(N>>>7|ue<<25)),q+=_>>>16,V+=(I=N&A^N&a^A&a)>>>16,de+=65535&(_=ue&w^ue&ye^w&ye),q+=_>>>16,h=65535&(de+=(V+=(v+=65535&I)>>>16)>>>16)|(q+=de>>>16)<<16,St=65535&v|V<<16,v=65535&(I=Ve),V=I>>>16,de=65535&(_=Ae),q=_>>>16,V+=(I=j)>>>16,de+=65535&(_=R),q+=_>>>16,w=ue,ye=Ie,me=Ce,y=Ae=65535&(de+=(V+=(v+=65535&I)>>>16)>>>16)|(q+=de>>>16)<<16,O=ae,E=le,b=k,ue=h,A=N,a=De,u=Te,m=Ve=65535&v|V<<16,g=ct,x=ke,T=ut,N=St,Se%16==15)for(var ve=0;ve<16;ve++)v=65535&(I=$[ve]),V=I>>>16,de=65535&(_=K[ve]),q=_>>>16,v+=65535&(I=$[(ve+9)%16]),V+=I>>>16,de+=65535&(_=K[(ve+9)%16]),q+=_>>>16,v+=65535&(I=((j=$[(ve+1)%16])>>>1|(R=K[(ve+1)%16])<<31)^(j>>>8|R<<24)^(j>>>7|R<<25)),V+=I>>>16,de+=65535&(_=(R>>>1|j<<31)^(R>>>8|j<<24)^R>>>7),q+=_>>>16,V+=(I=((j=$[(ve+14)%16])>>>19|(R=K[(ve+14)%16])<<13)^(R>>>29|j<<3)^(j>>>6|R<<26))>>>16,de+=65535&(_=(R>>>19|j<<13)^(j>>>29|R<<3)^R>>>6),q+=_>>>16,K[ve]=65535&(de+=(V+=(v+=65535&I)>>>16)>>>16)|(q+=de>>>16)<<16,$[ve]=65535&v|V<<16}v=65535&(I=N),V=I>>>16,de=65535&(_=ue),q=_>>>16,V+=(I=C[0])>>>16,de+=65535&(_=L[0]),q+=_>>>16,L[0]=ue=65535&(de+=(V+=(v+=65535&I)>>>16)>>>16)|(q+=de>>>16)<<16,C[0]=N=65535&v|V<<16,v=65535&(I=A),V=I>>>16,de=65535&(_=w),q=_>>>16,V+=(I=C[1])>>>16,de+=65535&(_=L[1]),q+=_>>>16,L[1]=w=65535&(de+=(V+=(v+=65535&I)>>>16)>>>16)|(q+=de>>>16)<<16,C[1]=A=65535&v|V<<16,v=65535&(I=a),V=I>>>16,de=65535&(_=ye),q=_>>>16,V+=(I=C[2])>>>16,de+=65535&(_=L[2]),q+=_>>>16,L[2]=ye=65535&(de+=(V+=(v+=65535&I)>>>16)>>>16)|(q+=de>>>16)<<16,C[2]=a=65535&v|V<<16,v=65535&(I=u),V=I>>>16,de=65535&(_=me),q=_>>>16,V+=(I=C[3])>>>16,de+=65535&(_=L[3]),q+=_>>>16,L[3]=me=65535&(de+=(V+=(v+=65535&I)>>>16)>>>16)|(q+=de>>>16)<<16,C[3]=u=65535&v|V<<16,v=65535&(I=m),V=I>>>16,de=65535&(_=y),q=_>>>16,V+=(I=C[4])>>>16,de+=65535&(_=L[4]),q+=_>>>16,L[4]=y=65535&(de+=(V+=(v+=65535&I)>>>16)>>>16)|(q+=de>>>16)<<16,C[4]=m=65535&v|V<<16,v=65535&(I=g),V=I>>>16,de=65535&(_=O),q=_>>>16,V+=(I=C[5])>>>16,de+=65535&(_=L[5]),q+=_>>>16,L[5]=O=65535&(de+=(V+=(v+=65535&I)>>>16)>>>16)|(q+=de>>>16)<<16,C[5]=g=65535&v|V<<16,v=65535&(I=x),V=I>>>16,de=65535&(_=E),q=_>>>16,V+=(I=C[6])>>>16,de+=65535&(_=L[6]),q+=_>>>16,L[6]=E=65535&(de+=(V+=(v+=65535&I)>>>16)>>>16)|(q+=de>>>16)<<16,C[6]=x=65535&v|V<<16,v=65535&(I=T),V=I>>>16,de=65535&(_=b),q=_>>>16,V+=(I=C[7])>>>16,de+=65535&(_=L[7]),q+=_>>>16,L[7]=b=65535&(de+=(V+=(v+=65535&I)>>>16)>>>16)|(q+=de>>>16)<<16,C[7]=T=65535&v|V<<16,fe+=128,se-=128}return fe}p.hash=function(K){var $=new be;$.update(K);var L=$.digest();return $.clean(),L}},91897:(Oe,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.wipe=function(M){for(var oe=0;oe<M.length;oe++)M[oe]=0;return M}},72180:(Oe,p,F)=>{"use strict";p.gi=p.Au=p.KS=p.kz=void 0;const oe=F(52632),be=F(91897);function ge(b){const N=new Float64Array(16);if(b)for(let A=0;A<b.length;A++)N[A]=b[A];return N}p.kz=32,p.KS=32;const G=new Uint8Array(32);G[0]=9;const pe=ge([56129,1]);function K(b){let N=1;for(let A=0;A<16;A++){let a=b[A]+N+65535;N=Math.floor(a/65536),b[A]=a-65536*N}b[0]+=N-1+37*(N-1)}function $(b,N,A){const a=~(A-1);for(let u=0;u<16;u++){const m=a&(b[u]^N[u]);b[u]^=m,N[u]^=m}}function W(b,N,A){for(let a=0;a<16;a++)b[a]=N[a]+A[a]}function fe(b,N,A){for(let a=0;a<16;a++)b[a]=N[a]-A[a]}function se(b,N,A){let a,u,m=0,g=0,x=0,T=0,_=0,I=0,R=0,j=0,v=0,V=0,de=0,q=0,Se=0,ve=0,Ee=0,Ie=0,Ce=0,Ae=0,ae=0,le=0,k=0,h=0,H=0,De=0,Te=0,Ve=0,ct=0,ke=0,ut=0,St=0,Rt=0,nt=A[0],et=A[1],Ge=A[2],qe=A[3],Be=A[4],Fe=A[5],Me=A[6],He=A[7],je=A[8],tt=A[9],rt=A[10],ot=A[11],at=A[12],st=A[13],ft=A[14],dt=A[15];a=N[0],m+=a*nt,g+=a*et,x+=a*Ge,T+=a*qe,_+=a*Be,I+=a*Fe,R+=a*Me,j+=a*He,v+=a*je,V+=a*tt,de+=a*rt,q+=a*ot,Se+=a*at,ve+=a*st,Ee+=a*ft,Ie+=a*dt,a=N[1],g+=a*nt,x+=a*et,T+=a*Ge,_+=a*qe,I+=a*Be,R+=a*Fe,j+=a*Me,v+=a*He,V+=a*je,de+=a*tt,q+=a*rt,Se+=a*ot,ve+=a*at,Ee+=a*st,Ie+=a*ft,Ce+=a*dt,a=N[2],x+=a*nt,T+=a*et,_+=a*Ge,I+=a*qe,R+=a*Be,j+=a*Fe,v+=a*Me,V+=a*He,de+=a*je,q+=a*tt,Se+=a*rt,ve+=a*ot,Ee+=a*at,Ie+=a*st,Ce+=a*ft,Ae+=a*dt,a=N[3],T+=a*nt,_+=a*et,I+=a*Ge,R+=a*qe,j+=a*Be,v+=a*Fe,V+=a*Me,de+=a*He,q+=a*je,Se+=a*tt,ve+=a*rt,Ee+=a*ot,Ie+=a*at,Ce+=a*st,Ae+=a*ft,ae+=a*dt,a=N[4],_+=a*nt,I+=a*et,R+=a*Ge,j+=a*qe,v+=a*Be,V+=a*Fe,de+=a*Me,q+=a*He,Se+=a*je,ve+=a*tt,Ee+=a*rt,Ie+=a*ot,Ce+=a*at,Ae+=a*st,ae+=a*ft,le+=a*dt,a=N[5],I+=a*nt,R+=a*et,j+=a*Ge,v+=a*qe,V+=a*Be,de+=a*Fe,q+=a*Me,Se+=a*He,ve+=a*je,Ee+=a*tt,Ie+=a*rt,Ce+=a*ot,Ae+=a*at,ae+=a*st,le+=a*ft,k+=a*dt,a=N[6],R+=a*nt,j+=a*et,v+=a*Ge,V+=a*qe,de+=a*Be,q+=a*Fe,Se+=a*Me,ve+=a*He,Ee+=a*je,Ie+=a*tt,Ce+=a*rt,Ae+=a*ot,ae+=a*at,le+=a*st,k+=a*ft,h+=a*dt,a=N[7],j+=a*nt,v+=a*et,V+=a*Ge,de+=a*qe,q+=a*Be,Se+=a*Fe,ve+=a*Me,Ee+=a*He,Ie+=a*je,Ce+=a*tt,Ae+=a*rt,ae+=a*ot,le+=a*at,k+=a*st,h+=a*ft,H+=a*dt,a=N[8],v+=a*nt,V+=a*et,de+=a*Ge,q+=a*qe,Se+=a*Be,ve+=a*Fe,Ee+=a*Me,Ie+=a*He,Ce+=a*je,Ae+=a*tt,ae+=a*rt,le+=a*ot,k+=a*at,h+=a*st,H+=a*ft,De+=a*dt,a=N[9],V+=a*nt,de+=a*et,q+=a*Ge,Se+=a*qe,ve+=a*Be,Ee+=a*Fe,Ie+=a*Me,Ce+=a*He,Ae+=a*je,ae+=a*tt,le+=a*rt,k+=a*ot,h+=a*at,H+=a*st,De+=a*ft,Te+=a*dt,a=N[10],de+=a*nt,q+=a*et,Se+=a*Ge,ve+=a*qe,Ee+=a*Be,Ie+=a*Fe,Ce+=a*Me,Ae+=a*He,ae+=a*je,le+=a*tt,k+=a*rt,h+=a*ot,H+=a*at,De+=a*st,Te+=a*ft,Ve+=a*dt,a=N[11],q+=a*nt,Se+=a*et,ve+=a*Ge,Ee+=a*qe,Ie+=a*Be,Ce+=a*Fe,Ae+=a*Me,ae+=a*He,le+=a*je,k+=a*tt,h+=a*rt,H+=a*ot,De+=a*at,Te+=a*st,Ve+=a*ft,ct+=a*dt,a=N[12],Se+=a*nt,ve+=a*et,Ee+=a*Ge,Ie+=a*qe,Ce+=a*Be,Ae+=a*Fe,ae+=a*Me,le+=a*He,k+=a*je,h+=a*tt,H+=a*rt,De+=a*ot,Te+=a*at,Ve+=a*st,ct+=a*ft,ke+=a*dt,a=N[13],ve+=a*nt,Ee+=a*et,Ie+=a*Ge,Ce+=a*qe,Ae+=a*Be,ae+=a*Fe,le+=a*Me,k+=a*He,h+=a*je,H+=a*tt,De+=a*rt,Te+=a*ot,Ve+=a*at,ct+=a*st,ke+=a*ft,ut+=a*dt,a=N[14],Ee+=a*nt,Ie+=a*et,Ce+=a*Ge,Ae+=a*qe,ae+=a*Be,le+=a*Fe,k+=a*Me,h+=a*He,H+=a*je,De+=a*tt,Te+=a*rt,Ve+=a*ot,ct+=a*at,ke+=a*st,ut+=a*ft,St+=a*dt,a=N[15],Ie+=a*nt,Ce+=a*et,Ae+=a*Ge,ae+=a*qe,le+=a*Be,k+=a*Fe,h+=a*Me,H+=a*He,De+=a*je,Te+=a*tt,Ve+=a*rt,ct+=a*ot,ke+=a*at,ut+=a*st,St+=a*ft,Rt+=a*dt,m+=38*Ce,g+=38*Ae,x+=38*ae,T+=38*le,_+=38*k,I+=38*h,R+=38*H,j+=38*De,v+=38*Te,V+=38*Ve,de+=38*ct,q+=38*ke,Se+=38*ut,ve+=38*St,Ee+=38*Rt,u=1,a=m+u+65535,u=Math.floor(a/65536),m=a-65536*u,a=g+u+65535,u=Math.floor(a/65536),g=a-65536*u,a=x+u+65535,u=Math.floor(a/65536),x=a-65536*u,a=T+u+65535,u=Math.floor(a/65536),T=a-65536*u,a=_+u+65535,u=Math.floor(a/65536),_=a-65536*u,a=I+u+65535,u=Math.floor(a/65536),I=a-65536*u,a=R+u+65535,u=Math.floor(a/65536),R=a-65536*u,a=j+u+65535,u=Math.floor(a/65536),j=a-65536*u,a=v+u+65535,u=Math.floor(a/65536),v=a-65536*u,a=V+u+65535,u=Math.floor(a/65536),V=a-65536*u,a=de+u+65535,u=Math.floor(a/65536),de=a-65536*u,a=q+u+65535,u=Math.floor(a/65536),q=a-65536*u,a=Se+u+65535,u=Math.floor(a/65536),Se=a-65536*u,a=ve+u+65535,u=Math.floor(a/65536),ve=a-65536*u,a=Ee+u+65535,u=Math.floor(a/65536),Ee=a-65536*u,a=Ie+u+65535,u=Math.floor(a/65536),Ie=a-65536*u,m+=u-1+37*(u-1),u=1,a=m+u+65535,u=Math.floor(a/65536),m=a-65536*u,a=g+u+65535,u=Math.floor(a/65536),g=a-65536*u,a=x+u+65535,u=Math.floor(a/65536),x=a-65536*u,a=T+u+65535,u=Math.floor(a/65536),T=a-65536*u,a=_+u+65535,u=Math.floor(a/65536),_=a-65536*u,a=I+u+65535,u=Math.floor(a/65536),I=a-65536*u,a=R+u+65535,u=Math.floor(a/65536),R=a-65536*u,a=j+u+65535,u=Math.floor(a/65536),j=a-65536*u,a=v+u+65535,u=Math.floor(a/65536),v=a-65536*u,a=V+u+65535,u=Math.floor(a/65536),V=a-65536*u,a=de+u+65535,u=Math.floor(a/65536),de=a-65536*u,a=q+u+65535,u=Math.floor(a/65536),q=a-65536*u,a=Se+u+65535,u=Math.floor(a/65536),Se=a-65536*u,a=ve+u+65535,u=Math.floor(a/65536),ve=a-65536*u,a=Ee+u+65535,u=Math.floor(a/65536),Ee=a-65536*u,a=Ie+u+65535,u=Math.floor(a/65536),Ie=a-65536*u,m+=u-1+37*(u-1),b[0]=m,b[1]=g,b[2]=x,b[3]=T,b[4]=_,b[5]=I,b[6]=R,b[7]=j,b[8]=v,b[9]=V,b[10]=de,b[11]=q,b[12]=Se,b[13]=ve,b[14]=Ee,b[15]=Ie}function ue(b,N){se(b,N,N)}function ye(b,N){const A=new Uint8Array(32),a=new Float64Array(80),u=ge(),m=ge(),g=ge(),x=ge(),T=ge(),_=ge();for(let v=0;v<31;v++)A[v]=b[v];A[31]=127&b[31]|64,A[0]&=248,function(b,N){for(let A=0;A<16;A++)b[A]=N[2*A]+(N[2*A+1]<<8);b[15]&=32767}(a,N);for(let v=0;v<16;v++)m[v]=a[v];u[0]=x[0]=1;for(let v=254;v>=0;--v){const V=A[v>>>3]>>>(7&v)&1;$(u,m,V),$(g,x,V),W(T,u,g),fe(u,u,g),W(g,m,x),fe(m,m,x),ue(x,T),ue(_,u),se(u,g,u),se(g,m,T),W(T,u,g),fe(u,u,g),ue(m,u),fe(g,x,_),se(u,g,pe),W(u,u,x),se(g,g,u),se(u,x,_),se(x,m,a),ue(m,T),$(u,m,V),$(g,x,V)}for(let v=0;v<16;v++)a[v+16]=u[v],a[v+32]=g[v],a[v+48]=m[v],a[v+64]=x[v];const I=a.subarray(32),R=a.subarray(16);(function(b,N){const A=ge();for(let a=0;a<16;a++)A[a]=N[a];for(let a=253;a>=0;a--)ue(A,A),2!==a&&4!==a&&se(A,A,N);for(let a=0;a<16;a++)b[a]=A[a]})(I,I),se(R,R,I);const j=new Uint8Array(32);return function(b,N){const A=ge(),a=ge();for(let u=0;u<16;u++)a[u]=N[u];K(a),K(a),K(a);for(let u=0;u<2;u++){A[0]=a[0]-65517;for(let g=1;g<15;g++)A[g]=a[g]-65535-(A[g-1]>>16&1),A[g-1]&=65535;A[15]=a[15]-32767-(A[14]>>16&1);const m=A[15]>>16&1;A[14]&=65535,$(a,A,1-m)}for(let u=0;u<16;u++)b[2*u]=255&a[u],b[2*u+1]=a[u]>>8}(j,R),j}function me(b){return ye(b,G)}p.Au=function(b){const N=(0,oe.randomBytes)(32,b),A=function(b){if(b.length!==p.KS)throw new Error(`x25519: seed must be ${p.KS} bytes`);const N=new Uint8Array(b);return{publicKey:me(N),secretKey:N}}(N);return(0,be.wipe)(N),A},p.gi=function(b,N,A=!1){if(b.length!==p.kz)throw new Error("X25519: incorrect secret key length");if(N.length!==p.kz)throw new Error("X25519: incorrect public key length");const a=ye(b,N);if(A){let u=0;for(let m=0;m<a.length;m++)u|=a[m];if(0===u)throw new Error("X25519: invalid shared key")}return a}},87125:(Oe,p,F)=>{"use strict";F.r(p),F.d(p,{EthereumProvider:()=>O_,OPTIONAL_EVENTS:()=>m_,OPTIONAL_METHODS:()=>y_,REQUIRED_EVENTS:()=>fi,REQUIRED_METHODS:()=>li,default:()=>di});var M={};F.r(M),F.d(M,{identity:()=>De});var oe={};F.r(oe),F.d(oe,{base2:()=>Te});var be={};F.r(be),F.d(be,{base8:()=>Ve});var ge={};F.r(ge),F.d(ge,{base10:()=>ct});var G={};F.r(G),F.d(G,{base16:()=>ke,base16upper:()=>ut});var pe={};F.r(pe),F.d(pe,{base32:()=>St,base32hex:()=>Ge,base32hexpad:()=>Be,base32hexpadupper:()=>Fe,base32hexupper:()=>qe,base32pad:()=>nt,base32padupper:()=>et,base32upper:()=>Rt,base32z:()=>Me});var K={};F.r(K),F.d(K,{base36:()=>He,base36upper:()=>je});var $={};F.r($),F.d($,{base58btc:()=>tt,base58flickr:()=>rt});var L={};F.r(L),F.d(L,{base64:()=>ot,base64pad:()=>at,base64url:()=>st,base64urlpad:()=>ft});var C={};F.r(C),F.d(C,{base256emoji:()=>Rn});var W={};F.r(W),F.d(W,{sha256:()=>gi,sha512:()=>Dn});var fe={};F.r(fe),F.d(fe,{identity:()=>mi});var se={};F.r(se),F.d(se,{code:()=>nr,decode:()=>Bn,encode:()=>vi,name:()=>bi});var ue={};F.r(ue),F.d(ue,{code:()=>Ei,decode:()=>Di,encode:()=>Si,name:()=>wi});var w=F(8239),ye=F(93105),me=F.n(ye),y=F(91573),O=F(37651),E=F(52632),b=F(41027),N=F(72180);function A(n){return null!=globalThis.Buffer?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function u(n=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?A(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function m(n,e){e||(e=n.reduce((s,o)=>s+o.length,0));const t=u(e);let r=0;for(const s of n)t.set(s,r),r+=s.length;return A(t)}const V=(new Uint8Array(0),n=>{if(n instanceof Uint8Array&&"Uint8Array"===n.constructor.name)return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")});class ve{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Ee{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return Ce(this,e)}}class Ie{constructor(e){this.decoders=e}or(e){return Ce(this,e)}decode(e){const r=this.decoders[e[0]];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Ce=(n,e)=>new Ie({...n.decoders||{[n.prefix]:n},...e.decoders||{[e.prefix]:e}});class Ae{constructor(e,t,r,s){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=s,this.encoder=new ve(e,t,r),this.decoder=new Ee(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const ae=({name:n,prefix:e,encode:t,decode:r})=>new Ae(n,e,t,r),le=({prefix:n,name:e,alphabet:t})=>{const{encode:r,decode:s}=function(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var s=0;s<n.length;s++){var o=n.charAt(s),d=o.charCodeAt(0);if(255!==t[d])throw new TypeError(o+" is ambiguous");t[d]=s}var S=n.length,B=n.charAt(0),ce=Math.log(S)/Math.log(256),_e=Math.log(256)/Math.log(S);function ze(Pe){if("string"!=typeof Pe)throw new TypeError("Expected String");if(0===Pe.length)return new Uint8Array;var Ke=0;if(" "!==Pe[Ke]){for(var yt=0,lt=0;Pe[Ke]===B;)yt++,Ke++;for(var wt=(Pe.length-Ke)*ce+1>>>0,bt=new Uint8Array(wt);Pe[Ke];){var ht=t[Pe.charCodeAt(Ke)];if(255===ht)return;for(var pt=0,Et=wt-1;(0!==ht||pt<lt)&&-1!==Et;Et--,pt++)bt[Et]=(ht+=S*bt[Et]>>>0)%256>>>0,ht=ht/256>>>0;if(0!==ht)throw new Error("Non-zero carry");lt=pt,Ke++}if(" "!==Pe[Ke]){for(var it=wt-lt;it!==wt&&0===bt[it];)it++;for(var Tt=new Uint8Array(yt+(wt-it)),Tn=yt;it!==wt;)Tt[Tn++]=bt[it++];return Tt}}}return{encode:function(Pe){if(Pe instanceof Uint8Array||(ArrayBuffer.isView(Pe)?Pe=new Uint8Array(Pe.buffer,Pe.byteOffset,Pe.byteLength):Array.isArray(Pe)&&(Pe=Uint8Array.from(Pe))),!(Pe instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===Pe.length)return"";for(var Ke=0,yt=0,lt=0,wt=Pe.length;lt!==wt&&0===Pe[lt];)lt++,Ke++;for(var bt=(wt-lt)*_e+1>>>0,ht=new Uint8Array(bt);lt!==wt;){for(var pt=Pe[lt],Et=0,it=bt-1;(0!==pt||Et<yt)&&-1!==it;it--,Et++)ht[it]=(pt+=256*ht[it]>>>0)%S>>>0,pt=pt/S>>>0;if(0!==pt)throw new Error("Non-zero carry");yt=Et,lt++}for(var Tt=bt-yt;Tt!==bt&&0===ht[Tt];)Tt++;for(var Tn=B.repeat(Ke);Tt<bt;++Tt)Tn+=n.charAt(ht[Tt]);return Tn},decodeUnsafe:ze,decode:function(Pe){var Ke=ze(Pe);if(Ke)return Ke;throw new Error(`Non-${e} character`)}}}(t,e);return ae({prefix:n,name:e,encode:r,decode:o=>V(s(o))})},H=({name:n,prefix:e,bitsPerChar:t,alphabet:r})=>ae({prefix:e,name:n,encode:s=>((n,e,t)=>{const r="="===e[e.length-1],s=(1<<t)-1;let o="",d=0,S=0;for(let B=0;B<n.length;++B)for(S=S<<8|n[B],d+=8;d>t;)d-=t,o+=e[s&S>>d];if(d&&(o+=e[s&S<<t-d]),r)for(;o.length*t&7;)o+="=";return o})(s,r,t),decode:s=>((n,e,t,r)=>{const s={};for(let _e=0;_e<e.length;++_e)s[e[_e]]=_e;let o=n.length;for(;"="===n[o-1];)--o;const d=new Uint8Array(o*t/8|0);let S=0,B=0,ce=0;for(let _e=0;_e<o;++_e){const he=s[n[_e]];if(void 0===he)throw new SyntaxError(`Non-${r} character`);B=B<<t|he,S+=t,S>=8&&(S-=8,d[ce++]=255&B>>S)}if(S>=t||255&B<<8-S)throw new SyntaxError("Unexpected end of data");return d})(s,r,t,n)}),De=ae({prefix:"\0",name:"identity",encode:n=>(n=>(new TextDecoder).decode(n))(n),decode:n=>(n=>(new TextEncoder).encode(n))(n)}),Te=H({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Ve=H({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),ct=le({prefix:"9",name:"base10",alphabet:"0123456789"}),ke=H({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),ut=H({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),St=H({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Rt=H({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),nt=H({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),et=H({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Ge=H({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),qe=H({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Be=H({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Fe=H({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Me=H({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),He=le({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),je=le({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),tt=le({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),rt=le({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),ot=H({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),at=H({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),st=H({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),ft=H({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),dt=Array.from("\u{1f680}\u{1fa90}\u2604\u{1f6f0}\u{1f30c}\u{1f311}\u{1f312}\u{1f313}\u{1f314}\u{1f315}\u{1f316}\u{1f317}\u{1f318}\u{1f30d}\u{1f30f}\u{1f30e}\u{1f409}\u2600\u{1f4bb}\u{1f5a5}\u{1f4be}\u{1f4bf}\u{1f602}\u2764\u{1f60d}\u{1f923}\u{1f60a}\u{1f64f}\u{1f495}\u{1f62d}\u{1f618}\u{1f44d}\u{1f605}\u{1f44f}\u{1f601}\u{1f525}\u{1f970}\u{1f494}\u{1f496}\u{1f499}\u{1f622}\u{1f914}\u{1f606}\u{1f644}\u{1f4aa}\u{1f609}\u263a\u{1f44c}\u{1f917}\u{1f49c}\u{1f614}\u{1f60e}\u{1f607}\u{1f339}\u{1f926}\u{1f389}\u{1f49e}\u270c\u2728\u{1f937}\u{1f631}\u{1f60c}\u{1f338}\u{1f64c}\u{1f60b}\u{1f497}\u{1f49a}\u{1f60f}\u{1f49b}\u{1f642}\u{1f493}\u{1f929}\u{1f604}\u{1f600}\u{1f5a4}\u{1f603}\u{1f4af}\u{1f648}\u{1f447}\u{1f3b6}\u{1f612}\u{1f92d}\u2763\u{1f61c}\u{1f48b}\u{1f440}\u{1f62a}\u{1f611}\u{1f4a5}\u{1f64b}\u{1f61e}\u{1f629}\u{1f621}\u{1f92a}\u{1f44a}\u{1f973}\u{1f625}\u{1f924}\u{1f449}\u{1f483}\u{1f633}\u270b\u{1f61a}\u{1f61d}\u{1f634}\u{1f31f}\u{1f62c}\u{1f643}\u{1f340}\u{1f337}\u{1f63b}\u{1f613}\u2b50\u2705\u{1f97a}\u{1f308}\u{1f608}\u{1f918}\u{1f4a6}\u2714\u{1f623}\u{1f3c3}\u{1f490}\u2639\u{1f38a}\u{1f498}\u{1f620}\u261d\u{1f615}\u{1f33a}\u{1f382}\u{1f33b}\u{1f610}\u{1f595}\u{1f49d}\u{1f64a}\u{1f639}\u{1f5e3}\u{1f4ab}\u{1f480}\u{1f451}\u{1f3b5}\u{1f91e}\u{1f61b}\u{1f534}\u{1f624}\u{1f33c}\u{1f62b}\u26bd\u{1f919}\u2615\u{1f3c6}\u{1f92b}\u{1f448}\u{1f62e}\u{1f646}\u{1f37b}\u{1f343}\u{1f436}\u{1f481}\u{1f632}\u{1f33f}\u{1f9e1}\u{1f381}\u26a1\u{1f31e}\u{1f388}\u274c\u270a\u{1f44b}\u{1f630}\u{1f928}\u{1f636}\u{1f91d}\u{1f6b6}\u{1f4b0}\u{1f353}\u{1f4a2}\u{1f91f}\u{1f641}\u{1f6a8}\u{1f4a8}\u{1f92c}\u2708\u{1f380}\u{1f37a}\u{1f913}\u{1f619}\u{1f49f}\u{1f331}\u{1f616}\u{1f476}\u{1f974}\u25b6\u27a1\u2753\u{1f48e}\u{1f4b8}\u2b07\u{1f628}\u{1f31a}\u{1f98b}\u{1f637}\u{1f57a}\u26a0\u{1f645}\u{1f61f}\u{1f635}\u{1f44e}\u{1f932}\u{1f920}\u{1f927}\u{1f4cc}\u{1f535}\u{1f485}\u{1f9d0}\u{1f43e}\u{1f352}\u{1f617}\u{1f911}\u{1f30a}\u{1f92f}\u{1f437}\u260e\u{1f4a7}\u{1f62f}\u{1f486}\u{1f446}\u{1f3a4}\u{1f647}\u{1f351}\u2744\u{1f334}\u{1f4a3}\u{1f438}\u{1f48c}\u{1f4cd}\u{1f940}\u{1f922}\u{1f445}\u{1f4a1}\u{1f4a9}\u{1f450}\u{1f4f8}\u{1f47b}\u{1f910}\u{1f92e}\u{1f3bc}\u{1f975}\u{1f6a9}\u{1f34e}\u{1f34a}\u{1f47c}\u{1f48d}\u{1f4e3}\u{1f942}"),hn=dt.reduce((n,e,t)=>(n[t]=e,n),[]),Jt=dt.reduce((n,e,t)=>(n[e.codePointAt(0)]=t,n),[]),Rn=ae({prefix:"\u{1f680}",name:"base256emoji",encode:function(n){return n.reduce((e,t)=>e+hn[t],"")},decode:function(n){const e=[];for(const t of n){const r=Jt[t.codePointAt(0)];if(void 0===r)throw new Error(`Non-base256emoji character: ${t}`);e.push(r)}return new Uint8Array(e)}});var Nt=Math.pow(2,31),$t=Math.pow(2,7),jt=Math.pow(2,14),At=Math.pow(2,21),mt=Math.pow(2,28),Ht=Math.pow(2,35),zt=Math.pow(2,42),Bt=Math.pow(2,49),Kt=Math.pow(2,56),hi=Math.pow(2,63);const Pr_encode=function vt(n,e,t){e=e||[];for(var r=t=t||0;n>=Nt;)e[t++]=255&n|128,n/=128;for(;-128&n;)e[t++]=255&n|128,n>>>=7;return e[t]=0|n,vt.bytes=t-r+1,e},Pr_encodingLength=function(n){return n<$t?1:n<jt?2:n<At?3:n<mt?4:n<Ht?5:n<zt?6:n<Bt?7:n<Kt?8:n<hi?9:10},Nr=(n,e,t=0)=>(Pr_encode(n,e,t),e),Sn=n=>Pr_encodingLength(n),fr=(n,e)=>{const t=e.byteLength,r=Sn(n),s=r+Sn(t),o=new Uint8Array(s+t);return Nr(n,o,0),Nr(t,o,r),o.set(e,s),new Cr(n,t,e,o)};class Cr{constructor(e,t,r,s){this.code=e,this.size=t,this.digest=r,this.bytes=s}}const Ar=({name:n,code:e,encode:t})=>new tr(n,e,t);class tr{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?fr(this.code,t):t.then(r=>fr(this.code,r))}throw Error("Unknown type, must be binary type")}}const Tr=n=>function(){var e=(0,w.Z)(function*(t){return new Uint8Array(yield crypto.subtle.digest(n,t))});return function(t){return e.apply(this,arguments)}}(),gi=Ar({name:"sha2-256",code:18,encode:Tr("SHA-256")}),Dn=Ar({name:"sha2-512",code:19,encode:Tr("SHA-512")}),Ur=V,mi={code:0,name:"identity",encode:Ur,digest:n=>fr(0,Ur(n))},bi="raw",nr=85,vi=n=>V(n),Bn=n=>V(n),jr=new TextEncoder,Fr=new TextDecoder,wi="json",Ei=512,Si=n=>jr.encode(JSON.stringify(n)),Di=n=>JSON.parse(Fr.decode(n));Symbol,Symbol.for("nodejs.util.inspect.custom"),Symbol.for("@ipld/js-cid/CID");const Hr={...M,...oe,...be,...ge,...G,...pe,...K,...$,...L,...C};function zr(n,e,t,r){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:t},decoder:{decode:r}}}const Kn=zr("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>(new TextEncoder).encode(n.substring(1))),dr=zr("ascii","a",n=>{let e="a";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return e},n=>{const e=u((n=n.substring(1)).length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e}),Kr={utf8:Kn,"utf-8":Kn,hex:Hr.base16,latin1:dr,ascii:dr,binary:dr,...Hr};function Yt(n,e="utf8"){const t=Kr[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return"utf8"!==e&&"utf-8"!==e||null==globalThis.Buffer||null==globalThis.Buffer.from?t.decoder.decode(`${t.prefix}${n}`):A(globalThis.Buffer.from(n,"utf-8"))}function Xt(n,e="utf8"){const t=Kr[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return"utf8"!==e&&"utf-8"!==e||null==globalThis.Buffer||null==globalThis.Buffer.from?t.encoder.encode(n).substring(1):globalThis.Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString("utf8")}var Ue=F(14611);F(63581),F(38541),F(32257),F(45785);const Ti={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}},Ic={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}};function Gn(n,e){return!!Array.isArray(n)&&(!(typeof e<"u"&&n.length)||n.every(e))}var $c=F(22694),qr=F.n($c),Hc=F(3226),Gr=F(38960),_t=F(66486),or=F(52399);class zc extends or.q{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}class Bc extends or.q{constructor(e,t){super(),this.core=e,this.logger=t,this.records=new Map}}class Vc extends or.q{constructor(e,t){super(),this.relayer=e,this.logger=t}}class Zc extends or.q{constructor(e){super()}}class Gc extends or.q{constructor(e,t){super(),this.relayer=e,this.logger=t}}class Wc extends or.q{constructor(e,t){super(),this.core=e,this.logger=t}}var Ys=F(47903);const Qs="base64url",ou="did",au="key",eo="base58btc";function kr(n){return Xt(Yt(function(n){return"string"==typeof n?n:(n=>JSON.stringify(n,(e,t)=>"bigint"==typeof t?t.toString()+"n":t))(n)||""}(n),"utf8"),Qs)}function to(n){const t="z"+Xt(m([Yt("K36",eo),n]),eo);return[ou,au,t].join(":")}function pu(n){return Xt(n,Qs)}function gu(n){return Yt([kr(n.header),kr(n.payload)].join("."),"utf8")}function yu(n){return[kr(n.header),kr(n.payload),pu(n.signature)].join(".")}function no(n=(0,E.randomBytes)(32)){return Ys._w(n)}function Hi(){return(Hi=(0,w.Z)(function*(n,e,t,r,s=(0,Ue.fromMiliseconds)(Date.now())){const o={alg:"EdDSA",typ:"JWT"},B={iss:to(r.publicKey),sub:n,aud:e,iat:s,exp:s+t},ce=gu({header:o,payload:B});return yu({header:o,payload:B,signature:Ys.Xx(r.secretKey,ce)})})).apply(this,arguments)}F(58083);var ro=function(n,e,t){if(t||2===arguments.length)for(var o,r=0,s=e.length;r<s;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))},bu=function(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"},vu=function(e){this.version=e,this.type="node",this.name="node",this.os=process.platform},wu=function(e,t,r,s){this.name=e,this.version=t,this.os=r,this.bot=s,this.type="bot-device"},Eu=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},Su=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},Ou=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,xu=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],so=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function ao(n){var e=function(n){return""!==n&&xu.reduce(function(e,t){var r=t[0];if(e)return e;var o=t[1].exec(n);return!!o&&[r,o]},!1)}(n);if(!e)return null;var t=e[0],r=e[1];if("searchbot"===t)return new Eu;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<3&&(s=ro(ro([],s,!0),function(n){for(var e=[],t=0;t<n;t++)e.push("0");return e}(3-s.length),!0)):s=[];var o=s.join("."),d=function(n){for(var e=0,t=so.length;e<t;e++){var r=so[e],s=r[0];if(r[1].exec(n))return s}return null}(n),S=Ou.exec(n);return S&&S[1]?new wu(t,o,d,S[1]):new bu(t,o,d)}var Jr=F(45418),Au=F(31846),Yr=F(34955);function Bi(n,e){return n.includes(":")?[n]:e.chains||[]}const an="base16",Vi="base64pad",Zi="utf8";function Wi(){return Xt((0,E.randomBytes)(32),an)}function Qr(n){return Xt((0,b.vp)(Yt(n,Zi)),an)}function gr(n){return Number(Xt(n,"base10"))}function ki(n){const e=Yt(n,Vi),t=e.slice(0,1);if(1===gr(t)){const S=33,B=S+12,ce=e.slice(1,S),_e=e.slice(S,B);return{type:t,sealed:e.slice(B),iv:_e,senderPublicKey:ce}}const o=e.slice(1,13);return{type:t,sealed:e.slice(13),iv:o}}function po(n){const e=n?.type||0;if(1===e){if(typeof n?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof n?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:n?.senderPublicKey,receiverPublicKey:n?.receiverPublicKey}}function _o(n){return 1===n.type&&"string"==typeof n.senderPublicKey&&"string"==typeof n.receiverPublicKey}var ku=Object.defineProperty,go=Object.getOwnPropertySymbols,Ju=Object.prototype.hasOwnProperty,Yu=Object.prototype.propertyIsEnumerable,yo=(n,e,t)=>e in n?ku(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,mo=(n,e)=>{for(var t in e||(e={}))Ju.call(e,t)&&yo(n,t,e[t]);if(go)for(var t of go(e))Yu.call(e,t)&&yo(n,t,e[t]);return n};const el="js";function vo(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function al(n,e,t){const r=function(){const n=function(n){return n?ao(n):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new Su:"undefined"!=typeof navigator?ao(navigator.userAgent):"undefined"!=typeof process&&process.version?new vu(process.version.slice(1)):null}();if(null===n)return"unknown";const e=n.os?n.os.replace(" ","").toLowerCase():"unknown";return"browser"===n.type?[e,n.name,n.version].join("-"):[e,n.version].join("-")}(),s=function(){var n;const e=!(0,Jr.getDocument)()&&(0,Jr.getNavigator)()&&"ReactNative"===navigator.product?"react-native":vo()?"node":!vo()&&(0,Jr.getNavigator)()?"browser":"unknown";return"browser"===e?[e,(null==(n=(0,Jr.getLocation)())?void 0:n.host)||"unknown"].join(":"):e}();return[[n,e].join("-"),[el,t].join("-"),r,s].join("/")}function Jn(n,e){return n.filter(t=>e.includes(t)).length===n.length}function Eo(n){return Object.fromEntries(n.entries())}function So(n){return new Map(Object.entries(n))}function Yn(n=Ue.FIVE_MINUTES,e){const t=(0,Ue.toMiliseconds)(n||Ue.FIVE_MINUTES);let r,s,o;return{resolve:d=>{o&&r&&(clearTimeout(o),r(d))},reject:d=>{o&&s&&(clearTimeout(o),s(d))},done:()=>new Promise((d,S)=>{o=setTimeout(()=>{S(new Error(e))},t),r=d,s=S})}}function ei(n,e,t){return new Promise(function(){var r=(0,w.Z)(function*(s,o){const d=setTimeout(()=>o(new Error(t)),e);try{s(yield n)}catch(S){o(S)}clearTimeout(d)});return function(s,o){return r.apply(this,arguments)}}())}function Do(n,e){if("string"==typeof e&&e.startsWith(`${n}:`))return e;if("topic"===n.toLowerCase()){if("string"!=typeof e)throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}if("id"===n.toLowerCase()){if("number"!=typeof e)throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${n}`)}function Oo(n){const[e,t]=n.split(":"),r={id:void 0,topic:void 0};if("topic"===e&&"string"==typeof t)r.topic=t;else{if("id"!==e||!Number.isInteger(Number(t)))throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${t}`);r.id=Number(t)}return r}function xn(n,e){return(0,Ue.fromMiliseconds)((e||Date.now())+(0,Ue.toMiliseconds)(n))}function Mn(n){return Date.now()>=(0,Ue.toMiliseconds)(n)}function Ft(n,e){return`${n}${e?`:${e}`:""}`}function Yi(n){return n?.relay||{protocol:"irn"}}function ti(n){const e=Ti[n];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${n}`);return e}var _l=Object.defineProperty,xo=Object.getOwnPropertySymbols,gl=Object.prototype.hasOwnProperty,yl=Object.prototype.propertyIsEnumerable,Io=(n,e,t)=>e in n?_l(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;function bl(n,e="-"){const t={},r="relay"+e;return Object.keys(n).forEach(s=>{if(s.startsWith(r)){const o=s.replace(r,"");t[o]=n[s]}}),t}function ar(n){const e=[];return n.forEach(t=>{const[r,s]=t.split(":");e.push(`${r}:${s}`)}),e}const Il={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Pl={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function xe(n,e){const{message:t,code:r}=Pl[n];return{message:e?`${t} ${e}`:t,code:r}}function Gt(n,e){const{message:t,code:r}=Il[n];return{message:e?`${t} ${e}`:t,code:r}}function mr(n,e){return!!Array.isArray(n)&&(!(typeof e<"u"&&n.length)||n.every(e))}function br(n){return Object.getPrototypeOf(n)===Object.prototype&&Object.keys(n).length}function sn(n){return typeof n>"u"}function Wt(n,e){return!(!e||!sn(n))||"string"==typeof n&&Boolean(n.trim().length)}function Xi(n,e){return!(!e||!sn(n))||"number"==typeof n&&!isNaN(n)}function Qi(n){return!(!Wt(n,!1)||!n.includes(":"))&&2===n.split(":").length}function Po(n){let e=!0;return mr(n)?n.length&&(e=n.every(t=>Wt(t,!1))):e=!1,e}function No(n,e){let t=null;return Object.values(n).forEach(r=>{if(t)return;const s=function(n,e){let t=null;return Po(n?.methods)?Po(n?.events)||(t=Gt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):t=Gt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),t}(r,`${e}, namespace`);s&&(t=s)}),t}function ni(n,e){let t=null;if(n&&br(n)){const r=No(n,e);r&&(t=r);const s=function(n,e){let t=null;return Object.values(n).forEach(r=>{if(t)return;const s=function(n,e){let t=null;return mr(n)?n.forEach(r=>{t||function(n){if(Wt(n,!1)&&n.includes(":")){const e=n.split(":");if(3===e.length){const t=e[0]+":"+e[1];return!!e[2]&&Qi(t)}}return!1}(r)||(t=Gt("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):t=Gt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}(r?.accounts,`${e} namespace`);s&&(t=s)}),t}(n,e);s&&(t=s)}else t=xe("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return t}function Co(n){return Wt(n.protocol,!0)}function cn(n){return typeof n<"u"&&null!==typeof n}function Ao(n,e){return!(!Qi(e)||!function(n){const e=[];return Object.values(n).forEach(t=>{e.push(...ar(t.accounts))}),e}(n).includes(e))}function To(n,e,t){let r=null;const s=function(n){const e={};return Object.keys(n).forEach(t=>{var r;t.includes(":")?e[t]=n[t]:null==(r=n[t].chains)||r.forEach(s=>{e[s]={methods:n[t].methods,events:n[t].events}})}),e}(n),o=function(n){const e={};return Object.keys(n).forEach(t=>{t.includes(":")?e[t]=n[t]:ar(n[t].accounts)?.forEach(s=>{e[s]={accounts:n[t].accounts.filter(o=>o.includes(`${s}:`)),methods:n[t].methods,events:n[t].events}})}),e}(e),d=Object.keys(s),S=Object.keys(o),B=Ro(Object.keys(n)),ce=Ro(Object.keys(e)),_e=B.filter(he=>!ce.includes(he));return _e.length&&(r=xe("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.\n      Required: ${_e.toString()}\n      Received: ${Object.keys(e).toString()}`)),Jn(d,S)||(r=xe("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.\n      Required: ${d.toString()}\n      Approved: ${S.toString()}`)),Object.keys(e).forEach(he=>{if(!he.includes(":")||r)return;const ze=ar(e[he].accounts);ze.includes(he)||(r=xe("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${he}\n        Required: ${he}\n        Approved: ${ze.toString()}`))}),d.forEach(he=>{r||(Jn(s[he].methods,o[he].methods)?Jn(s[he].events,o[he].events)||(r=xe("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${he}`)):r=xe("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${he}`))}),r}function Ro(n){return[...new Set(n.map(e=>e.includes(":")?e.split(":")[0]:e))]}var Re=F(22339);class Xl extends Re.IJsonRpcProvider{constructor(e){super(e),this.events=new ye.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}connect(e=this.connection){var t=this;return(0,w.Z)(function*(){yield t.open(e)})()}disconnect(){var e=this;return(0,w.Z)(function*(){yield e.close()})()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}request(e,t){var r=this;return(0,w.Z)(function*(){return r.requestStrict((0,Re.formatJsonRpcRequest)(e.method,e.params||[]),t)})()}requestStrict(e,t){var r=this;return(0,w.Z)(function*(){return new Promise(function(){var s=(0,w.Z)(function*(o,d){if(!r.connection.connected)try{yield r.open()}catch(S){d(S)}r.events.on(`${e.id}`,S=>{(0,Re.isJsonRpcError)(S)?d(S.error):o(S.result)});try{yield r.connection.send(e,t)}catch(S){d(S)}});return function(o,d){return s.apply(this,arguments)}}())})()}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),(0,Re.isJsonRpcResponse)(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&3e3===e.code&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}open(e=this.connection){var t=this;return(0,w.Z)(function*(){t.connection===e&&t.connection.connected||(t.connection.connected&&t.close(),"string"==typeof e&&(yield t.connection.open(e),e=t.connection),t.connection=t.setConnection(e),yield t.connection.open(),t.registerEventListeners(),t.events.emit("connect"))})()}close(){var e=this;return(0,w.Z)(function*(){yield e.connection.close()})()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const of="undefined"!=typeof global&&void 0!==global.WebSocket?global.WebSocket:"undefined"!=typeof window&&void 0!==window.WebSocket?window.WebSocket:F(44813);var uf=F(6856),lf=F.n(uf);const jo=n=>{if(n instanceof Uint8Array&&"Uint8Array"===n.constructor.name)return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")};class gf{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class yf{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return Fo(this,e)}}class mf{constructor(e){this.decoders=e}or(e){return Fo(this,e)}decode(e){const r=this.decoders[e[0]];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Fo=(n,e)=>new mf({...n.decoders||{[n.prefix]:n},...e.decoders||{[e.prefix]:e}});class bf{constructor(e,t,r,s){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=s,this.encoder=new gf(e,t,r),this.decoder=new yf(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const ri=({name:n,prefix:e,encode:t,decode:r})=>new bf(n,e,t,r),vr=({prefix:n,name:e,alphabet:t})=>{const{encode:r,decode:s}=function(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var s=0;s<n.length;s++){var o=n.charAt(s),d=o.charCodeAt(0);if(255!==t[d])throw new TypeError(o+" is ambiguous");t[d]=s}var S=n.length,B=n.charAt(0),ce=Math.log(S)/Math.log(256),_e=Math.log(256)/Math.log(S);function ze(Pe){if("string"!=typeof Pe)throw new TypeError("Expected String");if(0===Pe.length)return new Uint8Array;var Ke=0;if(" "!==Pe[Ke]){for(var yt=0,lt=0;Pe[Ke]===B;)yt++,Ke++;for(var wt=(Pe.length-Ke)*ce+1>>>0,bt=new Uint8Array(wt);Pe[Ke];){var ht=t[Pe.charCodeAt(Ke)];if(255===ht)return;for(var pt=0,Et=wt-1;(0!==ht||pt<lt)&&-1!==Et;Et--,pt++)bt[Et]=(ht+=S*bt[Et]>>>0)%256>>>0,ht=ht/256>>>0;if(0!==ht)throw new Error("Non-zero carry");lt=pt,Ke++}if(" "!==Pe[Ke]){for(var it=wt-lt;it!==wt&&0===bt[it];)it++;for(var Tt=new Uint8Array(yt+(wt-it)),Tn=yt;it!==wt;)Tt[Tn++]=bt[it++];return Tt}}}return{encode:function(Pe){if(Pe instanceof Uint8Array||(ArrayBuffer.isView(Pe)?Pe=new Uint8Array(Pe.buffer,Pe.byteOffset,Pe.byteLength):Array.isArray(Pe)&&(Pe=Uint8Array.from(Pe))),!(Pe instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===Pe.length)return"";for(var Ke=0,yt=0,lt=0,wt=Pe.length;lt!==wt&&0===Pe[lt];)lt++,Ke++;for(var bt=(wt-lt)*_e+1>>>0,ht=new Uint8Array(bt);lt!==wt;){for(var pt=Pe[lt],Et=0,it=bt-1;(0!==pt||Et<yt)&&-1!==it;it--,Et++)ht[it]=(pt+=256*ht[it]>>>0)%S>>>0,pt=pt/S>>>0;if(0!==pt)throw new Error("Non-zero carry");yt=Et,lt++}for(var Tt=bt-yt;Tt!==bt&&0===ht[Tt];)Tt++;for(var Tn=B.repeat(Ke);Tt<bt;++Tt)Tn+=n.charAt(ht[Tt]);return Tn},decodeUnsafe:ze,decode:function(Pe){var Ke=ze(Pe);if(Ke)return Ke;throw new Error(`Non-${e} character`)}}}(t,e);return ri({prefix:n,name:e,encode:r,decode:o=>jo(s(o))})},tn=({name:n,prefix:e,bitsPerChar:t,alphabet:r})=>ri({prefix:e,name:n,encode:s=>((n,e,t)=>{const r="="===e[e.length-1],s=(1<<t)-1;let o="",d=0,S=0;for(let B=0;B<n.length;++B)for(S=S<<8|n[B],d+=8;d>t;)d-=t,o+=e[s&S>>d];if(d&&(o+=e[s&S<<t-d]),r)for(;o.length*t&7;)o+="=";return o})(s,r,t),decode:s=>((n,e,t,r)=>{const s={};for(let _e=0;_e<e.length;++_e)s[e[_e]]=_e;let o=n.length;for(;"="===n[o-1];)--o;const d=new Uint8Array(o*t/8|0);let S=0,B=0,ce=0;for(let _e=0;_e<o;++_e){const he=s[n[_e]];if(void 0===he)throw new SyntaxError(`Non-${r} character`);B=B<<t|he,S+=t,S>=8&&(S-=8,d[ce++]=255&B>>S)}if(S>=t||255&B<<8-S)throw new SyntaxError("Unexpected end of data");return d})(s,r,t,n)}),Ef=ri({prefix:"\0",name:"identity",encode:n=>(n=>(new TextDecoder).decode(n))(n),decode:n=>(n=>(new TextEncoder).encode(n))(n)});var Sf=Object.freeze({__proto__:null,identity:Ef});const Df=tn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Of=Object.freeze({__proto__:null,base2:Df});const xf=tn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var If=Object.freeze({__proto__:null,base8:xf});const Pf=vr({prefix:"9",name:"base10",alphabet:"0123456789"});var Nf=Object.freeze({__proto__:null,base10:Pf});const Cf=tn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Af=tn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Tf=Object.freeze({__proto__:null,base16:Cf,base16upper:Af});const Rf=tn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Uf=tn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),jf=tn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Ff=tn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Lf=tn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Mf=tn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),$f=tn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Hf=tn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),zf=tn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Bf=Object.freeze({__proto__:null,base32:Rf,base32upper:Uf,base32pad:jf,base32padupper:Ff,base32hex:Lf,base32hexupper:Mf,base32hexpad:$f,base32hexpadupper:Hf,base32z:zf});const Kf=vr({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Vf=vr({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Zf=Object.freeze({__proto__:null,base36:Kf,base36upper:Vf});const qf=vr({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Gf=vr({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Wf=Object.freeze({__proto__:null,base58btc:qf,base58flickr:Gf});const kf=tn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Jf=tn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Yf=tn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Xf=tn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Qf=Object.freeze({__proto__:null,base64:kf,base64pad:Jf,base64url:Yf,base64urlpad:Xf});const Lo=Array.from("\u{1f680}\u{1fa90}\u2604\u{1f6f0}\u{1f30c}\u{1f311}\u{1f312}\u{1f313}\u{1f314}\u{1f315}\u{1f316}\u{1f317}\u{1f318}\u{1f30d}\u{1f30f}\u{1f30e}\u{1f409}\u2600\u{1f4bb}\u{1f5a5}\u{1f4be}\u{1f4bf}\u{1f602}\u2764\u{1f60d}\u{1f923}\u{1f60a}\u{1f64f}\u{1f495}\u{1f62d}\u{1f618}\u{1f44d}\u{1f605}\u{1f44f}\u{1f601}\u{1f525}\u{1f970}\u{1f494}\u{1f496}\u{1f499}\u{1f622}\u{1f914}\u{1f606}\u{1f644}\u{1f4aa}\u{1f609}\u263a\u{1f44c}\u{1f917}\u{1f49c}\u{1f614}\u{1f60e}\u{1f607}\u{1f339}\u{1f926}\u{1f389}\u{1f49e}\u270c\u2728\u{1f937}\u{1f631}\u{1f60c}\u{1f338}\u{1f64c}\u{1f60b}\u{1f497}\u{1f49a}\u{1f60f}\u{1f49b}\u{1f642}\u{1f493}\u{1f929}\u{1f604}\u{1f600}\u{1f5a4}\u{1f603}\u{1f4af}\u{1f648}\u{1f447}\u{1f3b6}\u{1f612}\u{1f92d}\u2763\u{1f61c}\u{1f48b}\u{1f440}\u{1f62a}\u{1f611}\u{1f4a5}\u{1f64b}\u{1f61e}\u{1f629}\u{1f621}\u{1f92a}\u{1f44a}\u{1f973}\u{1f625}\u{1f924}\u{1f449}\u{1f483}\u{1f633}\u270b\u{1f61a}\u{1f61d}\u{1f634}\u{1f31f}\u{1f62c}\u{1f643}\u{1f340}\u{1f337}\u{1f63b}\u{1f613}\u2b50\u2705\u{1f97a}\u{1f308}\u{1f608}\u{1f918}\u{1f4a6}\u2714\u{1f623}\u{1f3c3}\u{1f490}\u2639\u{1f38a}\u{1f498}\u{1f620}\u261d\u{1f615}\u{1f33a}\u{1f382}\u{1f33b}\u{1f610}\u{1f595}\u{1f49d}\u{1f64a}\u{1f639}\u{1f5e3}\u{1f4ab}\u{1f480}\u{1f451}\u{1f3b5}\u{1f91e}\u{1f61b}\u{1f534}\u{1f624}\u{1f33c}\u{1f62b}\u26bd\u{1f919}\u2615\u{1f3c6}\u{1f92b}\u{1f448}\u{1f62e}\u{1f646}\u{1f37b}\u{1f343}\u{1f436}\u{1f481}\u{1f632}\u{1f33f}\u{1f9e1}\u{1f381}\u26a1\u{1f31e}\u{1f388}\u274c\u270a\u{1f44b}\u{1f630}\u{1f928}\u{1f636}\u{1f91d}\u{1f6b6}\u{1f4b0}\u{1f353}\u{1f4a2}\u{1f91f}\u{1f641}\u{1f6a8}\u{1f4a8}\u{1f92c}\u2708\u{1f380}\u{1f37a}\u{1f913}\u{1f619}\u{1f49f}\u{1f331}\u{1f616}\u{1f476}\u{1f974}\u25b6\u27a1\u2753\u{1f48e}\u{1f4b8}\u2b07\u{1f628}\u{1f31a}\u{1f98b}\u{1f637}\u{1f57a}\u26a0\u{1f645}\u{1f61f}\u{1f635}\u{1f44e}\u{1f932}\u{1f920}\u{1f927}\u{1f4cc}\u{1f535}\u{1f485}\u{1f9d0}\u{1f43e}\u{1f352}\u{1f617}\u{1f911}\u{1f30a}\u{1f92f}\u{1f437}\u260e\u{1f4a7}\u{1f62f}\u{1f486}\u{1f446}\u{1f3a4}\u{1f647}\u{1f351}\u2744\u{1f334}\u{1f4a3}\u{1f438}\u{1f48c}\u{1f4cd}\u{1f940}\u{1f922}\u{1f445}\u{1f4a1}\u{1f4a9}\u{1f450}\u{1f4f8}\u{1f47b}\u{1f910}\u{1f92e}\u{1f3bc}\u{1f975}\u{1f6a9}\u{1f34e}\u{1f34a}\u{1f47c}\u{1f48d}\u{1f4e3}\u{1f942}"),ed=Lo.reduce((n,e,t)=>(n[t]=e,n),[]),td=Lo.reduce((n,e,t)=>(n[e.codePointAt(0)]=t,n),[]),id=ri({prefix:"\u{1f680}",name:"base256emoji",encode:function(n){return n.reduce((e,t)=>e+ed[t],"")},decode:function(n){const e=[];for(const t of n){const r=td[t.codePointAt(0)];if(void 0===r)throw new Error(`Non-base256emoji character: ${t}`);e.push(r)}return new Uint8Array(e)}});var sd=Object.freeze({__proto__:null,base256emoji:id}),ud=Math.pow(2,31),dd=Math.pow(2,7),hd=Math.pow(2,14),pd=Math.pow(2,21),_d=Math.pow(2,28),gd=Math.pow(2,35),yd=Math.pow(2,42),md=Math.pow(2,49),bd=Math.pow(2,56),vd=Math.pow(2,63),zo_encode=function $o(n,e,t){e=e||[];for(var r=t=t||0;n>=ud;)e[t++]=255&n|128,n/=128;for(;-128&n;)e[t++]=255&n|128,n>>>=7;return e[t]=0|n,$o.bytes=t-r+1,e},zo_encodingLength=function(n){return n<dd?1:n<hd?2:n<pd?3:n<_d?4:n<gd?5:n<yd?6:n<md?7:n<bd?8:n<vd?9:10};const Bo=(n,e,t=0)=>(zo_encode(n,e,t),e),Ko=n=>zo_encodingLength(n),ts=(n,e)=>{const t=e.byteLength,r=Ko(n),s=r+Ko(t),o=new Uint8Array(s+t);return Bo(n,o,0),Bo(t,o,r),o.set(e,s),new Sd(n,t,e,o)};class Sd{constructor(e,t,r,s){this.code=e,this.size=t,this.digest=r,this.bytes=s}}const Vo=({name:n,code:e,encode:t})=>new Dd(n,e,t);class Dd{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?ts(this.code,t):t.then(r=>ts(this.code,r))}throw Error("Unknown type, must be binary type")}}const Zo=n=>function(){var e=(0,w.Z)(function*(t){return new Uint8Array(yield crypto.subtle.digest(n,t))});return function(t){return e.apply(this,arguments)}}(),Od=Vo({name:"sha2-256",code:18,encode:Zo("SHA-256")}),xd=Vo({name:"sha2-512",code:19,encode:Zo("SHA-512")});Object.freeze({__proto__:null,sha256:Od,sha512:xd});const Go=jo;Object.freeze({__proto__:null,identity:{code:0,name:"identity",encode:Go,digest:n=>ts(0,Go(n))}}),new TextEncoder,new TextDecoder;const Wo={...Sf,...Of,...If,...Nf,...Tf,...Bf,...Zf,...Wf,...Qf,...sd};function ko(n,e,t,r){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:t},decoder:{decode:r}}}const Jo=ko("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>(new TextEncoder).encode(n.substring(1))),ns=ko("ascii","a",n=>{let e="a";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return e},n=>{const e=function(n=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(n):new Uint8Array(n)}((n=n.substring(1)).length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e}),Ad={utf8:Jo,"utf-8":Jo,hex:Wo.base16,latin1:ns,ascii:ns,binary:ns,...Wo},$n="wc@2:core:",jd={database:":memory:"},Xo="client_ed25519_seed",Ld=Ue.ONE_DAY,Bd=Ue.SIX_HOURS,ea="wss://relay.walletconnect.com",Gd=Ue.ONE_SECOND,In_created="subscription_created",In_deleted="subscription_deleted",Xd=1e3*Ue.FIVE_SECONDS,wr={wc_pairingDelete:{req:{ttl:Ue.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:Ue.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:Ue.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:Ue.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:Ue.ONE_DAY,prompt:!1,tag:0},res:{ttl:Ue.ONE_DAY,prompt:!1,tag:0}}},gn_expired="expirer_expired";class sh{constructor(e,t){var r=this;this.core=e,this.logger=t,this.keychain=new Map,this.name="keychain",this.version="0.3",this.initialized=!1,this.storagePrefix=$n,this.init=(0,w.Z)(function*(){if(!r.initialized){const s=yield r.getKeyChain();typeof s<"u"&&(r.keychain=s),r.initialized=!0}}),this.has=s=>(this.isInitialized(),this.keychain.has(s)),this.set=function(){var s=(0,w.Z)(function*(o,d){r.isInitialized(),r.keychain.set(o,d),yield r.persist()});return function(o,d){return s.apply(this,arguments)}}(),this.get=s=>{this.isInitialized();const o=this.keychain.get(s);if(typeof o>"u"){const{message:d}=xe("NO_MATCHING_KEY",`${this.name}: ${s}`);throw new Error(d)}return o},this.del=function(){var s=(0,w.Z)(function*(o){r.isInitialized(),r.keychain.delete(o),yield r.persist()});return function(o){return s.apply(this,arguments)}}(),this.core=e,this.logger=(0,_t.generateChildLogger)(t,this.name)}get context(){return(0,_t.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}setKeyChain(e){var t=this;return(0,w.Z)(function*(){yield t.core.storage.setItem(t.storageKey,Eo(e))})()}getKeyChain(){var e=this;return(0,w.Z)(function*(){const t=yield e.core.storage.getItem(e.storageKey);return typeof t<"u"?So(t):void 0})()}persist(){var e=this;return(0,w.Z)(function*(){yield e.setKeyChain(e.keychain)})()}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class oh{constructor(e,t,r){var s=this;this.core=e,this.logger=t,this.name="crypto",this.initialized=!1,this.init=(0,w.Z)(function*(){s.initialized||(yield s.keychain.init(),s.initialized=!0)}),this.hasKeys=o=>(this.isInitialized(),this.keychain.has(o)),this.getClientId=(0,w.Z)(function*(){return s.isInitialized(),to(no(yield s.getClientSeed()).publicKey)}),this.generateKeyPair=()=>{this.isInitialized();const o=function(){const n=N.Au();return{privateKey:Xt(n.secretKey,an),publicKey:Xt(n.publicKey,an)}}();return this.setPrivateKey(o.publicKey,o.privateKey)},this.signJWT=function(){var o=(0,w.Z)(function*(d){s.isInitialized();const B=no(yield s.getClientSeed()),ce=Wi();return yield function(n,e,t,r){return Hi.apply(this,arguments)}(ce,d,Ld,B)});return function(d){return o.apply(this,arguments)}}(),this.generateSharedKey=(o,d,S)=>{this.isInitialized();const ce=function(n,e){const t=N.gi(Yt(n,an),Yt(e,an));return Xt(new O.t(b.mE,t).expand(32),an)}(this.getPrivateKey(o),d);return this.setSymKey(ce,S)},this.setSymKey=function(){var o=(0,w.Z)(function*(d,S){s.isInitialized();const B=S||Xt((0,b.vp)(Yt(d,an)),an);return yield s.keychain.set(B,d),B});return function(d,S){return o.apply(this,arguments)}}(),this.deleteKeyPair=function(){var o=(0,w.Z)(function*(d){s.isInitialized(),yield s.keychain.del(d)});return function(d){return o.apply(this,arguments)}}(),this.deleteSymKey=function(){var o=(0,w.Z)(function*(d){s.isInitialized(),yield s.keychain.del(d)});return function(d){return o.apply(this,arguments)}}(),this.encode=function(){var o=(0,w.Z)(function*(d,S,B){s.isInitialized();const ce=po(B),_e="string"==typeof(n=S)?n:(n=>JSON.stringify(n,(e,t)=>"bigint"==typeof t?t.toString()+"n":t))(n)||"";var n;if(_o(ce)){const Pe=ce.senderPublicKey,Ke=ce.receiverPublicKey;d=yield s.generateSharedKey(Pe,Ke)}const he=s.getSymKey(d),{type:ze,senderPublicKey:xt}=ce;return function(n){const e=function(n){return Yt(`${n}`,"base10")}(typeof n.type<"u"?n.type:0);if(1===gr(e)&&typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof n.senderPublicKey<"u"?Yt(n.senderPublicKey,an):void 0,r=typeof n.iv<"u"?Yt(n.iv,an):(0,E.randomBytes)(12);return function(n){if(1===gr(n.type)){if(typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Xt(m([n.type,n.senderPublicKey,n.iv,n.sealed]),Vi)}return Xt(m([n.type,n.iv,n.sealed]),Vi)}({type:e,sealed:new y.OK(Yt(n.symKey,an)).seal(r,Yt(n.message,Zi)),iv:r,senderPublicKey:t})}({type:ze,symKey:he,message:_e,senderPublicKey:xt})});return function(d,S,B){return o.apply(this,arguments)}}(),this.decode=function(){var o=(0,w.Z)(function*(d,S,B){s.isInitialized();const ce=function(n,e){const t=ki(n);return po({type:gr(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?Xt(t.senderPublicKey,an):void 0,receiverPublicKey:e?.receiverPublicKey})}(S,B);if(_o(ce)){const ze=ce.receiverPublicKey,xt=ce.senderPublicKey;d=yield s.generateSharedKey(ze,xt)}const he=function(n){const e=new y.OK(Yt(n.symKey,an)),{sealed:t,iv:r}=ki(n.encoded),s=e.open(r,t);if(null===s)throw new Error("Failed to decrypt");return Xt(s,Zi)}({symKey:s.getSymKey(d),encoded:S});return function(n){if("string"!=typeof n)throw new Error("Cannot safe json parse value of type "+typeof n);try{return(n=>{const t=n.replace(/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,'$1"$2n"$3');return JSON.parse(t,(r,s)=>"string"==typeof s&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)})(n)}catch{return n}}(he)});return function(d,S,B){return o.apply(this,arguments)}}(),this.core=e,this.logger=(0,_t.generateChildLogger)(t,this.name),this.keychain=r||new sh(this.core,this.logger)}get context(){return(0,_t.getLoggerContext)(this.logger)}getPayloadType(e){return gr(ki(e).type)}setPrivateKey(e,t){var r=this;return(0,w.Z)(function*(){return yield r.keychain.set(e,t),e})()}getPrivateKey(e){return this.keychain.get(e)}getClientSeed(){var e=this;return(0,w.Z)(function*(){let t="";try{t=e.keychain.get(Xo)}catch{t=Wi(),yield e.keychain.set(Xo,t)}return function(n,e="utf8"){const t=Ad[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return"utf8"!==e&&"utf-8"!==e||null==globalThis.Buffer||null==globalThis.Buffer.from?t.decoder.decode(`${t.prefix}${n}`):globalThis.Buffer.from(n,"utf8")}(t,"base16")})()}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class ah extends class{constructor(e,t){this.logger=e,this.core=t}}{constructor(e,t){var r;super(e,t),r=this,this.logger=e,this.core=t,this.messages=new Map,this.name="messages",this.version="0.3",this.initialized=!1,this.storagePrefix=$n,this.init=(0,w.Z)(function*(){if(!r.initialized){r.logger.trace("Initialized");try{const s=yield r.getRelayerMessages();typeof s<"u"&&(r.messages=s),r.logger.debug(`Successfully Restored records for ${r.name}`),r.logger.trace({type:"method",method:"restore",size:r.messages.size})}catch(s){r.logger.debug(`Failed to Restore records for ${r.name}`),r.logger.error(s)}finally{r.initialized=!0}}}),this.set=function(){var s=(0,w.Z)(function*(o,d){r.isInitialized();const S=Qr(d);let B=r.messages.get(o);return typeof B>"u"&&(B={}),typeof B[S]<"u"||(B[S]=d,r.messages.set(o,B),yield r.persist()),S});return function(o,d){return s.apply(this,arguments)}}(),this.get=s=>{this.isInitialized();let o=this.messages.get(s);return typeof o>"u"&&(o={}),o},this.has=(s,o)=>(this.isInitialized(),typeof this.get(s)[Qr(o)]<"u"),this.del=function(){var s=(0,w.Z)(function*(o){r.isInitialized(),r.messages.delete(o),yield r.persist()});return function(o){return s.apply(this,arguments)}}(),this.logger=(0,_t.generateChildLogger)(e,this.name),this.core=t}get context(){return(0,_t.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}setRelayerMessages(e){var t=this;return(0,w.Z)(function*(){yield t.core.storage.setItem(t.storageKey,Eo(e))})()}getRelayerMessages(){var e=this;return(0,w.Z)(function*(){const t=yield e.core.storage.getItem(e.storageKey);return typeof t<"u"?So(t):void 0})()}persist(){var e=this;return(0,w.Z)(function*(){yield e.setRelayerMessages(e.messages)})()}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class ch extends Vc{constructor(e,t){var r;super(e,t),r=this,this.relayer=e,this.logger=t,this.events=new ye.EventEmitter,this.name="publisher",this.queue=new Map,this.publishTimeout=1e4,this.publish=function(){var s=(0,w.Z)(function*(o,d,S){r.logger.debug("Publishing Payload"),r.logger.trace({type:"method",method:"publish",params:{topic:o,message:d,opts:S}});try{const B=S?.ttl||Bd,ce=Yi(S),_e=S?.prompt||!1,he=S?.tag||0,ze={topic:o,message:d,opts:{ttl:B,relay:ce,prompt:_e,tag:he}},xt=Qr(d);r.queue.set(xt,ze);try{yield yield ei(r.rpcPublish(o,d,B,ce,_e,he),r.publishTimeout),r.relayer.events.emit("relayer_publish",ze)}catch{return r.logger.debug("Publishing Payload stalled"),void r.relayer.events.emit("relayer_connection_stalled")}r.onPublish(xt,ze),r.logger.debug("Successfully Published Payload"),r.logger.trace({type:"method",method:"publish",params:{topic:o,message:d,opts:S}})}catch(B){throw r.logger.debug("Failed to Publish Payload"),r.logger.error(B),B}});return function(o,d,S){return s.apply(this,arguments)}}(),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.relayer=e,this.logger=(0,_t.generateChildLogger)(t,this.name),this.registerEventListeners()}get context(){return(0,_t.getLoggerContext)(this.logger)}rpcPublish(e,t,r,s,o,d){var S,B,ce,_e;const he={method:ti(s.protocol).publish,params:{topic:e,message:t,ttl:r,prompt:o,tag:d}};return sn(null==(S=he.params)?void 0:S.prompt)&&(null==(B=he.params)||delete B.prompt),sn(null==(ce=he.params)?void 0:ce.tag)&&(null==(_e=he.params)||delete _e.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:he}),this.relayer.request(he)}onPublish(e,t){this.queue.delete(e)}checkQueue(){var e=this;this.queue.forEach(function(){var t=(0,w.Z)(function*(r){const{topic:s,message:o,opts:d}=r;yield e.publish(s,o,d)});return function(r){return t.apply(this,arguments)}}())}registerEventListeners(){this.relayer.core.heartbeat.on(Gr.HEARTBEAT_EVENTS.pulse,()=>{this.checkQueue()})}}class uh{constructor(){this.map=new Map,this.set=(e,t)=>{const r=this.get(e);this.exists(e,t)||this.map.set(e,[...r,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u")return void this.map.delete(e);if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,t))return;const s=r.filter(o=>o!==t);s.length?this.map.set(e,s):this.map.delete(e)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var lh=Object.defineProperty,fh=Object.defineProperties,dh=Object.getOwnPropertyDescriptors,ta=Object.getOwnPropertySymbols,hh=Object.prototype.hasOwnProperty,ph=Object.prototype.propertyIsEnumerable,na=(n,e,t)=>e in n?lh(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Er=(n,e)=>{for(var t in e||(e={}))hh.call(e,t)&&na(n,t,e[t]);if(ta)for(var t of ta(e))ph.call(e,t)&&na(n,t,e[t]);return n},is=(n,e)=>fh(n,dh(e));class _h extends Gc{constructor(e,t){var r;super(e,t),r=this,this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new uh,this.events=new ye.EventEmitter,this.name="subscription",this.version="0.3",this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=$n,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=(0,w.Z)(function*(){r.initialized||(r.logger.trace("Initialized"),yield r.restart(),r.registerEventListeners(),r.onEnable(),r.clientId=yield r.relayer.core.crypto.getClientId())}),this.subscribe=function(){var s=(0,w.Z)(function*(o,d){yield r.restartToComplete(),r.isInitialized(),r.logger.debug("Subscribing Topic"),r.logger.trace({type:"method",method:"subscribe",params:{topic:o,opts:d}});try{const S=Yi(d),B={topic:o,relay:S};r.pending.set(o,B);const ce=yield r.rpcSubscribe(o,S);return r.onSubscribe(ce,B),r.logger.debug("Successfully Subscribed Topic"),r.logger.trace({type:"method",method:"subscribe",params:{topic:o,opts:d}}),ce}catch(S){throw r.logger.debug("Failed to Subscribe Topic"),r.logger.error(S),S}});return function(o,d){return s.apply(this,arguments)}}(),this.unsubscribe=function(){var s=(0,w.Z)(function*(o,d){yield r.restartToComplete(),r.isInitialized(),typeof d?.id<"u"?yield r.unsubscribeById(o,d.id,d):yield r.unsubscribeByTopic(o,d)});return function(o,d){return s.apply(this,arguments)}}(),this.isSubscribed=function(){var s=(0,w.Z)(function*(o){return!!r.topics.includes(o)||(yield new Promise((d,S)=>{const B=new Ue.Watch;B.start(r.pendingSubscriptionWatchLabel);const ce=setInterval(()=>{!r.pending.has(o)&&r.topics.includes(o)&&(clearInterval(ce),B.stop(r.pendingSubscriptionWatchLabel),d(!0)),B.elapsed(r.pendingSubscriptionWatchLabel)>=Xd&&(clearInterval(ce),B.stop(r.pendingSubscriptionWatchLabel),S(!1))},r.pollingInterval)}))});return function(o){return s.apply(this,arguments)}}(),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.restart=(0,w.Z)(function*(){r.restartInProgress=!0,yield r.restore(),yield r.reset(),r.restartInProgress=!1}),this.relayer=e,this.logger=(0,_t.generateChildLogger)(t,this.name),this.clientId=""}get context(){return(0,_t.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let r=!1;try{r=this.getSubscription(e).topic===t}catch{}return r}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}unsubscribeByTopic(e,t){var r=this;return(0,w.Z)(function*(){const s=r.topicMap.get(e);yield Promise.all(s.map(function(){var o=(0,w.Z)(function*(d){return yield r.unsubscribeById(e,d,t)});return function(d){return o.apply(this,arguments)}}()))})()}unsubscribeById(e,t,r){var s=this;return(0,w.Z)(function*(){s.logger.debug("Unsubscribing Topic"),s.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}});try{const o=Yi(r);yield s.rpcUnsubscribe(e,t,o);const d=Gt("USER_DISCONNECTED",`${s.name}, ${e}`);yield s.onUnsubscribe(e,t,d),s.logger.debug("Successfully Unsubscribed Topic"),s.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}})}catch(o){throw s.logger.debug("Failed to Unsubscribe Topic"),s.logger.error(o),o}})()}rpcSubscribe(e,t){var r=this;return(0,w.Z)(function*(){const s={method:ti(t.protocol).subscribe,params:{topic:e}};r.logger.debug("Outgoing Relay Payload"),r.logger.trace({type:"payload",direction:"outgoing",request:s});try{yield yield ei(r.relayer.request(s),r.subscribeTimeout)}catch{r.logger.debug("Outgoing Relay Subscribe Payload stalled"),r.relayer.events.emit("relayer_connection_stalled")}return Qr(e+r.clientId)})()}rpcBatchSubscribe(e){var t=this;return(0,w.Z)(function*(){if(!e.length)return;const s={method:ti(e[0].relay.protocol).batchSubscribe,params:{topics:e.map(o=>o.topic)}};t.logger.debug("Outgoing Relay Payload"),t.logger.trace({type:"payload",direction:"outgoing",request:s});try{return yield yield ei(t.relayer.request(s),t.subscribeTimeout)}catch{t.logger.debug("Outgoing Relay Payload stalled"),t.relayer.events.emit("relayer_connection_stalled")}})()}rpcUnsubscribe(e,t,r){const s={method:ti(r.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,t){this.setSubscription(e,is(Er({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(t=>{this.setSubscription(t.id,Er({},t)),this.pending.delete(t.topic)})}onUnsubscribe(e,t,r){var s=this;return(0,w.Z)(function*(){s.events.removeAllListeners(t),s.hasSubscription(t,e)&&s.deleteSubscription(t,r),yield s.relayer.messages.del(e)})()}setRelayerSubscriptions(e){var t=this;return(0,w.Z)(function*(){yield t.relayer.core.storage.setItem(t.storageKey,e)})()}getRelayerSubscriptions(){var e=this;return(0,w.Z)(function*(){return yield e.relayer.core.storage.getItem(e.storageKey)})()}setSubscription(e,t){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t))}addSubscription(e,t){this.subscriptions.set(e,Er({},t)),this.topicMap.set(t.topic,e),this.events.emit(In_created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:r}=xe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(In_deleted,is(Er({},r),{reason:t}))}persist(){var e=this;return(0,w.Z)(function*(){yield e.setRelayerSubscriptions(e.values),e.events.emit("subscription_sync")})()}reset(){var e=this;return(0,w.Z)(function*(){if(!e.cached.length)return;const t=Math.ceil(e.cached.length/e.batchSubscribeTopicsLimit);for(let r=0;r<t;r++){const s=e.cached.splice(0,e.batchSubscribeTopicsLimit);yield e.batchSubscribe(s)}e.events.emit("subscription_resubscribed")})()}restore(){var e=this;return(0,w.Z)(function*(){try{const t=yield e.getRelayerSubscriptions();if(typeof t>"u"||!t.length)return;if(e.subscriptions.size){const{message:r}=xe("RESTORE_WILL_OVERRIDE",e.name);throw e.logger.error(r),e.logger.error(`${e.name}: ${JSON.stringify(e.values)}`),new Error(r)}e.cached=t,e.logger.debug(`Successfully Restored subscriptions for ${e.name}`),e.logger.trace({type:"method",method:"restore",subscriptions:e.values})}catch(t){e.logger.debug(`Failed to Restore subscriptions for ${e.name}`),e.logger.error(t)}})()}batchSubscribe(e){var t=this;return(0,w.Z)(function*(){if(!e.length)return;const r=yield t.rpcBatchSubscribe(e);mr(r)&&t.onBatchSubscribe(r.map((s,o)=>is(Er({},e[o]),{id:s})))})()}onConnect(){var e=this;return(0,w.Z)(function*(){e.restartInProgress||(yield e.restart(),e.onEnable())})()}onDisconnect(){this.onDisable()}checkPending(){var e=this;return(0,w.Z)(function*(){if(e.relayer.transportExplicitlyClosed)return;const t=[];e.pending.forEach(r=>{t.push(r)}),yield e.batchSubscribe(t)})()}registerEventListeners(){var e=this;this.relayer.core.heartbeat.on(Gr.HEARTBEAT_EVENTS.pulse,(0,w.Z)(function*(){yield e.checkPending()})),this.relayer.on("relayer_connect",(0,w.Z)(function*(){yield e.onConnect()})),this.relayer.on("relayer_disconnect",()=>{this.onDisconnect()}),this.events.on(In_created,function(){var t=(0,w.Z)(function*(r){const s=In_created;e.logger.info(`Emitting ${s}`),e.logger.debug({type:"event",event:s,data:r}),yield e.persist()});return function(r){return t.apply(this,arguments)}}()),this.events.on(In_deleted,function(){var t=(0,w.Z)(function*(r){const s=In_deleted;e.logger.info(`Emitting ${s}`),e.logger.debug({type:"event",event:s,data:r}),yield e.persist()});return function(r){return t.apply(this,arguments)}}())}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}restartToComplete(){var e=this;return(0,w.Z)(function*(){e.restartInProgress&&(yield new Promise(t=>{const r=setInterval(()=>{e.restartInProgress||(clearInterval(r),t())},e.pollingInterval)}))})()}}var gh=Object.defineProperty,ra=Object.getOwnPropertySymbols,yh=Object.prototype.hasOwnProperty,mh=Object.prototype.propertyIsEnumerable,ia=(n,e,t)=>e in n?gh(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;class vh extends Zc{constructor(e){var t;super(e),t=this,this.protocol="wc",this.version=2,this.events=new ye.EventEmitter,this.name="relayer",this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.request=function(){var r=(0,w.Z)(function*(s){t.logger.debug("Publishing Request Payload");try{return yield t.toEstablishConnection(),yield t.provider.request(s)}catch(o){throw t.logger.debug("Failed to Publish Request"),t.logger.error(o),o}});return function(s){return r.apply(this,arguments)}}(),this.core=e.core,this.logger=typeof e.logger<"u"&&"string"!=typeof e.logger?(0,_t.generateChildLogger)(e.logger,this.name):qr()((0,_t.getDefaultLoggerOptions)({level:e.logger||"error"})),this.messages=new ah(this.logger,e.core),this.subscriber=new _h(this,this.logger),this.publisher=new ch(this,this.logger),this.relayUrl=e?.relayUrl||ea,this.projectId=e.projectId,this.provider={}}init(){var e=this;return(0,w.Z)(function*(){e.logger.trace("Initialized"),yield e.createProvider(),yield Promise.all([e.messages.init(),e.transportOpen(),e.subscriber.init()]),e.registerEventListeners(),e.initialized=!0})()}get context(){return(0,_t.getLoggerContext)(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}publish(e,t,r){var s=this;return(0,w.Z)(function*(){s.isInitialized(),yield s.publisher.publish(e,t,r),yield s.recordMessageEvent({topic:e,message:t,publishedAt:Date.now()})})()}subscribe(e,t){var r=this;return(0,w.Z)(function*(){r.isInitialized();let s="";return yield Promise.all([new Promise(o=>{r.subscriber.once(In_created,d=>{d.topic===e&&o()})}),new Promise(function(){var o=(0,w.Z)(function*(d){s=yield r.subscriber.subscribe(e,t),d()});return function(d){return o.apply(this,arguments)}}())]),s})()}unsubscribe(e,t){var r=this;return(0,w.Z)(function*(){r.isInitialized(),yield r.subscriber.unsubscribe(e,t)})()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}transportClose(){var e=this;return(0,w.Z)(function*(){e.transportExplicitlyClosed=!0,e.connected&&(yield e.provider.disconnect(),e.events.emit("relayer_transport_closed"))})()}transportOpen(e){var t=this;return(0,w.Z)(function*(){if(!t.reconnecting){t.relayUrl=e||t.relayUrl,t.transportExplicitlyClosed=!1,t.reconnecting=!0;try{yield Promise.all([new Promise(r=>{t.initialized||r(),t.subscriber.once("subscription_resubscribed",()=>{r()})}),yield Promise.race([new Promise(function(){var r=(0,w.Z)(function*(s,o){yield ei(t.provider.connect(),5e3,"socket stalled").catch(d=>o(d)).then(()=>s()).finally(()=>t.removeListener("relayer_transport_closed",t.rejectTransportOpen))});return function(s,o){return r.apply(this,arguments)}}()),new Promise(r=>t.once("relayer_transport_closed",t.rejectTransportOpen))])])}catch(r){if(t.logger.error(r),!t.isConnectionStalled(r.message))throw r;t.events.emit("relayer_transport_closed")}finally{t.reconnecting=!1}}})()}restartTransport(e){var t=this;return(0,w.Z)(function*(){t.transportExplicitlyClosed||(t.relayUrl=e||t.relayUrl,yield t.transportClose(),yield t.createProvider(),yield t.transportOpen())})()}isConnectionStalled(e){return this.staleConnectionErrors.some(t=>e.includes(t))}rejectTransportOpen(){throw new Error("closeTransport called before connection was established")}createProvider(){var e=this;return(0,w.Z)(function*(){const t=yield e.core.crypto.signJWT(e.relayUrl);e.provider=new Xl(new class{constructor(e){if(this.url=e,this.events=new ye.EventEmitter,this.registering=!1,!(0,Re.isWsUrl)(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return void 0!==this.socket}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}open(e=this.url){var t=this;return(0,w.Z)(function*(){yield t.register(e)})()}close(){var e=this;return(0,w.Z)(function*(){return new Promise((t,r)=>{void 0!==e.socket?(e.socket.onclose=s=>{e.onClose(s),t()},e.socket.close()):r(new Error("Connection already closed"))})})()}send(e,t){var r=this;return(0,w.Z)(function*(){void 0===r.socket&&(r.socket=yield r.register());try{r.socket.send("string"==typeof(n=e)?n:(n=>JSON.stringify(n,(e,t)=>"bigint"==typeof t?t.toString()+"n":t))(n)||"")}catch(s){r.onError(e.id,s)}var n})()}register(e=this.url){if(!(0,Re.isWsUrl)(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((r,s)=>{this.events.once("register_error",o=>{this.resetMaxListeners(),s(o)}),this.events.once("open",()=>{if(this.resetMaxListeners(),void 0===this.socket)return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,r)=>{const s=(0,Re.isReactNative)()?void 0:{rejectUnauthorized:!(0,Re.isLocalhostUrl)(e)},o=new of(e,[],s);"undefined"!=typeof window?o.onerror=d=>{r(this.emitError(d.error))}:o.on("error",d=>{r(this.emitError(d))}),o.onopen=()=>{this.onOpen(o),t(o)}})}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=t=>this.onClose(t),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(void 0===e.data)return;const t="string"==typeof e.data?function(n){if("string"!=typeof n)throw new Error("Cannot safe json parse value of type "+typeof n);try{return(n=>{const t=n.replace(/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,'$1"$2n"$3');return JSON.parse(t,(r,s)=>"string"==typeof s&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)})(n)}catch{return n}}(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const r=this.parseError(t),s=r.message||r.toString(),o=(0,Re.formatJsonRpcError)(e,s);this.events.emit("payload",o)}parseError(e,t=this.url){return(0,Re.CX)(e,t,"WS")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}emitError(e){const t=this.parseError(new Error((null==e?void 0:e.message)||`WebSocket connection failed for URL: ${this.url}`));return this.events.emit("register_error",t),t}}(function({protocol:n,version:e,relayUrl:t,sdkVersion:r,auth:s,projectId:o,useOnCloseEvent:d}){const S=t.split("?"),B=al(n,e,r),_e=function(n,e){let t=Yr.parse(n);return t=mo(mo({},t),e),Yr.stringify(t)}(S[1]||"",{auth:s,ua:B,projectId:o,useOnCloseEvent:d||void 0});return S[0]+"?"+_e}({sdkVersion:"2.5.2",protocol:e.protocol,version:e.version,relayUrl:e.relayUrl,projectId:e.projectId,auth:t,useOnCloseEvent:!0}))),e.registerProviderListeners()})()}recordMessageEvent(e){var t=this;return(0,w.Z)(function*(){const{topic:r,message:s}=e;yield t.messages.set(r,s)})()}shouldIgnoreMessageEvent(e){var t=this;return(0,w.Z)(function*(){const{topic:r,message:s}=e;return!(yield t.subscriber.isSubscribed(r))||t.messages.has(r,s)})()}onProviderPayload(e){var t=this;return(0,w.Z)(function*(){if(t.logger.debug("Incoming Relay Payload"),t.logger.trace({type:"payload",direction:"incoming",payload:e}),(0,Re.isJsonRpcRequest)(e)){if(!e.method.endsWith("_subscription"))return;const r=e.params,{topic:s,message:o,publishedAt:d}=r.data,S={topic:s,message:o,publishedAt:d};t.logger.debug("Emitting Relayer Payload"),t.logger.trace(((n,e)=>{for(var t in e||(e={}))yh.call(e,t)&&ia(n,t,e[t]);if(ra)for(var t of ra(e))mh.call(e,t)&&ia(n,t,e[t]);return n})({type:"event",event:r.id},S)),t.events.emit(r.id,S),yield t.acknowledgePayload(e),yield t.onMessageEvent(S)}})()}onMessageEvent(e){var t=this;return(0,w.Z)(function*(){(yield t.shouldIgnoreMessageEvent(e))||(t.events.emit("relayer_message",e),yield t.recordMessageEvent(e))})()}acknowledgePayload(e){var t=this;return(0,w.Z)(function*(){const r=(0,Re.formatJsonRpcResult)(e.id,!0);yield t.provider.connection.send(r)})()}registerProviderListeners(){this.provider.on("payload",e=>this.onProviderPayload(e)),this.provider.on("connect",()=>{this.events.emit("relayer_connect")}),this.provider.on("disconnect",()=>{this.onProviderDisconnect()}),this.provider.on("error",e=>{this.logger.error(e),this.events.emit("relayer_error",e)})}registerEventListeners(){var e=this;this.events.on("relayer_connection_stalled",(0,w.Z)(function*(){yield e.restartTransport()}))}onProviderDisconnect(){this.events.emit("relayer_disconnect"),this.attemptToReconnect()}attemptToReconnect(){var e=this;this.transportExplicitlyClosed||setTimeout((0,w.Z)(function*(){yield e.restartTransport()}),(0,Ue.toMiliseconds)(Gd))}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}toEstablishConnection(){var e=this;return(0,w.Z)(function*(){if(!e.connected){if(e.connecting)return yield new Promise(t=>{const r=setInterval(()=>{e.connected&&(clearInterval(r),t())},e.connectionStatusPollingInterval)});yield e.restartTransport()}})()}}var wh=Object.defineProperty,sa=Object.getOwnPropertySymbols,Eh=Object.prototype.hasOwnProperty,Sh=Object.prototype.propertyIsEnumerable,oa=(n,e,t)=>e in n?wh(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,aa=(n,e)=>{for(var t in e||(e={}))Eh.call(e,t)&&oa(n,t,e[t]);if(sa)for(var t of sa(e))Sh.call(e,t)&&oa(n,t,e[t]);return n};class si extends class{constructor(e,t,r,s){this.core=e,this.logger=t,this.name=r}}{constructor(e,t,r,s=$n,o){var d;super(e,t,r,s),d=this,this.core=e,this.logger=t,this.name=r,this.map=new Map,this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=$n,this.init=(0,w.Z)(function*(){d.initialized||(d.logger.trace("Initialized"),yield d.restore(),d.cached.forEach(S=>{d.getKey&&null!==S&&!sn(S)?d.map.set(d.getKey(S),S):function(n){var e;return null==(e=n?.proposer)?void 0:e.publicKey}(S)?d.map.set(S.id,S):S?.topic&&d.map.set(S.topic,S)}),d.cached=[],d.initialized=!0)}),this.set=function(){var S=(0,w.Z)(function*(B,ce){d.isInitialized(),d.map.has(B)?yield d.update(B,ce):(d.logger.debug("Setting value"),d.logger.trace({type:"method",method:"set",key:B,value:ce}),d.map.set(B,ce),yield d.persist())});return function(B,ce){return S.apply(this,arguments)}}(),this.get=S=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:S}),this.getData(S)),this.getAll=S=>(this.isInitialized(),S?this.values.filter(B=>Object.keys(S).every(ce=>lf()(B[ce],S[ce]))):this.values),this.update=function(){var S=(0,w.Z)(function*(B,ce){d.isInitialized(),d.logger.debug("Updating value"),d.logger.trace({type:"method",method:"update",key:B,update:ce});const _e=aa(aa({},d.getData(B)),ce);d.map.set(B,_e),yield d.persist()});return function(B,ce){return S.apply(this,arguments)}}(),this.delete=function(){var S=(0,w.Z)(function*(B,ce){d.isInitialized(),d.map.has(B)&&(d.logger.debug("Deleting value"),d.logger.trace({type:"method",method:"delete",key:B,reason:ce}),d.map.delete(B),yield d.persist())});return function(B,ce){return S.apply(this,arguments)}}(),this.logger=(0,_t.generateChildLogger)(t,this.name),this.storagePrefix=s,this.getKey=o}get context(){return(0,_t.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}setDataStore(e){var t=this;return(0,w.Z)(function*(){yield t.core.storage.setItem(t.storageKey,e)})()}getDataStore(){var e=this;return(0,w.Z)(function*(){return yield e.core.storage.getItem(e.storageKey)})()}getData(e){const t=this.map.get(e);if(!t){const{message:r}=xe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return t}persist(){var e=this;return(0,w.Z)(function*(){yield e.setDataStore(e.values)})()}restore(){var e=this;return(0,w.Z)(function*(){try{const t=yield e.getDataStore();if(typeof t>"u"||!t.length)return;if(e.map.size){const{message:r}=xe("RESTORE_WILL_OVERRIDE",e.name);throw e.logger.error(r),new Error(r)}e.cached=t,e.logger.debug(`Successfully Restored value for ${e.name}`),e.logger.trace({type:"method",method:"restore",value:e.values})}catch(t){e.logger.debug(`Failed to Restore value for ${e.name}`),e.logger.error(t)}})()}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Dh{constructor(e,t){var r=this;this.core=e,this.logger=t,this.name="pairing",this.version="0.3",this.events=new(me()),this.initialized=!1,this.storagePrefix=$n,this.ignoredPayloadTypes=[1],this.registeredMethods=[],this.init=(0,w.Z)(function*(){r.initialized||(yield r.pairings.init(),yield r.cleanup(),r.registerRelayerEvents(),r.registerExpirerEvents(),r.initialized=!0,r.logger.trace("Initialized"))}),this.register=({methods:s})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...s])]},this.create=(0,w.Z)(function*(){r.isInitialized();const s=Wi(),o=yield r.core.crypto.setSymKey(s),d=xn(Ue.FIVE_MINUTES),S={protocol:"irn"},B={topic:o,expiry:d,relay:S,active:!1},ce=`${(n={protocol:r.core.protocol,version:r.core.version,topic:o,symKey:s,relay:S}).protocol}:${n.topic}@${n.version}?`+Yr.stringify(((n,e)=>{for(var t in e||(e={}))gl.call(e,t)&&Io(n,t,e[t]);if(xo)for(var t of xo(e))yl.call(e,t)&&Io(n,t,e[t]);return n})({symKey:n.symKey},function(n,e="-"){const r={};return Object.keys(n).forEach(s=>{n[s]&&(r["relay"+e+s]=n[s])}),r}(n.relay)));var n;return yield r.pairings.set(o,B),yield r.core.relayer.subscribe(o),r.core.expirer.set(o,d),{topic:o,uri:ce}}),this.pair=function(){var s=(0,w.Z)(function*(o){r.isInitialized(),r.isValidPair(o);const{topic:d,symKey:S,relay:B}=function(n){const e=n.indexOf(":"),t=-1!==n.indexOf("?")?n.indexOf("?"):void 0,r=n.substring(0,e),s=n.substring(e+1,t).split("@"),o=typeof t<"u"?n.substring(t):"",d=Yr.parse(o);return{protocol:r,topic:s[0],version:parseInt(s[1],10),symKey:d.symKey,relay:bl(d)}}(o.uri);if(r.pairings.keys.includes(d))throw new Error(`Pairing already exists: ${d}`);if(r.core.crypto.hasKeys(d))throw new Error(`Keychain already exists: ${d}`);const ce=xn(Ue.FIVE_MINUTES),_e={topic:d,relay:B,expiry:ce,active:!1};return yield r.pairings.set(d,_e),yield r.core.crypto.setSymKey(S,d),yield r.core.relayer.subscribe(d,{relay:B}),r.core.expirer.set(d,ce),o.activatePairing&&(yield r.activate({topic:d})),_e});return function(o){return s.apply(this,arguments)}}(),this.activate=function(){var s=(0,w.Z)(function*({topic:o}){r.isInitialized();const d=xn(Ue.THIRTY_DAYS);yield r.pairings.update(o,{active:!0,expiry:d}),r.core.expirer.set(o,d)});return function(o){return s.apply(this,arguments)}}(),this.ping=function(){var s=(0,w.Z)(function*(o){r.isInitialized(),yield r.isValidPing(o);const{topic:d}=o;if(r.pairings.keys.includes(d)){const S=yield r.sendRequest(d,"wc_pairingPing",{}),{done:B,resolve:ce,reject:_e}=Yn();r.events.once(Ft("pairing_ping",S),({error:he})=>{he?_e(he):ce()}),yield B()}});return function(o){return s.apply(this,arguments)}}(),this.updateExpiry=function(){var s=(0,w.Z)(function*({topic:o,expiry:d}){r.isInitialized(),yield r.pairings.update(o,{expiry:d})});return function(o){return s.apply(this,arguments)}}(),this.updateMetadata=function(){var s=(0,w.Z)(function*({topic:o,metadata:d}){r.isInitialized(),yield r.pairings.update(o,{peerMetadata:d})});return function(o){return s.apply(this,arguments)}}(),this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=function(){var s=(0,w.Z)(function*(o){r.isInitialized(),yield r.isValidDisconnect(o);const{topic:d}=o;r.pairings.keys.includes(d)&&(yield r.sendRequest(d,"wc_pairingDelete",Gt("USER_DISCONNECTED")),yield r.deletePairing(d))});return function(o){return s.apply(this,arguments)}}(),this.sendRequest=function(){var s=(0,w.Z)(function*(o,d,S){const B=(0,Re.formatJsonRpcRequest)(d,S),ce=yield r.core.crypto.encode(o,B),_e=wr[d].req;return r.core.history.set(o,B),yield r.core.relayer.publish(o,ce,_e),B.id});return function(o,d,S){return s.apply(this,arguments)}}(),this.sendResult=function(){var s=(0,w.Z)(function*(o,d,S){const B=(0,Re.formatJsonRpcResult)(o,S),ce=yield r.core.crypto.encode(d,B),_e=yield r.core.history.get(d,o),he=wr[_e.request.method].res;yield r.core.relayer.publish(d,ce,he),yield r.core.history.resolve(B)});return function(o,d,S){return s.apply(this,arguments)}}(),this.sendError=function(){var s=(0,w.Z)(function*(o,d,S){const B=(0,Re.formatJsonRpcError)(o,S),ce=yield r.core.crypto.encode(d,B),_e=yield r.core.history.get(d,o),he=wr[_e.request.method]?wr[_e.request.method].res:wr.unregistered_method.res;yield r.core.relayer.publish(d,ce,he),yield r.core.history.resolve(B)});return function(o,d,S){return s.apply(this,arguments)}}(),this.deletePairing=function(){var s=(0,w.Z)(function*(o,d){yield r.core.relayer.unsubscribe(o),yield Promise.all([r.pairings.delete(o,Gt("USER_DISCONNECTED")),r.core.crypto.deleteSymKey(o),d?Promise.resolve():r.core.expirer.del(o)])});return function(o,d){return s.apply(this,arguments)}}(),this.cleanup=(0,w.Z)(function*(){const s=r.pairings.getAll().filter(o=>Mn(o.expiry));yield Promise.all(s.map(o=>r.deletePairing(o.topic)))}),this.onRelayEventRequest=s=>{const{topic:o,payload:d}=s,S=d.method;if(this.pairings.keys.includes(o))switch(S){case"wc_pairingPing":return this.onPairingPingRequest(o,d);case"wc_pairingDelete":return this.onPairingDeleteRequest(o,d);default:return this.onUnknownRpcMethodRequest(o,d)}},this.onRelayEventResponse=function(){var s=(0,w.Z)(function*(o){const{topic:d,payload:S}=o,B=(yield r.core.history.get(d,S.id)).request.method;if(r.pairings.keys.includes(d))return"wc_pairingPing"===B?r.onPairingPingResponse(d,S):r.onUnknownRpcMethodResponse(B)});return function(o){return s.apply(this,arguments)}}(),this.onPairingPingRequest=function(){var s=(0,w.Z)(function*(o,d){const{id:S}=d;try{r.isValidPing({topic:o}),yield r.sendResult(S,o,!0),r.events.emit("pairing_ping",{id:S,topic:o})}catch(B){yield r.sendError(S,o,B),r.logger.error(B)}});return function(o,d){return s.apply(this,arguments)}}(),this.onPairingPingResponse=(s,o)=>{const{id:d}=o;setTimeout(()=>{(0,Re.isJsonRpcResult)(o)?this.events.emit(Ft("pairing_ping",d),{}):(0,Re.isJsonRpcError)(o)&&this.events.emit(Ft("pairing_ping",d),{error:o.error})},500)},this.onPairingDeleteRequest=function(){var s=(0,w.Z)(function*(o,d){const{id:S}=d;try{r.isValidDisconnect({topic:o}),yield r.deletePairing(o),r.events.emit("pairing_delete",{id:S,topic:o})}catch(B){yield r.sendError(S,o,B),r.logger.error(B)}});return function(o,d){return s.apply(this,arguments)}}(),this.onUnknownRpcMethodRequest=function(){var s=(0,w.Z)(function*(o,d){const{id:S,method:B}=d;try{if(r.registeredMethods.includes(B))return;const ce=Gt("WC_METHOD_UNSUPPORTED",B);yield r.sendError(S,o,ce),r.logger.error(ce)}catch(ce){yield r.sendError(S,o,ce),r.logger.error(ce)}});return function(o,d){return s.apply(this,arguments)}}(),this.onUnknownRpcMethodResponse=s=>{this.registeredMethods.includes(s)||this.logger.error(Gt("WC_METHOD_UNSUPPORTED",s))},this.isValidPair=s=>{if(!cn(s)){const{message:o}=xe("MISSING_OR_INVALID",`pair() params: ${s}`);throw new Error(o)}if(!function(n){if(Wt(n,!1))try{return typeof new URL(n)<"u"}catch{return!1}return!1}(s.uri)){const{message:o}=xe("MISSING_OR_INVALID",`pair() uri: ${s.uri}`);throw new Error(o)}},this.isValidPing=function(){var s=(0,w.Z)(function*(o){if(!cn(o)){const{message:S}=xe("MISSING_OR_INVALID",`ping() params: ${o}`);throw new Error(S)}const{topic:d}=o;yield r.isValidPairingTopic(d)});return function(o){return s.apply(this,arguments)}}(),this.isValidDisconnect=function(){var s=(0,w.Z)(function*(o){if(!cn(o)){const{message:S}=xe("MISSING_OR_INVALID",`disconnect() params: ${o}`);throw new Error(S)}const{topic:d}=o;yield r.isValidPairingTopic(d)});return function(o){return s.apply(this,arguments)}}(),this.isValidPairingTopic=function(){var s=(0,w.Z)(function*(o){if(!Wt(o,!1)){const{message:d}=xe("MISSING_OR_INVALID",`pairing topic should be a string: ${o}`);throw new Error(d)}if(!r.pairings.keys.includes(o)){const{message:d}=xe("NO_MATCHING_KEY",`pairing topic doesn't exist: ${o}`);throw new Error(d)}if(Mn(r.pairings.get(o).expiry)){yield r.deletePairing(o);const{message:d}=xe("EXPIRED",`pairing topic: ${o}`);throw new Error(d)}});return function(o){return s.apply(this,arguments)}}(),this.core=e,this.logger=(0,_t.generateChildLogger)(t,this.name),this.pairings=new si(this.core,this.logger,this.name,this.storagePrefix)}get context(){return(0,_t.getLoggerContext)(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){var e=this;this.core.relayer.on("relayer_message",function(){var t=(0,w.Z)(function*(r){const{topic:s,message:o}=r;if(e.ignoredPayloadTypes.includes(e.core.crypto.getPayloadType(o)))return;const d=yield e.core.crypto.decode(s,o);(0,Re.isJsonRpcRequest)(d)?(e.core.history.set(s,d),e.onRelayEventRequest({topic:s,payload:d})):(0,Re.isJsonRpcResponse)(d)&&(yield e.core.history.resolve(d),e.onRelayEventResponse({topic:s,payload:d}))});return function(r){return t.apply(this,arguments)}}())}registerExpirerEvents(){var e=this;this.core.expirer.on(gn_expired,function(){var t=(0,w.Z)(function*(r){const{topic:s}=Oo(r.target);s&&e.pairings.keys.includes(s)&&(yield e.deletePairing(s,!0),e.events.emit("pairing_expire",{topic:s}))});return function(r){return t.apply(this,arguments)}}())}}class Oh extends Bc{constructor(e,t){var r;super(e,t),r=this,this.core=e,this.logger=t,this.records=new Map,this.events=new ye.EventEmitter,this.name="history",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=$n,this.init=(0,w.Z)(function*(){r.initialized||(r.logger.trace("Initialized"),yield r.restore(),r.cached.forEach(s=>r.records.set(s.id,s)),r.cached=[],r.registerEventListeners(),r.initialized=!0)}),this.set=(s,o,d)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:s,request:o,chainId:d}),this.records.has(o.id))return;const S={id:o.id,topic:s,request:{method:o.method,params:o.params||null},chainId:d};this.records.set(S.id,S),this.events.emit("history_created",S)},this.resolve=function(){var s=(0,w.Z)(function*(o){if(r.isInitialized(),r.logger.debug("Updating JSON-RPC response history record"),r.logger.trace({type:"method",method:"update",response:o}),!r.records.has(o.id))return;const d=yield r.getRecord(o.id);typeof d.response>"u"&&(d.response=(0,Re.isJsonRpcError)(o)?{error:o.error}:{result:o.result},r.records.set(d.id,d),r.events.emit("history_updated",d))});return function(o){return s.apply(this,arguments)}}(),this.get=function(){var s=(0,w.Z)(function*(o,d){return r.isInitialized(),r.logger.debug("Getting record"),r.logger.trace({type:"method",method:"get",topic:o,id:d}),yield r.getRecord(d)});return function(o,d){return s.apply(this,arguments)}}(),this.delete=(s,o)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:o}),this.values.forEach(d=>{if(d.topic===s){if(typeof o<"u"&&d.id!==o)return;this.records.delete(d.id),this.events.emit("history_deleted",d)}})},this.exists=function(){var s=(0,w.Z)(function*(o,d){return r.isInitialized(),!!r.records.has(d)&&(yield r.getRecord(d)).topic===o});return function(o,d){return s.apply(this,arguments)}}(),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=(0,_t.generateChildLogger)(t,this.name)}get context(){return(0,_t.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const r={topic:t.topic,request:(0,Re.formatJsonRpcRequest)(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(r)}),e}setJsonRpcRecords(e){var t=this;return(0,w.Z)(function*(){yield t.core.storage.setItem(t.storageKey,e)})()}getJsonRpcRecords(){var e=this;return(0,w.Z)(function*(){return yield e.core.storage.getItem(e.storageKey)})()}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:r}=xe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return t}persist(){var e=this;return(0,w.Z)(function*(){yield e.setJsonRpcRecords(e.values),e.events.emit("history_sync")})()}restore(){var e=this;return(0,w.Z)(function*(){try{const t=yield e.getJsonRpcRecords();if(typeof t>"u"||!t.length)return;if(e.records.size){const{message:r}=xe("RESTORE_WILL_OVERRIDE",e.name);throw e.logger.error(r),new Error(r)}e.cached=t,e.logger.debug(`Successfully Restored records for ${e.name}`),e.logger.trace({type:"method",method:"restore",records:e.values})}catch(t){e.logger.debug(`Failed to Restore records for ${e.name}`),e.logger.error(t)}})()}registerEventListeners(){this.events.on("history_created",e=>{const t="history_created";this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on("history_updated",e=>{const t="history_updated";this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on("history_deleted",e=>{const t="history_deleted";this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class xh extends Wc{constructor(e,t){var r;super(e,t),r=this,this.core=e,this.logger=t,this.expirations=new Map,this.events=new ye.EventEmitter,this.name="expirer",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=$n,this.init=(0,w.Z)(function*(){r.initialized||(r.logger.trace("Initialized"),yield r.restore(),r.cached.forEach(s=>r.expirations.set(s.target,s)),r.cached=[],r.registerEventListeners(),r.initialized=!0)}),this.has=s=>{try{const o=this.formatTarget(s);return typeof this.getExpiration(o)<"u"}catch{return!1}},this.set=(s,o)=>{this.isInitialized();const d=this.formatTarget(s),S={target:d,expiry:o};this.expirations.set(d,S),this.checkExpiry(d,S),this.events.emit("expirer_created",{target:d,expiration:S})},this.get=s=>{this.isInitialized();const o=this.formatTarget(s);return this.getExpiration(o)},this.del=s=>{if(this.isInitialized(),this.has(s)){const o=this.formatTarget(s),d=this.getExpiration(o);this.expirations.delete(o),this.events.emit("expirer_deleted",{target:o,expiration:d})}},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=(0,_t.generateChildLogger)(t,this.name)}get context(){return(0,_t.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if("string"==typeof e)return Do("topic",e);if("number"==typeof e)return Do("id",e);const{message:t}=xe("UNKNOWN_TYPE","Target type: "+typeof e);throw new Error(t)}setExpirations(e){var t=this;return(0,w.Z)(function*(){yield t.core.storage.setItem(t.storageKey,e)})()}getExpirations(){var e=this;return(0,w.Z)(function*(){return yield e.core.storage.getItem(e.storageKey)})()}persist(){var e=this;return(0,w.Z)(function*(){yield e.setExpirations(e.values),e.events.emit("expirer_sync")})()}restore(){var e=this;return(0,w.Z)(function*(){try{const t=yield e.getExpirations();if(typeof t>"u"||!t.length)return;if(e.expirations.size){const{message:r}=xe("RESTORE_WILL_OVERRIDE",e.name);throw e.logger.error(r),new Error(r)}e.cached=t,e.logger.debug(`Successfully Restored expirations for ${e.name}`),e.logger.trace({type:"method",method:"restore",expirations:e.values})}catch(t){e.logger.debug(`Failed to Restore expirations for ${e.name}`),e.logger.error(t)}})()}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:r}=xe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return t}checkExpiry(e,t){const{expiry:r}=t;(0,Ue.toMiliseconds)(r)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(gn_expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(Gr.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on("expirer_created",e=>{const t="expirer_created";this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(gn_expired,e=>{const t=gn_expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on("expirer_deleted",e=>{const t="expirer_deleted";this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Ih=Object.defineProperty,ca=Object.getOwnPropertySymbols,Ph=Object.prototype.hasOwnProperty,Nh=Object.prototype.propertyIsEnumerable,ua=(n,e,t)=>e in n?Ih(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,la=(n,e)=>{for(var t in e||(e={}))Ph.call(e,t)&&ua(n,t,e[t]);if(ca)for(var t of ca(e))Nh.call(e,t)&&ua(n,t,e[t]);return n};class ss extends zc{constructor(e){super(e),this.protocol="wc",this.version=2,this.name="core",this.events=new ye.EventEmitter,this.initialized=!1,this.on=(r,s)=>this.events.on(r,s),this.once=(r,s)=>this.events.once(r,s),this.off=(r,s)=>this.events.off(r,s),this.removeListener=(r,s)=>this.events.removeListener(r,s),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||ea;const t=typeof e?.logger<"u"&&"string"!=typeof e?.logger?e.logger:qr()((0,_t.getDefaultLoggerOptions)({level:e?.logger||"error"}));this.logger=(0,_t.generateChildLogger)(t,this.name),this.heartbeat=new Gr.HeartBeat,this.crypto=new oh(this,this.logger,e?.keychain),this.history=new Oh(this,this.logger),this.expirer=new xh(this,this.logger),this.storage=null!=e&&e.storage?e.storage:new Hc.ZP(la(la({},jd),e?.storageOptions)),this.relayer=new vh({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Dh(this,this.logger)}static init(e){return(0,w.Z)(function*(){const t=new ss(e);return yield t.initialize(),t})()}get context(){return(0,_t.getLoggerContext)(this.logger)}start(){var e=this;return(0,w.Z)(function*(){e.initialized||(yield e.initialize())})()}initialize(){var e=this;return(0,w.Z)(function*(){e.logger.trace("Initialized");try{yield e.crypto.init(),yield e.history.init(),yield e.expirer.init(),yield e.relayer.init(),yield e.heartbeat.init(),yield e.pairing.init(),e.initialized=!0,e.logger.info("Core Initialization Success")}catch(t){throw e.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,t),e.logger.error(t.message),t}})()}}const Ch=ss,os="wc@2:client:",pa="Proposal expired",oi=Ue.SEVEN_DAYS,Sr={wc_sessionPropose:{req:{ttl:Ue.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:Ue.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:Ue.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:Ue.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:Ue.ONE_DAY,prompt:!1,tag:1104},res:{ttl:Ue.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:Ue.ONE_DAY,prompt:!1,tag:1106},res:{ttl:Ue.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:Ue.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:Ue.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:Ue.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:Ue.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:Ue.ONE_DAY,prompt:!1,tag:1112},res:{ttl:Ue.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:Ue.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:Ue.THIRTY_SECONDS,prompt:!1,tag:1115}}},cs={min:Ue.FIVE_MINUTES,max:Ue.SEVEN_DAYS};var jh=Object.defineProperty,Fh=Object.defineProperties,Lh=Object.getOwnPropertyDescriptors,_a=Object.getOwnPropertySymbols,Mh=Object.prototype.hasOwnProperty,$h=Object.prototype.propertyIsEnumerable,ga=(n,e,t)=>e in n?jh(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,yn=(n,e)=>{for(var t in e||(e={}))Mh.call(e,t)&&ga(n,t,e[t]);if(_a)for(var t of _a(e))$h.call(e,t)&&ga(n,t,e[t]);return n},us=(n,e)=>Fh(n,Lh(e));class Hh extends class{constructor(e){this.client=e}}{constructor(e){var t;super(e),t=this,this.name="engine",this.events=new(me()),this.initialized=!1,this.ignoredPayloadTypes=[1],this.init=(0,w.Z)(function*(){t.initialized||(yield t.cleanup(),t.registerRelayerEvents(),t.registerExpirerEvents(),t.client.core.pairing.register({methods:Object.keys(Sr)}),t.initialized=!0)}),this.connect=function(){var r=(0,w.Z)(function*(s){t.isInitialized();const o=us(yn({},s),{requiredNamespaces:s.requiredNamespaces||{},optionalNamespaces:s.optionalNamespaces||{}});yield t.isValidConnect(o);const{pairingTopic:d,requiredNamespaces:S,optionalNamespaces:B,sessionProperties:ce,relays:_e}=o;let ze,he=d,xt=!1;if(he&&(xt=t.client.core.pairing.pairings.get(he).active),!he||!xt){const{topic:pt,uri:Et}=yield t.client.core.pairing.create();he=pt,ze=Et}const Pe=yield t.client.core.crypto.generateKeyPair(),Ke=yn({requiredNamespaces:S,optionalNamespaces:B,relays:_e??[{protocol:"irn"}],proposer:{publicKey:Pe,metadata:t.client.metadata}},ce&&{sessionProperties:ce}),{reject:yt,resolve:lt,done:wt}=Yn(Ue.FIVE_MINUTES,pa);if(t.events.once(Ft("session_connect"),function(){var pt=(0,w.Z)(function*({error:Et,session:it}){if(Et)yt(Et);else if(it){it.self.publicKey=Pe;const Tt=us(yn({},it),{requiredNamespaces:it.requiredNamespaces,optionalNamespaces:it.optionalNamespaces});yield t.client.session.set(it.topic,Tt),yield t.setExpiry(it.topic,it.expiry),he&&(yield t.client.core.pairing.updateMetadata({topic:he,metadata:it.peer.metadata})),lt(Tt)}});return function(Et){return pt.apply(this,arguments)}}()),!he){const{message:pt}=xe("NO_MATCHING_KEY",`connect() pairing topic: ${he}`);throw new Error(pt)}const bt=yield t.sendRequest(he,"wc_sessionPropose",Ke),ht=xn(Ue.FIVE_MINUTES);return yield t.setProposal(bt,yn({id:bt,expiry:ht},Ke)),{uri:ze,approval:wt}});return function(s){return r.apply(this,arguments)}}(),this.pair=function(){var r=(0,w.Z)(function*(s){return t.isInitialized(),yield t.client.core.pairing.pair(s)});return function(s){return r.apply(this,arguments)}}(),this.approve=function(){var r=(0,w.Z)(function*(s){t.isInitialized(),yield t.isValidApprove(s);const{id:o,relayProtocol:d,namespaces:S,sessionProperties:B}=s,ce=t.client.proposal.get(o);let{pairingTopic:_e,proposer:he,requiredNamespaces:ze,optionalNamespaces:xt}=ce;br(ze)||(ze=function(n,e){const t=ni(n,"approve()");if(t)throw new Error(t.message);const r={};for(const[s,o]of Object.entries(n))r[s]={methods:o.methods,events:o.events,chains:o.accounts.map(d=>`${d.split(":")[0]}:${d.split(":")[1]}`)};return r}(S));const Pe=yield t.client.core.crypto.generateKeyPair(),Ke=he.publicKey,yt=yield t.client.core.crypto.generateSharedKey(Pe,Ke);_e&&o&&(yield t.client.core.pairing.updateMetadata({topic:_e,metadata:he.metadata}),yield t.sendResult(o,_e,{relay:{protocol:d??"irn"},responderPublicKey:Pe}),yield t.client.proposal.delete(o,Gt("USER_DISCONNECTED")),yield t.client.core.pairing.activate({topic:_e}));const lt=yn({relay:{protocol:d??"irn"},namespaces:S,requiredNamespaces:ze,optionalNamespaces:xt,controller:{publicKey:Pe,metadata:t.client.metadata},expiry:xn(oi)},B&&{sessionProperties:B});yield t.client.core.relayer.subscribe(yt);const wt=yield t.sendRequest(yt,"wc_sessionSettle",lt),{done:bt,resolve:ht,reject:pt}=Yn();t.events.once(Ft("session_approve",wt),({error:it})=>{it?pt(it):ht(t.client.session.get(yt))});const Et=us(yn({},lt),{topic:yt,acknowledged:!1,self:lt.controller,peer:{publicKey:he.publicKey,metadata:he.metadata},controller:Pe});return yield t.client.session.set(yt,Et),yield t.setExpiry(yt,xn(oi)),{topic:yt,acknowledged:bt}});return function(s){return r.apply(this,arguments)}}(),this.reject=function(){var r=(0,w.Z)(function*(s){t.isInitialized(),yield t.isValidReject(s);const{id:o,reason:d}=s,{pairingTopic:S}=t.client.proposal.get(o);S&&(yield t.sendError(o,S,d),yield t.client.proposal.delete(o,Gt("USER_DISCONNECTED")))});return function(s){return r.apply(this,arguments)}}(),this.update=function(){var r=(0,w.Z)(function*(s){t.isInitialized(),yield t.isValidUpdate(s);const{topic:o,namespaces:d}=s,S=yield t.sendRequest(o,"wc_sessionUpdate",{namespaces:d}),{done:B,resolve:ce,reject:_e}=Yn();return t.events.once(Ft("session_update",S),({error:he})=>{he?_e(he):ce()}),yield t.client.session.update(o,{namespaces:d}),{acknowledged:B}});return function(s){return r.apply(this,arguments)}}(),this.extend=function(){var r=(0,w.Z)(function*(s){t.isInitialized(),yield t.isValidExtend(s);const{topic:o}=s,d=yield t.sendRequest(o,"wc_sessionExtend",{}),{done:S,resolve:B,reject:ce}=Yn();return t.events.once(Ft("session_extend",d),({error:_e})=>{_e?ce(_e):B()}),yield t.setExpiry(o,xn(oi)),{acknowledged:S}});return function(s){return r.apply(this,arguments)}}(),this.request=function(){var r=(0,w.Z)(function*(s){t.isInitialized(),yield t.isValidRequest(s);const{chainId:o,request:d,topic:S,expiry:B}=s,ce=yield t.sendRequest(S,"wc_sessionRequest",{request:d,chainId:o},B),{done:_e,resolve:he,reject:ze}=Yn(B);return t.events.once(Ft("session_request",ce),({error:xt,result:Pe})=>{xt?ze(xt):he(Pe)}),t.client.events.emit("session_request_sent",{topic:S,request:d,chainId:o,id:ce}),yield _e()});return function(s){return r.apply(this,arguments)}}(),this.respond=function(){var r=(0,w.Z)(function*(s){t.isInitialized(),yield t.isValidRespond(s);const{topic:o,response:d}=s,{id:S}=d;(0,Re.isJsonRpcResult)(d)?yield t.sendResult(S,o,d.result):(0,Re.isJsonRpcError)(d)&&(yield t.sendError(S,o,d.error)),t.deletePendingSessionRequest(s.response.id,{message:"fulfilled",code:0})});return function(s){return r.apply(this,arguments)}}(),this.ping=function(){var r=(0,w.Z)(function*(s){t.isInitialized(),yield t.isValidPing(s);const{topic:o}=s;if(t.client.session.keys.includes(o)){const d=yield t.sendRequest(o,"wc_sessionPing",{}),{done:S,resolve:B,reject:ce}=Yn();t.events.once(Ft("session_ping",d),({error:_e})=>{_e?ce(_e):B()}),yield S()}else t.client.core.pairing.pairings.keys.includes(o)&&(yield t.client.core.pairing.ping({topic:o}))});return function(s){return r.apply(this,arguments)}}(),this.emit=function(){var r=(0,w.Z)(function*(s){t.isInitialized(),yield t.isValidEmit(s);const{topic:o,event:d,chainId:S}=s;yield t.sendRequest(o,"wc_sessionEvent",{event:d,chainId:S})});return function(s){return r.apply(this,arguments)}}(),this.disconnect=function(){var r=(0,w.Z)(function*(s){t.isInitialized(),yield t.isValidDisconnect(s);const{topic:o}=s;t.client.session.keys.includes(o)?(yield t.sendRequest(o,"wc_sessionDelete",Gt("USER_DISCONNECTED")),yield t.deleteSession(o)):yield t.client.core.pairing.disconnect({topic:o})});return function(s){return r.apply(this,arguments)}}(),this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(s=>function(n,e){const{requiredNamespaces:t}=e,r=Object.keys(n.namespaces),s=Object.keys(t);let o=!0;return!!Jn(s,r)&&(r.forEach(d=>{const{accounts:S,methods:B,events:ce}=n.namespaces[d],_e=ar(S),he=t[d];Jn(Bi(d,he),_e)&&Jn(he.methods,B)&&Jn(he.events,ce)||(o=!1)}),o)}(s,r))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.deleteSession=function(){var r=(0,w.Z)(function*(s,o){const{self:d}=t.client.session.get(s);yield t.client.core.relayer.unsubscribe(s),yield Promise.all([t.client.session.delete(s,Gt("USER_DISCONNECTED")),t.client.core.crypto.deleteKeyPair(d.publicKey),t.client.core.crypto.deleteSymKey(s),o?Promise.resolve():t.client.core.expirer.del(s)])});return function(s,o){return r.apply(this,arguments)}}(),this.deleteProposal=function(){var r=(0,w.Z)(function*(s,o){yield Promise.all([t.client.proposal.delete(s,Gt("USER_DISCONNECTED")),o?Promise.resolve():t.client.core.expirer.del(s)])});return function(s,o){return r.apply(this,arguments)}}(),this.deletePendingSessionRequest=function(){var r=(0,w.Z)(function*(s,o,d=!1){yield Promise.all([t.client.pendingRequest.delete(s,o),d?Promise.resolve():t.client.core.expirer.del(s)])});return function(s,o){return r.apply(this,arguments)}}(),this.setExpiry=function(){var r=(0,w.Z)(function*(s,o){t.client.session.keys.includes(s)&&(yield t.client.session.update(s,{expiry:o})),t.client.core.expirer.set(s,o)});return function(s,o){return r.apply(this,arguments)}}(),this.setProposal=function(){var r=(0,w.Z)(function*(s,o){yield t.client.proposal.set(s,o),t.client.core.expirer.set(s,o.expiry)});return function(s,o){return r.apply(this,arguments)}}(),this.setPendingSessionRequest=function(){var r=(0,w.Z)(function*(s){const o=Sr.wc_sessionRequest.req.ttl,{id:d,topic:S,params:B}=s;yield t.client.pendingRequest.set(d,{id:d,topic:S,params:B}),o&&t.client.core.expirer.set(d,xn(o))});return function(s){return r.apply(this,arguments)}}(),this.sendRequest=function(){var r=(0,w.Z)(function*(s,o,d,S){const B=(0,Re.formatJsonRpcRequest)(o,d),ce=yield t.client.core.crypto.encode(s,B),_e=Sr[o].req;return S&&(_e.ttl=S),t.client.core.history.set(s,B),t.client.core.relayer.publish(s,ce,_e),B.id});return function(s,o,d,S){return r.apply(this,arguments)}}(),this.sendResult=function(){var r=(0,w.Z)(function*(s,o,d){const S=(0,Re.formatJsonRpcResult)(s,d),B=yield t.client.core.crypto.encode(o,S),ce=yield t.client.core.history.get(o,s);t.client.core.relayer.publish(o,B,Sr[ce.request.method].res),yield t.client.core.history.resolve(S)});return function(s,o,d){return r.apply(this,arguments)}}(),this.sendError=function(){var r=(0,w.Z)(function*(s,o,d){const S=(0,Re.formatJsonRpcError)(s,d),B=yield t.client.core.crypto.encode(o,S),ce=yield t.client.core.history.get(o,s);t.client.core.relayer.publish(o,B,Sr[ce.request.method].res),yield t.client.core.history.resolve(S)});return function(s,o,d){return r.apply(this,arguments)}}(),this.cleanup=(0,w.Z)(function*(){const r=[],s=[];t.client.session.getAll().forEach(o=>{Mn(o.expiry)&&r.push(o.topic)}),t.client.proposal.getAll().forEach(o=>{Mn(o.expiry)&&s.push(o.id)}),yield Promise.all([...r.map(o=>t.deleteSession(o)),...s.map(o=>t.deleteProposal(o))])}),this.onRelayEventRequest=r=>{const{topic:s,payload:o}=r,d=o.method;switch(d){case"wc_sessionPropose":return this.onSessionProposeRequest(s,o);case"wc_sessionSettle":return this.onSessionSettleRequest(s,o);case"wc_sessionUpdate":return this.onSessionUpdateRequest(s,o);case"wc_sessionExtend":return this.onSessionExtendRequest(s,o);case"wc_sessionPing":return this.onSessionPingRequest(s,o);case"wc_sessionDelete":return this.onSessionDeleteRequest(s,o);case"wc_sessionRequest":return this.onSessionRequest(s,o);case"wc_sessionEvent":return this.onSessionEventRequest(s,o);default:return this.client.logger.info(`Unsupported request method ${d}`)}},this.onRelayEventResponse=function(){var r=(0,w.Z)(function*(s){const{topic:o,payload:d}=s,S=(yield t.client.core.history.get(o,d.id)).request.method;switch(S){case"wc_sessionPropose":return t.onSessionProposeResponse(o,d);case"wc_sessionSettle":return t.onSessionSettleResponse(o,d);case"wc_sessionUpdate":return t.onSessionUpdateResponse(o,d);case"wc_sessionExtend":return t.onSessionExtendResponse(o,d);case"wc_sessionPing":return t.onSessionPingResponse(o,d);case"wc_sessionRequest":return t.onSessionRequestResponse(o,d);default:return t.client.logger.info(`Unsupported response method ${S}`)}});return function(s){return r.apply(this,arguments)}}(),this.onSessionProposeRequest=function(){var r=(0,w.Z)(function*(s,o){const{params:d,id:S}=o;try{t.isValidConnect(yn({},o.params));const B=xn(Ue.FIVE_MINUTES),ce=yn({id:S,pairingTopic:s,expiry:B},d);yield t.setProposal(S,ce),t.client.events.emit("session_proposal",{id:S,params:ce})}catch(B){yield t.sendError(S,s,B),t.client.logger.error(B)}});return function(s,o){return r.apply(this,arguments)}}(),this.onSessionProposeResponse=function(){var r=(0,w.Z)(function*(s,o){const{id:d}=o;if((0,Re.isJsonRpcResult)(o)){const{result:S}=o;t.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:S});const B=t.client.proposal.get(d);t.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:B});const ce=B.proposer.publicKey;t.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:ce});const _e=S.responderPublicKey;t.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:_e});const he=yield t.client.core.crypto.generateSharedKey(ce,_e);t.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:he});const ze=yield t.client.core.relayer.subscribe(he);t.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:ze}),yield t.client.core.pairing.activate({topic:s})}else(0,Re.isJsonRpcError)(o)&&(yield t.client.proposal.delete(d,Gt("USER_DISCONNECTED")),t.events.emit(Ft("session_connect"),{error:o.error}))});return function(s,o){return r.apply(this,arguments)}}(),this.onSessionSettleRequest=function(){var r=(0,w.Z)(function*(s,o){const{id:d,params:S}=o;try{t.isValidSessionSettleRequest(S);const{relay:B,controller:ce,expiry:_e,namespaces:he,requiredNamespaces:ze,optionalNamespaces:xt,sessionProperties:Pe}=o.params,Ke=yn({topic:s,relay:B,expiry:_e,namespaces:he,acknowledged:!0,requiredNamespaces:ze,optionalNamespaces:xt,controller:ce.publicKey,self:{publicKey:"",metadata:t.client.metadata},peer:{publicKey:ce.publicKey,metadata:ce.metadata}},Pe&&{sessionProperties:Pe});yield t.sendResult(o.id,s,!0),t.events.emit(Ft("session_connect"),{session:Ke})}catch(B){yield t.sendError(d,s,B),t.client.logger.error(B)}});return function(s,o){return r.apply(this,arguments)}}(),this.onSessionSettleResponse=function(){var r=(0,w.Z)(function*(s,o){const{id:d}=o;(0,Re.isJsonRpcResult)(o)?(yield t.client.session.update(s,{acknowledged:!0}),t.events.emit(Ft("session_approve",d),{})):(0,Re.isJsonRpcError)(o)&&(yield t.client.session.delete(s,Gt("USER_DISCONNECTED")),t.events.emit(Ft("session_approve",d),{error:o.error}))});return function(s,o){return r.apply(this,arguments)}}(),this.onSessionUpdateRequest=function(){var r=(0,w.Z)(function*(s,o){const{params:d,id:S}=o;try{t.isValidUpdate(yn({topic:s},d)),yield t.client.session.update(s,{namespaces:d.namespaces}),yield t.sendResult(S,s,!0),t.client.events.emit("session_update",{id:S,topic:s,params:d})}catch(B){yield t.sendError(S,s,B),t.client.logger.error(B)}});return function(s,o){return r.apply(this,arguments)}}(),this.onSessionUpdateResponse=(r,s)=>{const{id:o}=s;(0,Re.isJsonRpcResult)(s)?this.events.emit(Ft("session_update",o),{}):(0,Re.isJsonRpcError)(s)&&this.events.emit(Ft("session_update",o),{error:s.error})},this.onSessionExtendRequest=function(){var r=(0,w.Z)(function*(s,o){const{id:d}=o;try{t.isValidExtend({topic:s}),yield t.setExpiry(s,xn(oi)),yield t.sendResult(d,s,!0),t.client.events.emit("session_extend",{id:d,topic:s})}catch(S){yield t.sendError(d,s,S),t.client.logger.error(S)}});return function(s,o){return r.apply(this,arguments)}}(),this.onSessionExtendResponse=(r,s)=>{const{id:o}=s;(0,Re.isJsonRpcResult)(s)?this.events.emit(Ft("session_extend",o),{}):(0,Re.isJsonRpcError)(s)&&this.events.emit(Ft("session_extend",o),{error:s.error})},this.onSessionPingRequest=function(){var r=(0,w.Z)(function*(s,o){const{id:d}=o;try{t.isValidPing({topic:s}),yield t.sendResult(d,s,!0),t.client.events.emit("session_ping",{id:d,topic:s})}catch(S){yield t.sendError(d,s,S),t.client.logger.error(S)}});return function(s,o){return r.apply(this,arguments)}}(),this.onSessionPingResponse=(r,s)=>{const{id:o}=s;setTimeout(()=>{(0,Re.isJsonRpcResult)(s)?this.events.emit(Ft("session_ping",o),{}):(0,Re.isJsonRpcError)(s)&&this.events.emit(Ft("session_ping",o),{error:s.error})},500)},this.onSessionDeleteRequest=function(){var r=(0,w.Z)(function*(s,o){const{id:d}=o;try{t.isValidDisconnect({topic:s,reason:o.params}),t.client.core.relayer.once("relayer_publish",(0,w.Z)(function*(){yield t.deleteSession(s)})),yield t.sendResult(d,s,!0),t.client.events.emit("session_delete",{id:d,topic:s})}catch(S){yield t.sendError(d,s,S),t.client.logger.error(S)}});return function(s,o){return r.apply(this,arguments)}}(),this.onSessionRequest=function(){var r=(0,w.Z)(function*(s,o){const{id:d,params:S}=o;try{t.isValidRequest(yn({topic:s},S)),yield t.setPendingSessionRequest({id:d,topic:s,params:S}),t.client.events.emit("session_request",{id:d,topic:s,params:S})}catch(B){yield t.sendError(d,s,B),t.client.logger.error(B)}});return function(s,o){return r.apply(this,arguments)}}(),this.onSessionRequestResponse=(r,s)=>{const{id:o}=s;(0,Re.isJsonRpcResult)(s)?this.events.emit(Ft("session_request",o),{result:s.result}):(0,Re.isJsonRpcError)(s)&&this.events.emit(Ft("session_request",o),{error:s.error})},this.onSessionEventRequest=function(){var r=(0,w.Z)(function*(s,o){const{id:d,params:S}=o;try{t.isValidEmit(yn({topic:s},S)),t.client.events.emit("session_event",{id:d,topic:s,params:S})}catch(B){yield t.sendError(d,s,B),t.client.logger.error(B)}});return function(s,o){return r.apply(this,arguments)}}(),this.isValidConnect=function(){var r=(0,w.Z)(function*(s){if(!cn(s)){const{message:_e}=xe("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(s)}`);throw new Error(_e)}const{pairingTopic:o,requiredNamespaces:d,optionalNamespaces:S,sessionProperties:B,relays:ce}=s;if(sn(o)||(yield t.isValidPairingTopic(o)),!function(n,e){let t=!1;return n?n&&mr(n)&&n.length&&n.forEach(r=>{t=Co(r)}):t=!0,t}(ce)){const{message:_e}=xe("MISSING_OR_INVALID",`connect() relays: ${ce}`);throw new Error(_e)}!sn(d)&&0!==br(d)&&t.validateNamespaces(d,"requiredNamespaces"),!sn(S)&&0!==br(S)&&t.validateNamespaces(S,"optionalNamespaces"),sn(B)||t.validateSessionProps(B,"sessionProperties")});return function(s){return r.apply(this,arguments)}}(),this.validateNamespaces=(r,s)=>{const o=function(n,e,t){let r=null;if(n&&br(n)){const s=No(n,e);s&&(r=s);const o=function(n,e){let t=null;return Object.entries(n).forEach(([r,s])=>{if(t)return;const o=function(n,e,t){let r=null;return mr(e)?e.forEach(s=>{r||(!Qi(s)||!s.includes(n))&&(r=Gt("UNSUPPORTED_CHAINS",`${t}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):r=Gt("UNSUPPORTED_CHAINS",`${t}, chains ${e} should be an array of strings conforming to "namespace:chainId" format`),r}(r,Bi(r,s),`${e} requiredNamespace`);o&&(t=o)}),t}(n,e);o&&(r=o)}else r=xe("MISSING_OR_INVALID",`${e}, ${t} should be an object with data`);return r}(r,"connect()",s);if(o)throw new Error(o.message)},this.isValidApprove=function(){var r=(0,w.Z)(function*(s){if(!cn(s))throw new Error(xe("MISSING_OR_INVALID",`approve() params: ${s}`).message);const{id:o,namespaces:d,relayProtocol:S,sessionProperties:B}=s;yield t.isValidProposalId(o);const ce=t.client.proposal.get(o),_e=ni(d,"approve()");if(_e)throw new Error(_e.message);const he=To(ce.requiredNamespaces,d,"approve()");if(he)throw new Error(he.message);if(!Wt(S,!0)){const{message:ze}=xe("MISSING_OR_INVALID",`approve() relayProtocol: ${S}`);throw new Error(ze)}sn(B)||t.validateSessionProps(B,"sessionProperties")});return function(s){return r.apply(this,arguments)}}(),this.isValidReject=function(){var r=(0,w.Z)(function*(s){if(!cn(s)){const{message:S}=xe("MISSING_OR_INVALID",`reject() params: ${s}`);throw new Error(S)}const{id:o,reason:d}=s;if(yield t.isValidProposalId(o),!((n=d)&&"object"==typeof n&&n.code&&Xi(n.code,!1)&&n.message&&Wt(n.message,!1))){const{message:S}=xe("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(d)}`);throw new Error(S)}var n});return function(s){return r.apply(this,arguments)}}(),this.isValidSessionSettleRequest=r=>{if(!cn(r)){const{message:_e}=xe("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(_e)}const{relay:s,controller:o,namespaces:d,expiry:S}=r;if(!Co(s)){const{message:_e}=xe("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(_e)}const B=function(n,e){let t=null;return Wt(n?.publicKey,!1)||(t=xe("MISSING_OR_INVALID","onSessionSettleRequest() controller public key should be a string")),t}(o);if(B)throw new Error(B.message);const ce=ni(d,"onSessionSettleRequest()");if(ce)throw new Error(ce.message);if(Mn(S)){const{message:_e}=xe("EXPIRED","onSessionSettleRequest()");throw new Error(_e)}},this.isValidUpdate=function(){var r=(0,w.Z)(function*(s){if(!cn(s)){const{message:_e}=xe("MISSING_OR_INVALID",`update() params: ${s}`);throw new Error(_e)}const{topic:o,namespaces:d}=s;yield t.isValidSessionTopic(o);const S=t.client.session.get(o),B=ni(d,"update()");if(B)throw new Error(B.message);const ce=To(S.requiredNamespaces,d,"update()");if(ce)throw new Error(ce.message)});return function(s){return r.apply(this,arguments)}}(),this.isValidExtend=function(){var r=(0,w.Z)(function*(s){if(!cn(s)){const{message:d}=xe("MISSING_OR_INVALID",`extend() params: ${s}`);throw new Error(d)}const{topic:o}=s;yield t.isValidSessionTopic(o)});return function(s){return r.apply(this,arguments)}}(),this.isValidRequest=function(){var r=(0,w.Z)(function*(s){if(!cn(s)){const{message:_e}=xe("MISSING_OR_INVALID",`request() params: ${s}`);throw new Error(_e)}const{topic:o,request:d,chainId:S,expiry:B}=s;yield t.isValidSessionTopic(o);const{namespaces:ce}=t.client.session.get(o);if(!Ao(ce,S)){const{message:_e}=xe("MISSING_OR_INVALID",`request() chainId: ${S}`);throw new Error(_e)}if(sn(n=d)||!Wt(n.method,!1)){const{message:_e}=xe("MISSING_OR_INVALID",`request() ${JSON.stringify(d)}`);throw new Error(_e)}var n;if(!function(n,e,t){return!!Wt(t,!1)&&function(n,e){const t=[];return Object.values(n).forEach(r=>{ar(r.accounts).includes(e)&&t.push(...r.methods)}),t}(n,e).includes(t)}(ce,S,d.method)){const{message:_e}=xe("MISSING_OR_INVALID",`request() method: ${d.method}`);throw new Error(_e)}if(B&&!function(n,e){return Xi(n,!1)&&n<=e.max&&n>=e.min}(B,cs)){const{message:_e}=xe("MISSING_OR_INVALID",`request() expiry: ${B}. Expiry must be a number (in seconds) between ${cs.min} and ${cs.max}`);throw new Error(_e)}});return function(s){return r.apply(this,arguments)}}(),this.isValidRespond=function(){var r=(0,w.Z)(function*(s){if(!cn(s)){const{message:S}=xe("MISSING_OR_INVALID",`respond() params: ${s}`);throw new Error(S)}const{topic:o,response:d}=s;if(yield t.isValidSessionTopic(o),sn(n=d)||sn(n.result)&&sn(n.error)||!Xi(n.id,!1)||!Wt(n.jsonrpc,!1)){const{message:S}=xe("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(d)}`);throw new Error(S)}var n});return function(s){return r.apply(this,arguments)}}(),this.isValidPing=function(){var r=(0,w.Z)(function*(s){if(!cn(s)){const{message:d}=xe("MISSING_OR_INVALID",`ping() params: ${s}`);throw new Error(d)}const{topic:o}=s;yield t.isValidSessionOrPairingTopic(o)});return function(s){return r.apply(this,arguments)}}(),this.isValidEmit=function(){var r=(0,w.Z)(function*(s){if(!cn(s)){const{message:ce}=xe("MISSING_OR_INVALID",`emit() params: ${s}`);throw new Error(ce)}const{topic:o,event:d,chainId:S}=s;yield t.isValidSessionTopic(o);const{namespaces:B}=t.client.session.get(o);if(!Ao(B,S)){const{message:ce}=xe("MISSING_OR_INVALID",`emit() chainId: ${S}`);throw new Error(ce)}if(sn(n=d)||!Wt(n.name,!1)){const{message:ce}=xe("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(d)}`);throw new Error(ce)}var n;if(!function(n,e,t){return!!Wt(t,!1)&&function(n,e){const t=[];return Object.values(n).forEach(r=>{ar(r.accounts).includes(e)&&t.push(...r.events)}),t}(n,e).includes(t)}(B,S,d.name)){const{message:ce}=xe("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(d)}`);throw new Error(ce)}});return function(s){return r.apply(this,arguments)}}(),this.isValidDisconnect=function(){var r=(0,w.Z)(function*(s){if(!cn(s)){const{message:d}=xe("MISSING_OR_INVALID",`disconnect() params: ${s}`);throw new Error(d)}const{topic:o}=s;yield t.isValidSessionOrPairingTopic(o)});return function(s){return r.apply(this,arguments)}}(),this.validateSessionProps=(r,s)=>{Object.values(r).forEach(o=>{if(!Wt(o,!1)){const{message:d}=xe("MISSING_OR_INVALID",`${s} must be in Record<string, string> format. Received: ${JSON.stringify(o)}`);throw new Error(d)}})}}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){var e=this;this.client.core.relayer.on("relayer_message",function(){var t=(0,w.Z)(function*(r){const{topic:s,message:o}=r;if(e.ignoredPayloadTypes.includes(e.client.core.crypto.getPayloadType(o)))return;const d=yield e.client.core.crypto.decode(s,o);(0,Re.isJsonRpcRequest)(d)?(e.client.core.history.set(s,d),e.onRelayEventRequest({topic:s,payload:d})):(0,Re.isJsonRpcResponse)(d)&&(yield e.client.core.history.resolve(d),e.onRelayEventResponse({topic:s,payload:d}))});return function(r){return t.apply(this,arguments)}}())}registerExpirerEvents(){var e=this;this.client.core.expirer.on(gn_expired,function(){var t=(0,w.Z)(function*(r){const{topic:s,id:o}=Oo(r.target);if(o&&e.client.pendingRequest.keys.includes(o))return yield e.deletePendingSessionRequest(o,xe("EXPIRED"),!0);s?e.client.session.keys.includes(s)&&(yield e.deleteSession(s,!0),e.client.events.emit("session_expire",{topic:s})):o&&(yield e.deleteProposal(o,!0),e.client.events.emit("proposal_expire",{id:o}))});return function(r){return t.apply(this,arguments)}}())}isValidPairingTopic(e){if(!Wt(e,!1)){const{message:t}=xe("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=xe("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(Mn(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=xe("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}isValidSessionTopic(e){var t=this;return(0,w.Z)(function*(){if(!Wt(e,!1)){const{message:r}=xe("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(!t.client.session.keys.includes(e)){const{message:r}=xe("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(Mn(t.client.session.get(e).expiry)){yield t.deleteSession(e);const{message:r}=xe("EXPIRED",`session topic: ${e}`);throw new Error(r)}})()}isValidSessionOrPairingTopic(e){var t=this;return(0,w.Z)(function*(){if(t.client.session.keys.includes(e))yield t.isValidSessionTopic(e);else{if(!t.client.core.pairing.pairings.keys.includes(e)){if(Wt(e,!1)){const{message:r}=xe("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}{const{message:r}=xe("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}t.isValidPairingTopic(e)}})()}isValidProposalId(e){var t=this;return(0,w.Z)(function*(){if("number"!=typeof e){const{message:r}=xe("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!t.client.proposal.keys.includes(e)){const{message:r}=xe("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(Mn(t.client.proposal.get(e).expiry)){yield t.deleteProposal(e);const{message:r}=xe("EXPIRED",`proposal id: ${e}`);throw new Error(r)}})()}}class zh extends si{constructor(e,t){super(e,t,"proposal",os),this.core=e,this.logger=t}}class Bh extends si{constructor(e,t){super(e,t,"session",os),this.core=e,this.logger=t}}class Kh extends si{constructor(e,t){super(e,t,"request",os,r=>r.id),this.core=e,this.logger=t}}class ls extends class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}}{constructor(e){var t;super(e),t=this,this.protocol="wc",this.version=2,this.name="client",this.events=new ye.EventEmitter,this.on=(s,o)=>this.events.on(s,o),this.once=(s,o)=>this.events.once(s,o),this.off=(s,o)=>this.events.off(s,o),this.removeListener=(s,o)=>this.events.removeListener(s,o),this.removeAllListeners=s=>this.events.removeAllListeners(s),this.connect=function(){var s=(0,w.Z)(function*(o){try{return yield t.engine.connect(o)}catch(d){throw t.logger.error(d.message),d}});return function(o){return s.apply(this,arguments)}}(),this.pair=function(){var s=(0,w.Z)(function*(o){try{return yield t.engine.pair(o)}catch(d){throw t.logger.error(d.message),d}});return function(o){return s.apply(this,arguments)}}(),this.approve=function(){var s=(0,w.Z)(function*(o){try{return yield t.engine.approve(o)}catch(d){throw t.logger.error(d.message),d}});return function(o){return s.apply(this,arguments)}}(),this.reject=function(){var s=(0,w.Z)(function*(o){try{return yield t.engine.reject(o)}catch(d){throw t.logger.error(d.message),d}});return function(o){return s.apply(this,arguments)}}(),this.update=function(){var s=(0,w.Z)(function*(o){try{return yield t.engine.update(o)}catch(d){throw t.logger.error(d.message),d}});return function(o){return s.apply(this,arguments)}}(),this.extend=function(){var s=(0,w.Z)(function*(o){try{return yield t.engine.extend(o)}catch(d){throw t.logger.error(d.message),d}});return function(o){return s.apply(this,arguments)}}(),this.request=function(){var s=(0,w.Z)(function*(o){try{return yield t.engine.request(o)}catch(d){throw t.logger.error(d.message),d}});return function(o){return s.apply(this,arguments)}}(),this.respond=function(){var s=(0,w.Z)(function*(o){try{return yield t.engine.respond(o)}catch(d){throw t.logger.error(d.message),d}});return function(o){return s.apply(this,arguments)}}(),this.ping=function(){var s=(0,w.Z)(function*(o){try{return yield t.engine.ping(o)}catch(d){throw t.logger.error(d.message),d}});return function(o){return s.apply(this,arguments)}}(),this.emit=function(){var s=(0,w.Z)(function*(o){try{return yield t.engine.emit(o)}catch(d){throw t.logger.error(d.message),d}});return function(o){return s.apply(this,arguments)}}(),this.disconnect=function(){var s=(0,w.Z)(function*(o){try{return yield t.engine.disconnect(o)}catch(d){throw t.logger.error(d.message),d}});return function(o){return s.apply(this,arguments)}}(),this.find=s=>{try{return this.engine.find(s)}catch(o){throw this.logger.error(o.message),o}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(s){throw this.logger.error(s.message),s}},this.name=e?.name||"client",this.metadata=e?.metadata||(0,Au.D)()||{name:"",description:"",url:"",icons:[""]};const r=typeof e?.logger<"u"&&"string"!=typeof e?.logger?e.logger:qr()((0,_t.getDefaultLoggerOptions)({level:e?.logger||"error"}));this.core=e?.core||new Ch(e),this.logger=(0,_t.generateChildLogger)(r,this.name),this.session=new Bh(this.core,this.logger),this.proposal=new zh(this.core,this.logger),this.pendingRequest=new Kh(this.core,this.logger),this.engine=new Hh(this)}static init(e){return(0,w.Z)(function*(){const t=new ls(e);return yield t.initialize(),t})()}get context(){return(0,_t.getLoggerContext)(this.logger)}get pairing(){return this.core.pairing.pairings}initialize(){var e=this;return(0,w.Z)(function*(){e.logger.trace("Initialized");try{yield e.core.start(),yield e.session.init(),yield e.proposal.init(),yield e.pendingRequest.init(),yield e.engine.init(),e.logger.info("SignClient Initialization Success")}catch(t){throw e.logger.info("SignClient Initialization Failure"),e.logger.error(t.message),t}})()}}F(7092),F(47274),F(49290);const Ip={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}};function zn(n,e){const{message:t,code:r}=Ip[n];return{message:e?`${t} ${e}`:t,code:r}}class ur extends Re.IJsonRpcProvider{constructor(e){super(e),this.events=new ye.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}connect(e=this.connection){var t=this;return(0,w.Z)(function*(){yield t.open(e)})()}disconnect(){var e=this;return(0,w.Z)(function*(){yield e.close()})()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}request(e,t){var r=this;return(0,w.Z)(function*(){return r.requestStrict((0,Re.formatJsonRpcRequest)(e.method,e.params||[],(0,Re.getBigIntRpcId)().toString()),t)})()}requestStrict(e,t){var r=this;return(0,w.Z)(function*(){return new Promise(function(){var s=(0,w.Z)(function*(o,d){if(!r.connection.connected)try{yield r.open()}catch(S){d(S)}r.events.on(`${e.id}`,S=>{(0,Re.isJsonRpcError)(S)?d(S.error):o(S.result)});try{yield r.connection.send(e,t)}catch(S){d(S)}});return function(o,d){return s.apply(this,arguments)}}())})()}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),(0,Re.isJsonRpcResponse)(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&3e3===e.code&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}open(e=this.connection){var t=this;return(0,w.Z)(function*(){t.connection===e&&t.connection.connected||(t.connection.connected&&t.close(),"string"==typeof e&&(yield t.connection.open(e),e=t.connection),t.connection=t.setConnection(e),yield t.connection.open(),t.registerEventListeners(),t.events.emit("connect"))})()}close(){var e=this;return(0,w.Z)(function*(){yield e.connection.close()})()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}var $p=F(75630),ja=F.n($p);function Fa(n){return"string"==typeof n?n:(n=>JSON.stringify(n,(e,t)=>"bigint"==typeof t?t.toString()+"n":t))(n)||""}const La={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"};class $a{constructor(e){if(this.url=e,this.events=new ye.EventEmitter,this.isAvailable=!1,this.registering=!1,!(0,Re.isHttpUrl)(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}open(e=this.url){var t=this;return(0,w.Z)(function*(){yield t.register(e)})()}close(){var e=this;return(0,w.Z)(function*(){if(!e.isAvailable)throw new Error("Connection already closed");e.onClose()})()}send(e,t){var r=this;return(0,w.Z)(function*(){r.isAvailable||(yield r.register());try{const s=Fa(e),d=yield(yield ja()(r.url,Object.assign(Object.assign({},La),{body:s}))).json();r.onPayload({data:d})}catch(s){r.onError(e.id,s)}})()}register(e=this.url){var t=this;return(0,w.Z)(function*(){if(!(0,Re.isHttpUrl)(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(t.registering){const r=t.events.getMaxListeners();return(t.events.listenerCount("register_error")>=r||t.events.listenerCount("open")>=r)&&t.events.setMaxListeners(r+1),new Promise((s,o)=>{t.events.once("register_error",d=>{t.resetMaxListeners(),o(d)}),t.events.once("open",()=>{if(t.resetMaxListeners(),void 0===t.isAvailable)return o(new Error("HTTP connection is missing or invalid"));s()})})}t.url=e,t.registering=!0;try{const r=Fa({id:1,jsonrpc:"2.0",method:"test",params:[]});yield ja()(e,Object.assign(Object.assign({},La),{body:r})),t.onOpen()}catch(r){const s=t.parseError(r);throw t.events.emit("register_error",s),t.onClose(),s}})()}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(void 0===e.data)return;const t="string"==typeof e.data?function(n){if("string"!=typeof n)throw new Error("Cannot safe json parse value of type "+typeof n);try{return(n=>{const t=n.replace(/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,'$1"$2n"$3');return JSON.parse(t,(r,s)=>"string"==typeof s&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)})(n)}catch{return n}}(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const r=this.parseError(t),s=r.message||r.toString(),o=(0,Re.formatJsonRpcError)(e,s);this.events.emit("payload",o)}parseError(e,t=this.url){return(0,Re.CX)(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}}const Ir=$a,za="wc@2:universal_provider:";var Gp=Object.defineProperty,Ba=Object.getOwnPropertySymbols,Wp=Object.prototype.hasOwnProperty,kp=Object.prototype.propertyIsEnumerable,Ka=(n,e,t)=>e in n?Gp(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ws=(n,e)=>{for(var t in e||(e={}))Wp.call(e,t)&&Ka(n,t,e[t]);if(Ba)for(var t of Ba(e))kp.call(e,t)&&Ka(n,t,e[t]);return n};function Nn(n,e,t){let r;const s=Es(n);return e.rpcMap&&(r=e.rpcMap[s]),r||(r=`https://rpc.walletconnect.com/v1?chainId=eip155:${s}&projectId=${t}`),r}function Es(n){return n.includes("eip155")?Number(n.split(":")[1]):Number(n)}function Va(n){var e,t,r,s;const o={};if(!function(n){return Object.getPrototypeOf(n)===Object.prototype&&Object.keys(n).length}(n))return o;for(const[d,S]of Object.entries(n)){const B=Za(d)?[d]:S.chains,ce=S.methods||[],_e=S.events||[],he=qa(d);o[he]={chains:Ss(B,null==(e=o[he])?void 0:e.chains),methods:Ss(ce,null==(t=o[he])?void 0:t.methods),events:Ss(_e,null==(r=o[he])?void 0:r.events),rpcMap:ws(ws({},null==(s=o[he])?void 0:s.rpcMap),S.rpcMap)}}return o}function Za(n){return n.includes(":")}function qa(n){return Za(n)?n.split(":")[0]:n}function Ss(n=[],e=[]){return[...new Set([...n,...e])]}const lr=(n,e)=>{const t=r=>{r.request!==e.request||r.topic!==e.topic||(n.events.removeListener("session_request_sent",t),function(n){if(typeof window<"u")try{const e=window.localStorage.getItem("WALLETCONNECT_DEEPLINK_CHOICE");if(e){const r=JSON.parse(e)?.href;if("string"==typeof r){r.endsWith("/")&&r.slice(0,-1);const s=`${r}/wc?requestId=${n.id}&sessionTopic=${n.topic}`;window.open(s,"_self","noreferrer noopener")}}}catch(e){console.error(e)}}(e))};n.on("session_request_sent",t)};class t_{constructor(e){this.name="eip155",this.namespace=e.namespace,this.client=e.client,this.events=e.events,this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}request(e){var t=this;return(0,w.Z)(function*(){var r;switch(e.request.method){case"eth_requestAccounts":case"eth_accounts":return t.getAccounts();case"wallet_switchEthereumChain":return t.handleSwitchChain(e.request.params?null==(r=e.request.params[0])?void 0:r.chainId:"0x0"),null;case"eth_chainId":return parseInt(t.getDefaultChain())}return t.namespace.methods.includes(e.request.method)?(lr(t.client,e),yield t.client.request(e)):t.getHttpProvider().request(e.request)})()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){const r=Es(e);if(!this.httpProviders[r]){const s=t||Nn(`${this.name}:${r}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${r}`);this.setHttpProvider(r,s)}this.chainId=r,this.events.emit("default_chain_changed",`${this.name}:${r}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const r=t||Nn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new ur(new $a(r))}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;const s=Es(t);e[s]=this.createHttpProvider(s,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}handleSwitchChain(e){const t=parseInt(e,16);(function(n,e){if(!e.includes(n))throw new Error(`Chain '${n}' not approved. Please use one of the following: ${e.toString()}`)})(`${this.name}:${t}`,this.namespace.chains),this.setDefaultChain(`${t}`)}}class n_{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?(lr(this.client,e),this.client.request(e)):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const r=t||Nn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit("default_chain_changed",`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;e[t]=this.createHttpProvider(t,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||Nn(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new ur(new Ir(r))}}class r_{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?(lr(this.client,e),this.client.request(e)):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const r=t||Nn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit("default_chain_changed",`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;e[t]=this.createHttpProvider(t,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||Nn(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new ur(new Ir(r))}}class i_{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?(lr(this.client,e),this.client.request(e)):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const r=t||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit("default_chain_changed",`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{const r=this.getCardanoRPCUrl(t);e[t]=this.createHttpProvider(t,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){const t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||this.getCardanoRPCUrl(e);return typeof r>"u"?void 0:new ur(new Ir(r))}}class s_{constructor(e){this.name="elrond",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?(lr(this.client,e),this.client.request(e)):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const r=t||Nn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit("default_chain_changed",`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;e[t]=this.createHttpProvider(t,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||Nn(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new ur(new Ir(r))}}class o_{constructor(e){this.name="multiversx",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?(lr(this.client,e),this.client.request(e)):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const r=t||Nn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit("default_chain_changed",`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;e[t]=this.createHttpProvider(t,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||Nn(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new ur(new Ir(r))}}var a_=Object.defineProperty,c_=Object.defineProperties,u_=Object.getOwnPropertyDescriptors,Ga=Object.getOwnPropertySymbols,l_=Object.prototype.hasOwnProperty,f_=Object.prototype.propertyIsEnumerable,Wa=(n,e,t)=>e in n?a_(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ui=(n,e)=>{for(var t in e||(e={}))l_.call(e,t)&&Wa(n,t,e[t]);if(Ga)for(var t of Ga(e))f_.call(e,t)&&Wa(n,t,e[t]);return n},Ds=(n,e)=>c_(n,u_(e));class Os{constructor(e){this.events=new(me()),this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.providerOpts=e,this.logger=typeof e?.logger<"u"&&"string"!=typeof e?.logger?e.logger:qr()((0,_t.getDefaultLoggerOptions)({level:e?.logger||"error"}))}static init(e){return(0,w.Z)(function*(){const t=new Os(e);return yield t.initialize(),t})()}request(e,t){var r=this;return(0,w.Z)(function*(){const[s,o]=r.validateChain(t);if(!r.session)throw new Error("Please call connect() before request()");return yield r.getProvider(s).request({request:ui({},e),chainId:`${s}:${o}`,topic:r.session.topic})})()}sendAsync(e,t,r){this.request(e,r).then(s=>t(null,s)).catch(s=>t(s,void 0))}enable(){var e=this;return(0,w.Z)(function*(){if(!e.client)throw new Error("Sign Client not initialized");return e.session||(yield e.connect({namespaces:e.namespaces,optionalNamespaces:e.optionalNamespaces,sessionProperties:e.sessionProperties})),yield e.requestAccounts()})()}disconnect(){var e=this;return(0,w.Z)(function*(){var t;if(!e.session)throw new Error("Please call connect() before enable()");yield e.client.disconnect({topic:null==(t=e.session)?void 0:t.topic,reason:zn("USER_DISCONNECTED")}),yield e.cleanup()})()}connect(e){var t=this;return(0,w.Z)(function*(){if(!t.client)throw new Error("Sign Client not initialized");if(t.setNamespaces(e),yield t.cleanupPendingPairings(),!e.skipPairing)return yield t.pair(e.pairingTopic)})()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}pair(e){var t=this;return(0,w.Z)(function*(){t.shouldAbortPairingAttempt=!1;let r=0;do{if(t.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(r>=t.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:s,approval:o}=yield t.client.connect({pairingTopic:e,requiredNamespaces:t.namespaces,optionalNamespaces:t.optionalNamespaces,sessionProperties:t.sessionProperties});s&&(t.uri=s,t.events.emit("display_uri",s)),yield o().then(d=>{t.session=d}).catch(d=>{if(d.message!==pa)throw d;r++})}while(!t.session);return t.onConnect(),t.session})()}setDefaultChain(e,t){try{const[r,s]=this.validateChain(e);this.getProvider(r).setDefaultChain(s,t)}catch(r){if(!/Please call connect/.test(r.message))throw r}}cleanupPendingPairings(e={}){var t=this;return(0,w.Z)(function*(){t.logger.info("Cleaning up inactive pairings...");const r=t.client.pairing.getAll();if(function(n,e){return!!Array.isArray(n)&&(!(typeof e<"u"&&n.length)||n.every(e))}(r)){for(const s of r)e.deletePairings?t.client.core.expirer.set(s.topic,0):yield t.client.core.relayer.subscriber.unsubscribe(s.topic);t.logger.info(`Inactive pairings cleared: ${r.length}`)}})()}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}checkStorage(){var e=this;return(0,w.Z)(function*(){e.namespaces=(yield e.getFromStore("namespaces"))||{},e.optionalNamespaces=(yield e.getFromStore("optionalNamespaces"))||{},e.client.session.length&&(e.session=e.client.session.get(e.client.session.keys[e.client.session.keys.length-1]),e.createProviders())})()}initialize(){var e=this;return(0,w.Z)(function*(){e.logger.trace("Initialized"),yield e.createClient(),yield e.checkStorage(),e.registerEventListeners()})()}createClient(){var e=this;return(0,w.Z)(function*(){e.client=e.providerOpts.client||(yield ls.init({logger:e.providerOpts.logger||"error",relayUrl:e.providerOpts.relayUrl||"wss://relay.walletconnect.com",projectId:e.providerOpts.projectId,metadata:e.providerOpts.metadata,storageOptions:e.providerOpts.storageOptions,name:e.providerOpts.name})),e.logger.trace("SignClient Initialized")})()}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");[...new Set(Object.keys(this.session.namespaces).map(e=>qa(e)))].forEach(e=>{if(!this.session)return;const t=function(n,e){const t=Object.keys(e.namespaces).filter(s=>s.includes(n));if(!t.length)return[];const r=[];return t.forEach(s=>{r.push(...e.namespaces[s].accounts)}),r}(e,this.session),r=t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`),s=function(n,e={}){const t=Va(n),r=Va(e);return ws({},Object.assign(t,r))}(this.namespaces,this.optionalNamespaces),o=Ds(ui({},s[e]),{accounts:t,chains:r});switch(e){case"eip155":this.rpcProviders[e]=new t_({client:this.client,namespace:o,events:this.events});break;case"solana":this.rpcProviders[e]=new n_({client:this.client,namespace:o,events:this.events});break;case"cosmos":this.rpcProviders[e]=new r_({client:this.client,namespace:o,events:this.events});break;case"polkadot":break;case"cip34":this.rpcProviders[e]=new i_({client:this.client,namespace:o,events:this.events});break;case"elrond":this.rpcProviders[e]=new s_({client:this.client,namespace:o,events:this.events});break;case"multiversx":this.rpcProviders[e]=new o_({client:this.client,namespace:o,events:this.events})}})}registerEventListeners(){var e=this;if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",t=>{this.events.emit("session_ping",t)}),this.client.on("session_event",t=>{const{params:r}=t,{event:s}=r;"accountsChanged"===s.name?this.events.emit("accountsChanged",s.data):"chainChanged"===s.name?this.onChainChanged(r.chainId):this.events.emit(s.name,s.data),this.events.emit("session_event",t)}),this.client.on("session_update",({topic:t,params:r})=>{var s;const{namespaces:o}=r,d=null==(s=this.client)?void 0:s.session.get(t);this.session=Ds(ui({},d),{namespaces:o}),this.onSessionUpdate(),this.events.emit("session_update",{topic:t,params:r})}),this.client.on("session_delete",function(){var t=(0,w.Z)(function*(r){yield e.cleanup(),e.events.emit("session_delete",r),e.events.emit("disconnect",Ds(ui({},zn("USER_DISCONNECTED")),{data:r.topic}))});return function(r){return t.apply(this,arguments)}}()),this.on("default_chain_changed",t=>{this.onChainChanged(t,!0)})}getProvider(e){if(!this.rpcProviders[e])throw new Error(`Provider not found: ${e}`);return this.rpcProviders[e]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace(null==(t=this.session)?void 0:t.namespaces[e])})}setNamespaces(e){const{namespaces:t,optionalNamespaces:r,sessionProperties:s}=e;if(!t||!Object.keys(t).length)throw new Error("Namespaces must be not empty");this.namespaces=t,this.optionalNamespaces=r,this.sessionProperties=s,this.persist("namespaces",t),this.persist("optionalNamespaces",r)}validateChain(e){const[t,r]=e?.split(":")||["",""];if(t&&!Object.keys(this.namespaces).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&r)return[t,r];const s=Object.keys(this.namespaces)[0];return[s,this.rpcProviders[s].getDefaultChain()]}requestAccounts(){var e=this;return(0,w.Z)(function*(){const[t]=e.validateChain();return yield e.getProvider(t).requestAccounts()})()}onChainChanged(e,t=!1){const[r,s]=this.validateChain(e);t||this.getProvider(r).setDefaultChain(s),this.namespaces[r].defaultChain=s,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",s)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}cleanup(){var e=this;return(0,w.Z)(function*(){e.session=void 0,yield e.cleanupPendingPairings({deletePairings:!0})})()}persist(e,t){this.client.core.storage.setItem(`${za}/${e}`,t)}getFromStore(e){var t=this;return(0,w.Z)(function*(){return yield t.client.core.storage.getItem(`${za}/${e}`)})()}}const d_=Os,li=["eth_sendTransaction","personal_sign"],y_=["eth_accounts","eth_requestAccounts","eth_call","eth_getBalance","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],fi=["chainChanged","accountsChanged"],m_=["message","disconnect","connect"];var b_=Object.defineProperty,v_=Object.defineProperties,w_=Object.getOwnPropertyDescriptors,ka=Object.getOwnPropertySymbols,E_=Object.prototype.hasOwnProperty,S_=Object.prototype.propertyIsEnumerable,Ja=(n,e,t)=>e in n?b_(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,xs=(n,e)=>{for(var t in e||(e={}))E_.call(e,t)&&Ja(n,t,e[t]);if(ka)for(var t of ka(e))S_.call(e,t)&&Ja(n,t,e[t]);return n},Ya=(n,e)=>v_(n,w_(e));function Is(n){return Number(n[0].split(":")[1])}function Ps(n){return`0x${n.toString(16)}`}class di{constructor(){this.events=new ye.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY="wc@2:ethereum_provider:",this.on=(e,t)=>(this.events.on(e,t),this),this.once=(e,t)=>(this.events.once(e,t),this),this.removeListener=(e,t)=>(this.events.removeListener(e,t),this),this.off=(e,t)=>(this.events.off(e,t),this),this.parseAccount=e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e,this.signer={},this.rpc={}}static init(e){return(0,w.Z)(function*(){const t=new di;return yield t.initialize(e),t})()}request(e){var t=this;return(0,w.Z)(function*(){return yield t.signer.request(e,t.formatChainId(t.chainId))})()}sendAsync(e,t){this.signer.sendAsync(e,t,this.formatChainId(this.chainId))}get connected(){return!!this.signer.client&&this.signer.client.core.relayer.connected}get connecting(){return!!this.signer.client&&this.signer.client.core.relayer.connecting}enable(){var e=this;return(0,w.Z)(function*(){return e.session||(yield e.connect()),yield e.request({method:"eth_requestAccounts"})})()}connect(e){var t=this;return(0,w.Z)(function*(){if(!t.signer.client)throw new Error("Provider not initialized. Call init() first");t.loadConnectOpts(e);const{required:r,optional:s}=function(n){const{chains:e,optionalChains:t,methods:r,optionalMethods:s,events:o,optionalEvents:d,rpcMap:S}=n;if(!Gn(e))throw new Error("Invalid chains");const B=e,ce=r||li,_e=o||fi,ze={chains:B,methods:ce,events:_e,rpcMap:{[Is(B)]:S[Is(B)]}},xt=o?.filter(lt=>!fi.includes(lt)),Pe=r?.filter(lt=>!li.includes(lt));return t||d||s||null!=xt&&xt.length||null!=Pe&&Pe.length?{required:ze,optional:{chains:[...new Set(xt?.length&&Pe?.length||!t?B.concat(t||[]):t)],methods:[...new Set(ce.concat(s||[]))],events:[...new Set(_e.concat(d||[]))],rpcMap:S}}:{required:ze}}(t.rpc);try{const o=yield new Promise(function(){var S=(0,w.Z)(function*(B,ce){var _e;t.rpc.showQrModal&&(null==(_e=t.modal)||_e.subscribeModal(he=>{!he.open&&!t.signer.session&&(t.signer.abortPairingAttempt(),ce(new Error("Connection request reset. Please try again.")))})),yield t.signer.connect(Ya(xs({namespaces:{[t.namespace]:r}},s&&{optionalNamespaces:{[t.namespace]:s}}),{pairingTopic:e?.pairingTopic})).then(he=>{B(he)}).catch(he=>{ce(new Error(he.message))})});return function(B,ce){return S.apply(this,arguments)}}());if(!o)return;t.setChainIds(t.rpc.chains);const d=function(n,e=[]){const t=[];return Object.keys(n).forEach(r=>{e.length&&!e.includes(r)||t.push(...n[r].accounts)}),t}(o.namespaces,[t.namespace]);t.setAccounts(d),t.events.emit("connect",{chainId:Ps(t.chainId)})}catch(o){throw t.signer.logger.error(o),o}finally{t.modal&&t.modal.closeModal()}})()}disconnect(){var e=this;return(0,w.Z)(function*(){e.session&&(yield e.signer.disconnect()),e.reset()})()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:t}=e,{event:r}=t;"accountsChanged"===r.name?(this.accounts=this.parseAccounts(r.data),this.events.emit("accountsChanged",this.accounts)):"chainChanged"===r.name?this.setChainId(this.formatChainId(r.data)):this.events.emit(r.name,r.data),this.events.emit("session_event",e)}),this.signer.on("chainChanged",e=>{const t=parseInt(e);this.chainId=t,this.events.emit("chainChanged",Ps(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",Ya(xs({},function(n,e){const{message:t,code:r}=Ic[n];return{message:e?`${t} ${e}`:t,code:r}}("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{var t,r;this.rpc.showQrModal&&(null==(t=this.modal)||t.closeModal(),null==(r=this.modal)||r.openModal({uri:e})),this.events.emit("display_uri",e)})}setHttpProvider(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return"string"==typeof e&&e.startsWith(`${this.namespace}:`)}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const t=e.filter(r=>this.isCompatibleChainId(r)).map(r=>this.parseChainId(r));t.length&&(this.chainId=t[0],this.events.emit("chainChanged",Ps(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const t=this.parseChainId(e);this.chainId=t,this.setHttpProvider(t)}}parseAccountId(e){const[t,r,s]=e.split(":");return{chainId:`${t}:${r}`,address:s}}setAccounts(e){this.accounts=e.filter(t=>this.parseChainId(this.parseAccountId(t).chainId)===this.chainId).map(t=>this.parseAccountId(t).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var t,r;return{chains:(null==(t=e.chains)?void 0:t.map(s=>this.formatChainId(s)))||[`${this.namespace}:1`],optionalChains:e.optionalChains?e.optionalChains.map(s=>this.formatChainId(s)):void 0,methods:e?.methods||li,events:e?.events||fi,optionalMethods:e?.optionalMethods||[],optionalEvents:e?.optionalEvents||[],rpcMap:e?.rpcMap||this.buildRpcMap(e.chains.concat(e.optionalChains||[]),e.projectId),showQrModal:Boolean(e?.showQrModal),qrModalOptions:null!=(r=e?.qrModalOptions)?r:void 0,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,t){const r={};return e.forEach(s=>{r[s]=this.getRpcUrl(s,t)}),r}initialize(e){var t=this;return(0,w.Z)(function*(){if(t.rpc=t.getRpcConfig(e),t.chainId=Is(t.rpc.chains),t.signer=yield d_.init({projectId:t.rpc.projectId,metadata:t.rpc.metadata}),t.registerEventListeners(),yield t.loadPersistedSession(),t.rpc.showQrModal)try{const{Web3Modal:r}=yield F.e(3202).then(F.bind(F,33202));t.modal=new r(xs({walletConnectVersion:2,projectId:t.rpc.projectId,standaloneChains:t.rpc.chains},t.rpc.qrModalOptions))}catch{throw new Error("To use QR modal, please install @web3modal/standalone package")}})()}loadConnectOpts(e){if(!e)return;const{chains:t,optionalChains:r,rpcMap:s}=e;t&&Gn(t)&&(this.rpc.chains=t.map(o=>this.formatChainId(o)),t.forEach(o=>{this.rpc.rpcMap[o]=s?.[o]||this.getRpcUrl(o)})),r&&Gn(r)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=r?.map(o=>this.formatChainId(o)),r.forEach(o=>{this.rpc.rpcMap[o]=s?.[o]||this.getRpcUrl(o)}))}getRpcUrl(e,t){var r;return(null==(r=this.rpc.rpcMap)?void 0:r[e])||`https://rpc.walletconnect.com/v1/?chainId=eip155:${e}&projectId=${t||this.rpc.projectId}`}loadPersistedSession(){var e=this;return(0,w.Z)(function*(){if(!e.session)return;const t=yield e.signer.client.core.storage.getItem(`${e.STORAGE_KEY}/chainId`);e.setChainIds(t?[e.formatChainId(t)]:e.session.namespaces[e.namespace].accounts),e.setAccounts(e.session.namespaces[e.namespace].accounts)})()}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return"string"==typeof e||e instanceof String?[this.parseAccount(e)]:e.map(t=>this.parseAccount(t))}}const O_=di},63581:(Oe,p)=>{"use strict";function F(fe){let se;return"undefined"!=typeof window&&void 0!==window[fe]&&(se=window[fe]),se}function M(fe){const se=F(fe);if(!se)throw new Error(`${fe} is not defined in Window`);return se}Object.defineProperty(p,"__esModule",{value:!0}),p.getLocalStorage=p.getLocalStorageOrThrow=p.getCrypto=p.getCryptoOrThrow=p.getLocation=p.getLocationOrThrow=p.getNavigator=p.getNavigatorOrThrow=p.getDocument=p.getDocumentOrThrow=p.getFromWindowOrThrow=p.getFromWindow=void 0,p.getFromWindow=F,p.getFromWindowOrThrow=M,p.getDocumentOrThrow=function(){return M("document")},p.getDocument=function(){return F("document")},p.getNavigatorOrThrow=function(){return M("navigator")},p.getNavigator=function(){return F("navigator")},p.getLocationOrThrow=function(){return M("location")},p.getLocation=function(){return F("location")},p.getCryptoOrThrow=function(){return M("crypto")},p.getCrypto=function(){return F("crypto")},p.getLocalStorageOrThrow=function(){return M("localStorage")},p.getLocalStorage=function(){return F("localStorage")}},38541:(Oe,p,F)=>{"use strict";F(63581)},32257:(Oe,p,F)=>{"use strict";const M=F(82915),oe=F(65361),be=F(95967),ge=F(10979),pe=Symbol("encodeFragmentIdentifier");function L(y){if("string"!=typeof y||1!==y.length)throw new TypeError("arrayFormatSeparator must be single character string")}function C(y,O){return O.encode?O.strict?M(y):encodeURIComponent(y):y}function W(y,O){return O.decode?oe(y):y}function fe(y){return Array.isArray(y)?y.sort():"object"==typeof y?fe(Object.keys(y)).sort((O,E)=>Number(O)-Number(E)).map(O=>y[O]):y}function se(y){const O=y.indexOf("#");return-1!==O&&(y=y.slice(0,O)),y}function w(y){const O=(y=se(y)).indexOf("?");return-1===O?"":y.slice(O+1)}function ye(y,O){return O.parseNumbers&&!Number.isNaN(Number(y))&&"string"==typeof y&&""!==y.trim()?y=Number(y):O.parseBooleans&&null!==y&&("true"===y.toLowerCase()||"false"===y.toLowerCase())&&(y="true"===y.toLowerCase()),y}function me(y,O){L((O=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},O)).arrayFormatSeparator);const E=function(y){let O;switch(y.arrayFormat){case"index":return(E,b,N)=>{O=/\[(\d*)\]$/.exec(E),E=E.replace(/\[\d*\]$/,""),O?(void 0===N[E]&&(N[E]={}),N[E][O[1]]=b):N[E]=b};case"bracket":return(E,b,N)=>{O=/(\[\])$/.exec(E),N[E=E.replace(/\[\]$/,"")]=O?void 0!==N[E]?[].concat(N[E],b):[b]:b};case"colon-list-separator":return(E,b,N)=>{O=/(:list)$/.exec(E),N[E=E.replace(/:list$/,"")]=O?void 0!==N[E]?[].concat(N[E],b):[b]:b};case"comma":case"separator":return(E,b,N)=>{const A="string"==typeof b&&b.includes(y.arrayFormatSeparator),a="string"==typeof b&&!A&&W(b,y).includes(y.arrayFormatSeparator);b=a?W(b,y):b;const u=A||a?b.split(y.arrayFormatSeparator).map(m=>W(m,y)):null===b?b:W(b,y);N[E]=u};case"bracket-separator":return(E,b,N)=>{const A=/(\[\])$/.test(E);if(E=E.replace(/\[\]$/,""),!A)return void(N[E]=b&&W(b,y));const a=null===b?[]:b.split(y.arrayFormatSeparator).map(u=>W(u,y));N[E]=void 0!==N[E]?[].concat(N[E],a):a};default:return(E,b,N)=>{N[E]=void 0!==N[E]?[].concat(N[E],b):b}}}(O),b=Object.create(null);if("string"!=typeof y||!(y=y.trim().replace(/^[?#&]/,"")))return b;for(const N of y.split("&")){if(""===N)continue;let[A,a]=be(O.decode?N.replace(/\+/g," "):N,"=");a=void 0===a?null:["comma","separator","bracket-separator"].includes(O.arrayFormat)?a:W(a,O),E(W(A,O),a,b)}for(const N of Object.keys(b)){const A=b[N];if("object"==typeof A&&null!==A)for(const a of Object.keys(A))A[a]=ye(A[a],O);else b[N]=ye(A,O)}return!1===O.sort?b:(!0===O.sort?Object.keys(b).sort():Object.keys(b).sort(O.sort)).reduce((N,A)=>{const a=b[A];return N[A]=Boolean(a)&&"object"==typeof a&&!Array.isArray(a)?fe(a):a,N},Object.create(null))}p.extract=w,p.parse=me,p.stringify=(y,O)=>{if(!y)return"";L((O=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},O)).arrayFormatSeparator);const E=a=>O.skipNull&&(y=>null==y)(y[a])||O.skipEmptyString&&""===y[a],b=function(y){switch(y.arrayFormat){case"index":return O=>(E,b)=>{const N=E.length;return void 0===b||y.skipNull&&null===b||y.skipEmptyString&&""===b?E:null===b?[...E,[C(O,y),"[",N,"]"].join("")]:[...E,[C(O,y),"[",C(N,y),"]=",C(b,y)].join("")]};case"bracket":return O=>(E,b)=>void 0===b||y.skipNull&&null===b||y.skipEmptyString&&""===b?E:null===b?[...E,[C(O,y),"[]"].join("")]:[...E,[C(O,y),"[]=",C(b,y)].join("")];case"colon-list-separator":return O=>(E,b)=>void 0===b||y.skipNull&&null===b||y.skipEmptyString&&""===b?E:null===b?[...E,[C(O,y),":list="].join("")]:[...E,[C(O,y),":list=",C(b,y)].join("")];case"comma":case"separator":case"bracket-separator":{const O="bracket-separator"===y.arrayFormat?"[]=":"=";return E=>(b,N)=>void 0===N||y.skipNull&&null===N||y.skipEmptyString&&""===N?b:(N=null===N?"":N,0===b.length?[[C(E,y),O,C(N,y)].join("")]:[[b,C(N,y)].join(y.arrayFormatSeparator)])}default:return O=>(E,b)=>void 0===b||y.skipNull&&null===b||y.skipEmptyString&&""===b?E:null===b?[...E,C(O,y)]:[...E,[C(O,y),"=",C(b,y)].join("")]}}(O),N={};for(const a of Object.keys(y))E(a)||(N[a]=y[a]);const A=Object.keys(N);return!1!==O.sort&&A.sort(O.sort),A.map(a=>{const u=y[a];return void 0===u?"":null===u?C(a,O):Array.isArray(u)?0===u.length&&"bracket-separator"===O.arrayFormat?C(a,O)+"[]":u.reduce(b(a),[]).join("&"):C(a,O)+"="+C(u,O)}).filter(a=>a.length>0).join("&")},p.parseUrl=(y,O)=>{O=Object.assign({decode:!0},O);const[E,b]=be(y,"#");return Object.assign({url:E.split("?")[0]||"",query:me(w(y),O)},O&&O.parseFragmentIdentifier&&b?{fragmentIdentifier:W(b,O)}:{})},p.stringifyUrl=(y,O)=>{O=Object.assign({encode:!0,strict:!0,[pe]:!0},O);const E=se(y.url).split("?")[0]||"",b=p.extract(y.url),N=p.parse(b,{sort:!1}),A=Object.assign(N,y.query);let a=p.stringify(A,O);a&&(a=`?${a}`);let u=function(y){let O="";const E=y.indexOf("#");return-1!==E&&(O=y.slice(E)),O}(y.url);return y.fragmentIdentifier&&(u=`#${O[pe]?C(y.fragmentIdentifier,O):y.fragmentIdentifier}`),`${E}${a}${u}`},p.pick=(y,O,E)=>{E=Object.assign({parseFragmentIdentifier:!0,[pe]:!1},E);const{url:b,query:N,fragmentIdentifier:A}=p.parseUrl(y,E);return p.stringifyUrl({url:b,query:ge(N,O),fragmentIdentifier:A},E)},p.exclude=(y,O,E)=>{const b=Array.isArray(O)?N=>!O.includes(N):(N,A)=>!O(N,A);return p.pick(y,b,E)}},52399:(Oe,p,F)=>{"use strict";F.d(p,{q:()=>M});class M{}},1577:(Oe,p,F)=>{"use strict";F.r(p),F.d(p,{IEvents:()=>M.q});var M=F(52399)},63029:(Oe,p,F)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.HEARTBEAT_EVENTS=p.HEARTBEAT_INTERVAL=void 0;const M=F(14611);p.HEARTBEAT_INTERVAL=M.FIVE_SECONDS,p.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"}},76505:(Oe,p,F)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),F(83411).__exportStar(F(63029),p)},33435:(Oe,p,F)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.HeartBeat=void 0;const M=F(83411),oe=F(93105),be=F(14611),ge=F(76157),G=F(76505);class pe extends ge.IHeartBeat{constructor($){super($),this.events=new oe.EventEmitter,this.interval=G.HEARTBEAT_INTERVAL,this.interval=(null==$?void 0:$.interval)||G.HEARTBEAT_INTERVAL}static init($){return M.__awaiter(this,void 0,void 0,function*(){const L=new pe($);return yield L.init(),L})}init(){return M.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on($,L){this.events.on($,L)}once($,L){this.events.once($,L)}off($,L){this.events.off($,L)}removeListener($,L){this.events.removeListener($,L)}initialize(){return M.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),be.toMiliseconds(this.interval))})}pulse(){this.events.emit(G.HEARTBEAT_EVENTS.pulse)}}p.HeartBeat=pe},38960:(Oe,p,F)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0});const M=F(83411);M.__exportStar(F(33435),p),M.__exportStar(F(76157),p),M.__exportStar(F(76505),p)},41760:(Oe,p,F)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.IHeartBeat=void 0;const M=F(1577);p.IHeartBeat=class extends M.IEvents{constructor(ge){super()}}},76157:(Oe,p,F)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),F(83411).__exportStar(F(41760),p)},3226:(Oe,p,F)=>{"use strict";const oe=F(57436),be=F(28898),ge=oe.__importDefault(F(87733)),G=F(54653);p.ZP=class{constructor(){this.localStorage=ge.default}getKeys(){return oe.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return oe.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(G.parseEntry)})}getItem($){return oe.__awaiter(this,void 0,void 0,function*(){const L=this.localStorage.getItem($);if(null!==L)return be.safeJsonParse(L)})}setItem($,L){return oe.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem($,be.safeJsonStringify(L))})}removeItem($){return oe.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem($)})}}},87733:Oe=>{"use strict";!function(){let p;function F(){}p=F,p.prototype.getItem=function(M){return this.hasOwnProperty(M)?String(this[M]):null},p.prototype.setItem=function(M,oe){this[M]=String(oe)},p.prototype.removeItem=function(M){delete this[M]},p.prototype.clear=function(){const M=this;Object.keys(M).forEach(function(oe){M[oe]=void 0,delete M[oe]})},p.prototype.key=function(M){return M=M||0,Object.keys(this)[M]},p.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),Oe.exports="undefined"!=typeof global&&global.localStorage?global.localStorage:"undefined"!=typeof window&&window.localStorage?window.localStorage:new F}()},54653:(Oe,p,F)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0});const M=F(57436);M.__exportStar(F(87402),p),M.__exportStar(F(94164),p)},87402:(Oe,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.IKeyValueStorage=void 0,p.IKeyValueStorage=class{}},94164:(Oe,p,F)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.parseEntry=void 0;const M=F(28898);p.parseEntry=function(be){var ge;return[be[0],M.safeJsonParse(null!==(ge=be[1])&&void 0!==ge?ge:"")]}},73671:(Oe,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.PINO_CUSTOM_CONTEXT_KEY=p.PINO_LOGGER_DEFAULTS=void 0,p.PINO_LOGGER_DEFAULTS={level:"info"},p.PINO_CUSTOM_CONTEXT_KEY="custom_context"},66486:(Oe,p,F)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.pino=void 0;const M=F(17978),oe=M.__importDefault(F(22694));Object.defineProperty(p,"pino",{enumerable:!0,get:function(){return oe.default}}),M.__exportStar(F(73671),p),M.__exportStar(F(70769),p)},70769:(Oe,p,F)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.generateChildLogger=p.formatChildLoggerContext=p.getLoggerContext=p.setBrowserLoggerContext=p.getBrowserLoggerContext=p.getDefaultLoggerOptions=void 0;const M=F(73671);function be($,L=M.PINO_CUSTOM_CONTEXT_KEY){return $[L]||""}function ge($,L,C=M.PINO_CUSTOM_CONTEXT_KEY){return $[C]=L,$}function G($,L=M.PINO_CUSTOM_CONTEXT_KEY){let C="";return C=void 0===$.bindings?be($,L):$.bindings().context||"",C}function pe($,L,C=M.PINO_CUSTOM_CONTEXT_KEY){const W=G($,C);return W.trim()?`${W}/${L}`:L}p.getDefaultLoggerOptions=function($){return Object.assign(Object.assign({},$),{level:(null==$?void 0:$.level)||M.PINO_LOGGER_DEFAULTS.level})},p.getBrowserLoggerContext=be,p.setBrowserLoggerContext=ge,p.getLoggerContext=G,p.formatChildLoggerContext=pe,p.generateChildLogger=function($,L,C=M.PINO_CUSTOM_CONTEXT_KEY){const W=pe($,L,C);return ge($.child({context:W}),W,C)}},45785:()=>{},58083:()=>{},45418:(Oe,p)=>{"use strict";function F(fe){let se;return"undefined"!=typeof window&&void 0!==window[fe]&&(se=window[fe]),se}function M(fe){const se=F(fe);if(!se)throw new Error(`${fe} is not defined in Window`);return se}Object.defineProperty(p,"__esModule",{value:!0}),p.getLocalStorage=p.getLocalStorageOrThrow=p.getCrypto=p.getCryptoOrThrow=p.getLocation=p.getLocationOrThrow=p.getNavigator=p.getNavigatorOrThrow=p.getDocument=p.getDocumentOrThrow=p.getFromWindowOrThrow=p.getFromWindow=void 0,p.getFromWindow=F,p.getFromWindowOrThrow=M,p.getDocumentOrThrow=function(){return M("document")},p.getDocument=function(){return F("document")},p.getNavigatorOrThrow=function(){return M("navigator")},p.getNavigator=function(){return F("navigator")},p.getLocationOrThrow=function(){return M("location")},p.getLocation=function(){return F("location")},p.getCryptoOrThrow=function(){return M("crypto")},p.getCrypto=function(){return F("crypto")},p.getLocalStorageOrThrow=function(){return M("localStorage")},p.getLocalStorage=function(){return F("localStorage")}},31846:(Oe,p,F)=>{"use strict";p.D=void 0;const oe=F(45418);p.D=function(){let ge,G;try{ge=oe.getDocumentOrThrow(),G=oe.getLocationOrThrow()}catch{return null}function K(...w){const ye=ge.getElementsByTagName("meta");for(let me=0;me<ye.length;me++){const y=ye[me],O=["itemprop","property","name"].map(E=>y.getAttribute(E)).filter(E=>!!E&&w.includes(E));if(O.length&&O){const E=y.getAttribute("content");if(E)return E}}return""}const C=function(){let w=K("name","og:site_name","og:title","twitter:title");return w||(w=ge.title),w}();return{description:K("description","og:description","twitter:description","keywords"),url:G.origin,icons:function(){const w=ge.getElementsByTagName("link"),ye=[];for(let me=0;me<w.length;me++){const y=w[me],O=y.getAttribute("rel");if(O&&O.toLowerCase().indexOf("icon")>-1){const E=y.getAttribute("href");if(E)if(-1===E.toLowerCase().indexOf("https:")&&-1===E.toLowerCase().indexOf("http:")&&0!==E.indexOf("//")){let b=G.protocol+"//"+G.host;if(0===E.indexOf("/"))b+=E;else{const N=G.pathname.split("/");N.pop(),b+=N.join("/")+"/"+E}ye.push(b)}else 0===E.indexOf("//")?ye.push(G.protocol+E):ye.push(E)}}return ye}(),name:C}}},34955:(Oe,p,F)=>{"use strict";const M=F(82915),oe=F(65361),be=F(95967),ge=F(10979),pe=Symbol("encodeFragmentIdentifier");function L(y){if("string"!=typeof y||1!==y.length)throw new TypeError("arrayFormatSeparator must be single character string")}function C(y,O){return O.encode?O.strict?M(y):encodeURIComponent(y):y}function W(y,O){return O.decode?oe(y):y}function fe(y){return Array.isArray(y)?y.sort():"object"==typeof y?fe(Object.keys(y)).sort((O,E)=>Number(O)-Number(E)).map(O=>y[O]):y}function se(y){const O=y.indexOf("#");return-1!==O&&(y=y.slice(0,O)),y}function w(y){const O=(y=se(y)).indexOf("?");return-1===O?"":y.slice(O+1)}function ye(y,O){return O.parseNumbers&&!Number.isNaN(Number(y))&&"string"==typeof y&&""!==y.trim()?y=Number(y):O.parseBooleans&&null!==y&&("true"===y.toLowerCase()||"false"===y.toLowerCase())&&(y="true"===y.toLowerCase()),y}function me(y,O){L((O=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},O)).arrayFormatSeparator);const E=function(y){let O;switch(y.arrayFormat){case"index":return(E,b,N)=>{O=/\[(\d*)\]$/.exec(E),E=E.replace(/\[\d*\]$/,""),O?(void 0===N[E]&&(N[E]={}),N[E][O[1]]=b):N[E]=b};case"bracket":return(E,b,N)=>{O=/(\[\])$/.exec(E),N[E=E.replace(/\[\]$/,"")]=O?void 0!==N[E]?[].concat(N[E],b):[b]:b};case"colon-list-separator":return(E,b,N)=>{O=/(:list)$/.exec(E),N[E=E.replace(/:list$/,"")]=O?void 0!==N[E]?[].concat(N[E],b):[b]:b};case"comma":case"separator":return(E,b,N)=>{const A="string"==typeof b&&b.includes(y.arrayFormatSeparator),a="string"==typeof b&&!A&&W(b,y).includes(y.arrayFormatSeparator);b=a?W(b,y):b;const u=A||a?b.split(y.arrayFormatSeparator).map(m=>W(m,y)):null===b?b:W(b,y);N[E]=u};case"bracket-separator":return(E,b,N)=>{const A=/(\[\])$/.test(E);if(E=E.replace(/\[\]$/,""),!A)return void(N[E]=b&&W(b,y));const a=null===b?[]:b.split(y.arrayFormatSeparator).map(u=>W(u,y));N[E]=void 0!==N[E]?[].concat(N[E],a):a};default:return(E,b,N)=>{N[E]=void 0!==N[E]?[].concat(N[E],b):b}}}(O),b=Object.create(null);if("string"!=typeof y||!(y=y.trim().replace(/^[?#&]/,"")))return b;for(const N of y.split("&")){if(""===N)continue;let[A,a]=be(O.decode?N.replace(/\+/g," "):N,"=");a=void 0===a?null:["comma","separator","bracket-separator"].includes(O.arrayFormat)?a:W(a,O),E(W(A,O),a,b)}for(const N of Object.keys(b)){const A=b[N];if("object"==typeof A&&null!==A)for(const a of Object.keys(A))A[a]=ye(A[a],O);else b[N]=ye(A,O)}return!1===O.sort?b:(!0===O.sort?Object.keys(b).sort():Object.keys(b).sort(O.sort)).reduce((N,A)=>{const a=b[A];return N[A]=Boolean(a)&&"object"==typeof a&&!Array.isArray(a)?fe(a):a,N},Object.create(null))}p.extract=w,p.parse=me,p.stringify=(y,O)=>{if(!y)return"";L((O=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},O)).arrayFormatSeparator);const E=a=>O.skipNull&&(y=>null==y)(y[a])||O.skipEmptyString&&""===y[a],b=function(y){switch(y.arrayFormat){case"index":return O=>(E,b)=>{const N=E.length;return void 0===b||y.skipNull&&null===b||y.skipEmptyString&&""===b?E:null===b?[...E,[C(O,y),"[",N,"]"].join("")]:[...E,[C(O,y),"[",C(N,y),"]=",C(b,y)].join("")]};case"bracket":return O=>(E,b)=>void 0===b||y.skipNull&&null===b||y.skipEmptyString&&""===b?E:null===b?[...E,[C(O,y),"[]"].join("")]:[...E,[C(O,y),"[]=",C(b,y)].join("")];case"colon-list-separator":return O=>(E,b)=>void 0===b||y.skipNull&&null===b||y.skipEmptyString&&""===b?E:null===b?[...E,[C(O,y),":list="].join("")]:[...E,[C(O,y),":list=",C(b,y)].join("")];case"comma":case"separator":case"bracket-separator":{const O="bracket-separator"===y.arrayFormat?"[]=":"=";return E=>(b,N)=>void 0===N||y.skipNull&&null===N||y.skipEmptyString&&""===N?b:(N=null===N?"":N,0===b.length?[[C(E,y),O,C(N,y)].join("")]:[[b,C(N,y)].join(y.arrayFormatSeparator)])}default:return O=>(E,b)=>void 0===b||y.skipNull&&null===b||y.skipEmptyString&&""===b?E:null===b?[...E,C(O,y)]:[...E,[C(O,y),"=",C(b,y)].join("")]}}(O),N={};for(const a of Object.keys(y))E(a)||(N[a]=y[a]);const A=Object.keys(N);return!1!==O.sort&&A.sort(O.sort),A.map(a=>{const u=y[a];return void 0===u?"":null===u?C(a,O):Array.isArray(u)?0===u.length&&"bracket-separator"===O.arrayFormat?C(a,O)+"[]":u.reduce(b(a),[]).join("&"):C(a,O)+"="+C(u,O)}).filter(a=>a.length>0).join("&")},p.parseUrl=(y,O)=>{O=Object.assign({decode:!0},O);const[E,b]=be(y,"#");return Object.assign({url:E.split("?")[0]||"",query:me(w(y),O)},O&&O.parseFragmentIdentifier&&b?{fragmentIdentifier:W(b,O)}:{})},p.stringifyUrl=(y,O)=>{O=Object.assign({encode:!0,strict:!0,[pe]:!0},O);const E=se(y.url).split("?")[0]||"",b=p.extract(y.url),N=p.parse(b,{sort:!1}),A=Object.assign(N,y.query);let a=p.stringify(A,O);a&&(a=`?${a}`);let u=function(y){let O="";const E=y.indexOf("#");return-1!==E&&(O=y.slice(E)),O}(y.url);return y.fragmentIdentifier&&(u=`#${O[pe]?C(y.fragmentIdentifier,O):y.fragmentIdentifier}`),`${E}${a}${u}`},p.pick=(y,O,E)=>{E=Object.assign({parseFragmentIdentifier:!0,[pe]:!1},E);const{url:b,query:N,fragmentIdentifier:A}=p.parseUrl(y,E);return p.stringifyUrl({url:b,query:ge(N,O),fragmentIdentifier:A},E)},p.exclude=(y,O,E)=>{const b=Array.isArray(O)?N=>!O.includes(N):(N,A)=>!O(N,A);return p.pick(y,b,E)}},78847:(Oe,p,F)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0});const M=F(80017);M.__exportStar(F(77662),p),M.__exportStar(F(28456),p)},77662:(Oe,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.ONE_THOUSAND=p.ONE_HUNDRED=void 0,p.ONE_HUNDRED=100,p.ONE_THOUSAND=1e3},28456:(Oe,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.ONE_YEAR=p.FOUR_WEEKS=p.THREE_WEEKS=p.TWO_WEEKS=p.ONE_WEEK=p.THIRTY_DAYS=p.SEVEN_DAYS=p.FIVE_DAYS=p.THREE_DAYS=p.ONE_DAY=p.TWENTY_FOUR_HOURS=p.TWELVE_HOURS=p.SIX_HOURS=p.THREE_HOURS=p.ONE_HOUR=p.SIXTY_MINUTES=p.THIRTY_MINUTES=p.TEN_MINUTES=p.FIVE_MINUTES=p.ONE_MINUTE=p.SIXTY_SECONDS=p.THIRTY_SECONDS=p.TEN_SECONDS=p.FIVE_SECONDS=p.ONE_SECOND=void 0,p.ONE_SECOND=1,p.FIVE_SECONDS=5,p.TEN_SECONDS=10,p.THIRTY_SECONDS=30,p.SIXTY_SECONDS=60,p.ONE_MINUTE=p.SIXTY_SECONDS,p.FIVE_MINUTES=5*p.ONE_MINUTE,p.TEN_MINUTES=10*p.ONE_MINUTE,p.THIRTY_MINUTES=30*p.ONE_MINUTE,p.SIXTY_MINUTES=60*p.ONE_MINUTE,p.ONE_HOUR=p.SIXTY_MINUTES,p.THREE_HOURS=3*p.ONE_HOUR,p.SIX_HOURS=6*p.ONE_HOUR,p.TWELVE_HOURS=12*p.ONE_HOUR,p.TWENTY_FOUR_HOURS=24*p.ONE_HOUR,p.ONE_DAY=p.TWENTY_FOUR_HOURS,p.THREE_DAYS=3*p.ONE_DAY,p.FIVE_DAYS=5*p.ONE_DAY,p.SEVEN_DAYS=7*p.ONE_DAY,p.THIRTY_DAYS=30*p.ONE_DAY,p.ONE_WEEK=p.SEVEN_DAYS,p.TWO_WEEKS=2*p.ONE_WEEK,p.THREE_WEEKS=3*p.ONE_WEEK,p.FOUR_WEEKS=4*p.ONE_WEEK,p.ONE_YEAR=365*p.ONE_DAY},14611:(Oe,p,F)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0});const M=F(80017);M.__exportStar(F(47344),p),M.__exportStar(F(1429),p),M.__exportStar(F(40214),p),M.__exportStar(F(78847),p)},40214:(Oe,p,F)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),F(80017).__exportStar(F(47997),p)},47997:(Oe,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.IWatch=void 0,p.IWatch=class{}},45442:(Oe,p,F)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.fromMiliseconds=p.toMiliseconds=void 0;const M=F(78847);p.toMiliseconds=function(ge){return ge*M.ONE_THOUSAND},p.fromMiliseconds=function(ge){return Math.floor(ge/M.ONE_THOUSAND)}},67406:(Oe,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.delay=void 0,p.delay=function(M){return new Promise(oe=>{setTimeout(()=>{oe(!0)},M)})}},47344:(Oe,p,F)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0});const M=F(80017);M.__exportStar(F(67406),p),M.__exportStar(F(45442),p)},1429:(Oe,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.Watch=void 0;class F{constructor(){this.timestamps=new Map}start(oe){if(this.timestamps.has(oe))throw new Error(`Watch already started for label: ${oe}`);this.timestamps.set(oe,{started:Date.now()})}stop(oe){const be=this.get(oe);if(void 0!==be.elapsed)throw new Error(`Watch already stopped for label: ${oe}`);const ge=Date.now()-be.started;this.timestamps.set(oe,{started:be.started,elapsed:ge})}get(oe){const be=this.timestamps.get(oe);if(void 0===be)throw new Error(`No timestamp found for label: ${oe}`);return be}elapsed(oe){const be=this.get(oe);return be.elapsed||Date.now()-be.started}}p.Watch=F,p.default=F},7092:(Oe,p)=>{"use strict";function F(fe){let se;return"undefined"!=typeof window&&void 0!==window[fe]&&(se=window[fe]),se}function M(fe){const se=F(fe);if(!se)throw new Error(`${fe} is not defined in Window`);return se}Object.defineProperty(p,"__esModule",{value:!0}),p.getLocalStorage=p.getLocalStorageOrThrow=p.getCrypto=p.getCryptoOrThrow=p.getLocation=p.getLocationOrThrow=p.getNavigator=p.getNavigatorOrThrow=p.getDocument=p.getDocumentOrThrow=p.getFromWindowOrThrow=p.getFromWindow=void 0,p.getFromWindow=F,p.getFromWindowOrThrow=M,p.getDocumentOrThrow=function(){return M("document")},p.getDocument=function(){return F("document")},p.getNavigatorOrThrow=function(){return M("navigator")},p.getNavigator=function(){return F("navigator")},p.getLocationOrThrow=function(){return M("location")},p.getLocation=function(){return F("location")},p.getCryptoOrThrow=function(){return M("crypto")},p.getCrypto=function(){return F("crypto")},p.getLocalStorageOrThrow=function(){return M("localStorage")},p.getLocalStorage=function(){return F("localStorage")}},47274:(Oe,p,F)=>{"use strict";F(7092)},49290:(Oe,p,F)=>{"use strict";const M=F(82915),oe=F(65361),be=F(95967),ge=F(10979),pe=Symbol("encodeFragmentIdentifier");function L(y){if("string"!=typeof y||1!==y.length)throw new TypeError("arrayFormatSeparator must be single character string")}function C(y,O){return O.encode?O.strict?M(y):encodeURIComponent(y):y}function W(y,O){return O.decode?oe(y):y}function fe(y){return Array.isArray(y)?y.sort():"object"==typeof y?fe(Object.keys(y)).sort((O,E)=>Number(O)-Number(E)).map(O=>y[O]):y}function se(y){const O=y.indexOf("#");return-1!==O&&(y=y.slice(0,O)),y}function w(y){const O=(y=se(y)).indexOf("?");return-1===O?"":y.slice(O+1)}function ye(y,O){return O.parseNumbers&&!Number.isNaN(Number(y))&&"string"==typeof y&&""!==y.trim()?y=Number(y):O.parseBooleans&&null!==y&&("true"===y.toLowerCase()||"false"===y.toLowerCase())&&(y="true"===y.toLowerCase()),y}function me(y,O){L((O=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},O)).arrayFormatSeparator);const E=function(y){let O;switch(y.arrayFormat){case"index":return(E,b,N)=>{O=/\[(\d*)\]$/.exec(E),E=E.replace(/\[\d*\]$/,""),O?(void 0===N[E]&&(N[E]={}),N[E][O[1]]=b):N[E]=b};case"bracket":return(E,b,N)=>{O=/(\[\])$/.exec(E),N[E=E.replace(/\[\]$/,"")]=O?void 0!==N[E]?[].concat(N[E],b):[b]:b};case"colon-list-separator":return(E,b,N)=>{O=/(:list)$/.exec(E),N[E=E.replace(/:list$/,"")]=O?void 0!==N[E]?[].concat(N[E],b):[b]:b};case"comma":case"separator":return(E,b,N)=>{const A="string"==typeof b&&b.includes(y.arrayFormatSeparator),a="string"==typeof b&&!A&&W(b,y).includes(y.arrayFormatSeparator);b=a?W(b,y):b;const u=A||a?b.split(y.arrayFormatSeparator).map(m=>W(m,y)):null===b?b:W(b,y);N[E]=u};case"bracket-separator":return(E,b,N)=>{const A=/(\[\])$/.test(E);if(E=E.replace(/\[\]$/,""),!A)return void(N[E]=b&&W(b,y));const a=null===b?[]:b.split(y.arrayFormatSeparator).map(u=>W(u,y));N[E]=void 0!==N[E]?[].concat(N[E],a):a};default:return(E,b,N)=>{N[E]=void 0!==N[E]?[].concat(N[E],b):b}}}(O),b=Object.create(null);if("string"!=typeof y||!(y=y.trim().replace(/^[?#&]/,"")))return b;for(const N of y.split("&")){if(""===N)continue;let[A,a]=be(O.decode?N.replace(/\+/g," "):N,"=");a=void 0===a?null:["comma","separator","bracket-separator"].includes(O.arrayFormat)?a:W(a,O),E(W(A,O),a,b)}for(const N of Object.keys(b)){const A=b[N];if("object"==typeof A&&null!==A)for(const a of Object.keys(A))A[a]=ye(A[a],O);else b[N]=ye(A,O)}return!1===O.sort?b:(!0===O.sort?Object.keys(b).sort():Object.keys(b).sort(O.sort)).reduce((N,A)=>{const a=b[A];return N[A]=Boolean(a)&&"object"==typeof a&&!Array.isArray(a)?fe(a):a,N},Object.create(null))}p.extract=w,p.parse=me,p.stringify=(y,O)=>{if(!y)return"";L((O=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},O)).arrayFormatSeparator);const E=a=>O.skipNull&&(y=>null==y)(y[a])||O.skipEmptyString&&""===y[a],b=function(y){switch(y.arrayFormat){case"index":return O=>(E,b)=>{const N=E.length;return void 0===b||y.skipNull&&null===b||y.skipEmptyString&&""===b?E:null===b?[...E,[C(O,y),"[",N,"]"].join("")]:[...E,[C(O,y),"[",C(N,y),"]=",C(b,y)].join("")]};case"bracket":return O=>(E,b)=>void 0===b||y.skipNull&&null===b||y.skipEmptyString&&""===b?E:null===b?[...E,[C(O,y),"[]"].join("")]:[...E,[C(O,y),"[]=",C(b,y)].join("")];case"colon-list-separator":return O=>(E,b)=>void 0===b||y.skipNull&&null===b||y.skipEmptyString&&""===b?E:null===b?[...E,[C(O,y),":list="].join("")]:[...E,[C(O,y),":list=",C(b,y)].join("")];case"comma":case"separator":case"bracket-separator":{const O="bracket-separator"===y.arrayFormat?"[]=":"=";return E=>(b,N)=>void 0===N||y.skipNull&&null===N||y.skipEmptyString&&""===N?b:(N=null===N?"":N,0===b.length?[[C(E,y),O,C(N,y)].join("")]:[[b,C(N,y)].join(y.arrayFormatSeparator)])}default:return O=>(E,b)=>void 0===b||y.skipNull&&null===b||y.skipEmptyString&&""===b?E:null===b?[...E,C(O,y)]:[...E,[C(O,y),"=",C(b,y)].join("")]}}(O),N={};for(const a of Object.keys(y))E(a)||(N[a]=y[a]);const A=Object.keys(N);return!1!==O.sort&&A.sort(O.sort),A.map(a=>{const u=y[a];return void 0===u?"":null===u?C(a,O):Array.isArray(u)?0===u.length&&"bracket-separator"===O.arrayFormat?C(a,O)+"[]":u.reduce(b(a),[]).join("&"):C(a,O)+"="+C(u,O)}).filter(a=>a.length>0).join("&")},p.parseUrl=(y,O)=>{O=Object.assign({decode:!0},O);const[E,b]=be(y,"#");return Object.assign({url:E.split("?")[0]||"",query:me(w(y),O)},O&&O.parseFragmentIdentifier&&b?{fragmentIdentifier:W(b,O)}:{})},p.stringifyUrl=(y,O)=>{O=Object.assign({encode:!0,strict:!0,[pe]:!0},O);const E=se(y.url).split("?")[0]||"",b=p.extract(y.url),N=p.parse(b,{sort:!1}),A=Object.assign(N,y.query);let a=p.stringify(A,O);a&&(a=`?${a}`);let u=function(y){let O="";const E=y.indexOf("#");return-1!==E&&(O=y.slice(E)),O}(y.url);return y.fragmentIdentifier&&(u=`#${O[pe]?C(y.fragmentIdentifier,O):y.fragmentIdentifier}`),`${E}${a}${u}`},p.pick=(y,O,E)=>{E=Object.assign({parseFragmentIdentifier:!0,[pe]:!1},E);const{url:b,query:N,fragmentIdentifier:A}=p.parseUrl(y,E);return p.stringifyUrl({url:b,query:ge(N,O),fragmentIdentifier:A},E)},p.exclude=(y,O,E)=>{const b=Array.isArray(O)?N=>!O.includes(N):(N,A)=>!O(N,A);return p.pick(y,b,E)}},10979:Oe=>{"use strict";Oe.exports=function(p,F){for(var M={},oe=Object.keys(p),be=Array.isArray(F),ge=0;ge<oe.length;ge++){var G=oe[ge],pe=p[G];(be?-1!==F.indexOf(G):F(G,pe,p))&&(M[G]=pe)}return M}},6856:(Oe,p,F)=>{Oe=F.nmd(Oe);var oe="__lodash_hash_undefined__",G=9007199254740991,pe="[object Arguments]",K="[object Array]",L="[object Boolean]",C="[object Date]",W="[object Error]",fe="[object Function]",ue="[object Map]",w="[object Number]",me="[object Object]",y="[object Promise]",E="[object RegExp]",b="[object Set]",N="[object String]",u="[object WeakMap]",m="[object ArrayBuffer]",g="[object DataView]",Se=/^\[object .+?Constructor\]$/,ve=/^(?:0|[1-9]\d*)$/,Ee={};Ee["[object Float32Array]"]=Ee["[object Float64Array]"]=Ee["[object Int8Array]"]=Ee["[object Int16Array]"]=Ee["[object Int32Array]"]=Ee["[object Uint8Array]"]=Ee["[object Uint8ClampedArray]"]=Ee["[object Uint16Array]"]=Ee["[object Uint32Array]"]=!0,Ee[pe]=Ee[K]=Ee[m]=Ee[L]=Ee[g]=Ee[C]=Ee[W]=Ee[fe]=Ee[ue]=Ee[w]=Ee[me]=Ee[E]=Ee[b]=Ee[N]=Ee[u]=!1;var Ie="object"==typeof global&&global&&global.Object===Object&&global,Ce="object"==typeof self&&self&&self.Object===Object&&self,Ae=Ie||Ce||Function("return this")(),ae=p&&!p.nodeType&&p,le=ae&&Oe&&!Oe.nodeType&&Oe,k=le&&le.exports===ae,h=k&&Ie.process,H=function(){try{return h&&h.binding&&h.binding("util")}catch{}}(),De=H&&H.isTypedArray;function ct(U,Y){for(var we=-1,Ne=null==U?0:U.length;++we<Ne;)if(Y(U[we],we,U))return!0;return!1}function St(U,Y){return U.has(Y)}function nt(U){var Y=-1,we=Array(U.size);return U.forEach(function(Ne,gt){we[++Y]=[gt,Ne]}),we}function Ge(U){var Y=-1,we=Array(U.size);return U.forEach(function(Ne){we[++Y]=Ne}),we}var U,qe=Array.prototype,Fe=Object.prototype,Me=Ae["__core-js_shared__"],He=Function.prototype.toString,je=Fe.hasOwnProperty,tt=(U=/[^.]+$/.exec(Me&&Me.keys&&Me.keys.IE_PROTO||""))?"Symbol(src)_1."+U:"",rt=Fe.toString,ot=RegExp("^"+He.call(je).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),at=k?Ae.Buffer:void 0,st=Ae.Symbol,ft=Ae.Uint8Array,dt=Fe.propertyIsEnumerable,hn=qe.splice,Jt=st?st.toStringTag:void 0,bn=Object.getOwnPropertySymbols,Cn=at?at.isBuffer:void 0,Rn=function(U,Y){return function(we){return U(Y(we))}}(Object.keys,Object),An=Un(Ae,"DataView"),vn=Un(Ae,"Map"),It=Un(Ae,"Promise"),Pt=Un(Ae,"Set"),Nt=Un(Ae,"WeakMap"),vt=Un(Object,"create"),Lt=jn(An),Mt=jn(vn),Ut=jn(It),Ct=jn(Pt),$t=jn(Nt),jt=st?st.prototype:void 0,At=jt?jt.valueOf:void 0;function mt(U){var Y=-1,we=null==U?0:U.length;for(this.clear();++Y<we;){var Ne=U[Y];this.set(Ne[0],Ne[1])}}function wn(U){var Y=-1,we=null==U?0:U.length;for(this.clear();++Y<we;){var Ne=U[Y];this.set(Ne[0],Ne[1])}}function Sn(U){var Y=-1,we=null==U?0:U.length;for(this.clear();++Y<we;){var Ne=U[Y];this.set(Ne[0],Ne[1])}}function tr(U){var Y=-1,we=null==U?0:U.length;for(this.__data__=new Sn;++Y<we;)this.add(U[Y])}function Dn(U){var Y=this.__data__=new wn(U);this.size=Y.size}function nr(U,Y){for(var we=U.length;we--;)if(Ci(U[we][0],Y))return we;return-1}function Bn(U){return null==U?void 0===U?"[object Undefined]":"[object Null]":Jt&&Jt in Object(U)?function(U){var Y=je.call(U,Jt),we=U[Jt];try{U[Jt]=void 0;var Ne=!0}catch{}var gt=rt.call(U);return Ne&&(Y?U[Jt]=we:delete U[Jt]),gt}(U):function(U){return rt.call(U)}(U)}function jr(U){return ir(U)&&Bn(U)==pe}function Fr(U,Y,we,Ne,gt){return U===Y||(null==U||null==Y||!ir(U)&&!ir(Y)?U!=U&&Y!=Y:function(U,Y,we,Ne,gt,$e){var Dt=Kn(U),Vt=Kn(Y),qt=Dt?K:ln(U),Ot=Vt?K:ln(Y),rn=(qt=qt==pe?me:qt)==me,fn=(Ot=Ot==pe?me:Ot)==me,Qt=qt==Ot;if(Qt&&Br(U)){if(!Br(Y))return!1;Dt=!0,rn=!1}if(Qt&&!rn)return $e||($e=new Dn),Dt||Ai(U)?Zt(U,Y,we,Ne,gt,$e):function(U,Y,we,Ne,gt,$e,Dt){switch(we){case g:if(U.byteLength!=Y.byteLength||U.byteOffset!=Y.byteOffset)return!1;U=U.buffer,Y=Y.buffer;case m:return!(U.byteLength!=Y.byteLength||!$e(new ft(U),new ft(Y)));case L:case C:case w:return Ci(+U,+Y);case W:return U.name==Y.name&&U.message==Y.message;case E:case N:return U==Y+"";case ue:var Vt=nt;case b:if(Vt||(Vt=Ge),U.size!=Y.size&&!(1&Ne))return!1;var Ot=Dt.get(U);if(Ot)return Ot==Y;Ne|=2,Dt.set(U,Y);var rn=Zt(Vt(U),Vt(Y),Ne,gt,$e,Dt);return Dt.delete(U),rn;case"[object Symbol]":if(At)return At.call(U)==At.call(Y)}return!1}(U,Y,qt,we,Ne,gt,$e);if(!(1&we)){var dn=rn&&je.call(U,"__wrapped__"),nn=fn&&je.call(Y,"__wrapped__");if(dn||nn){var pn=dn?U.value():U,En=nn?Y.value():Y;return $e||($e=new Dn),gt(pn,En,we,Ne,$e)}}return!!Qt&&($e||($e=new Dn),function(U,Y,we,Ne,gt,$e){var Dt=1&we,Vt=Lr(U),qt=Vt.length;if(qt!=Lr(Y).length&&!Dt)return!1;for(var fn=qt;fn--;){var Qt=Vt[fn];if(!(Dt?Qt in Y:je.call(Y,Qt)))return!1}var dn=$e.get(U);if(dn&&$e.get(Y))return dn==Y;var nn=!0;$e.set(U,Y),$e.set(Y,U);for(var pn=Dt;++fn<qt;){var En=U[Qt=Vt[fn]],Fn=Y[Qt];if(Ne)var Vr=Dt?Ne(Fn,En,Qt,Y,U,$e):Ne(En,Fn,Qt,U,Y,$e);if(!(void 0===Vr?En===Fn||gt(En,Fn,we,Ne,$e):Vr)){nn=!1;break}pn||(pn="constructor"==Qt)}if(nn&&!pn){var hr=U.constructor,Vn=Y.constructor;hr!=Vn&&"constructor"in U&&"constructor"in Y&&!("function"==typeof hr&&hr instanceof hr&&"function"==typeof Vn&&Vn instanceof Vn)&&(nn=!1)}return $e.delete(U),$e.delete(Y),nn}(U,Y,we,Ne,gt,$e))}(U,Y,we,Ne,Fr,gt))}function Zt(U,Y,we,Ne,gt,$e){var Dt=1&we,Vt=U.length,qt=Y.length;if(Vt!=qt&&!(Dt&&qt>Vt))return!1;var Ot=$e.get(U);if(Ot&&$e.get(Y))return Ot==Y;var rn=-1,fn=!0,Qt=2&we?new tr:void 0;for($e.set(U,Y),$e.set(Y,U);++rn<Vt;){var dn=U[rn],nn=Y[rn];if(Ne)var pn=Dt?Ne(nn,dn,rn,Y,U,$e):Ne(dn,nn,rn,U,Y,$e);if(void 0!==pn){if(pn)continue;fn=!1;break}if(Qt){if(!ct(Y,function(En,Fn){if(!St(Qt,Fn)&&(dn===En||gt(dn,En,we,Ne,$e)))return Qt.push(Fn)})){fn=!1;break}}else if(dn!==nn&&!gt(dn,nn,we,Ne,$e)){fn=!1;break}}return $e.delete(U),$e.delete(Y),fn}function Lr(U){return function(U,Y,we){var Ne=Y(U);return Kn(U)?Ne:function(U,Y){for(var we=-1,Ne=Y.length,gt=U.length;++we<Ne;)U[gt+we]=Y[we];return U}(Ne,we(U))}(U,Rs,$r)}function On(U,Y){var we=U.__data__;return function(U){var Y=typeof U;return"string"==Y||"number"==Y||"symbol"==Y||"boolean"==Y?"__proto__"!==U:null===U}(Y)?we["string"==typeof Y?"string":"hash"]:we.map}function Un(U,Y){var we=function(U,Y){return null==U?void 0:U[Y]}(U,Y);return function(U){return!(!Ue(U)||function(U){return!!tt&&tt in U}(U))&&(Yt(U)?ot:Se).test(jn(U))}(we)?we:void 0}mt.prototype.clear=function(){this.__data__=vt?vt(null):{},this.size=0},mt.prototype.delete=function(U){var Y=this.has(U)&&delete this.__data__[U];return this.size-=Y?1:0,Y},mt.prototype.get=function(U){var Y=this.__data__;if(vt){var we=Y[U];return we===oe?void 0:we}return je.call(Y,U)?Y[U]:void 0},mt.prototype.has=function(U){var Y=this.__data__;return vt?void 0!==Y[U]:je.call(Y,U)},mt.prototype.set=function(U,Y){var we=this.__data__;return this.size+=this.has(U)?0:1,we[U]=vt&&void 0===Y?oe:Y,this},wn.prototype.clear=function(){this.__data__=[],this.size=0},wn.prototype.delete=function(U){var Y=this.__data__,we=nr(Y,U);return!(we<0||(we==Y.length-1?Y.pop():hn.call(Y,we,1),--this.size,0))},wn.prototype.get=function(U){var Y=this.__data__,we=nr(Y,U);return we<0?void 0:Y[we][1]},wn.prototype.has=function(U){return nr(this.__data__,U)>-1},wn.prototype.set=function(U,Y){var we=this.__data__,Ne=nr(we,U);return Ne<0?(++this.size,we.push([U,Y])):we[Ne][1]=Y,this},Sn.prototype.clear=function(){this.size=0,this.__data__={hash:new mt,map:new(vn||wn),string:new mt}},Sn.prototype.delete=function(U){var Y=On(this,U).delete(U);return this.size-=Y?1:0,Y},Sn.prototype.get=function(U){return On(this,U).get(U)},Sn.prototype.has=function(U){return On(this,U).has(U)},Sn.prototype.set=function(U,Y){var we=On(this,U),Ne=we.size;return we.set(U,Y),this.size+=we.size==Ne?0:1,this},tr.prototype.add=tr.prototype.push=function(U){return this.__data__.set(U,oe),this},tr.prototype.has=function(U){return this.__data__.has(U)},Dn.prototype.clear=function(){this.__data__=new wn,this.size=0},Dn.prototype.delete=function(U){var Y=this.__data__,we=Y.delete(U);return this.size=Y.size,we},Dn.prototype.get=function(U){return this.__data__.get(U)},Dn.prototype.has=function(U){return this.__data__.has(U)},Dn.prototype.set=function(U,Y){var we=this.__data__;if(we instanceof wn){var Ne=we.__data__;if(!vn||Ne.length<199)return Ne.push([U,Y]),this.size=++we.size,this;we=this.__data__=new Sn(Ne)}return we.set(U,Y),this.size=we.size,this};var $r=bn?function(U){return null==U?[]:(U=Object(U),function(U,Y){for(var we=-1,Ne=null==U?0:U.length,gt=0,$e=[];++we<Ne;){var Dt=U[we];Y(Dt)&&($e[gt++]=Dt)}return $e}(bn(U),function(Y){return dt.call(U,Y)}))}:function(){return[]},ln=Bn;function rr(U,Y){return!!(Y=Y??G)&&("number"==typeof U||ve.test(U))&&U>-1&&U%1==0&&U<Y}function jn(U){if(null!=U){try{return He.call(U)}catch{}try{return U+""}catch{}}return""}function Ci(U,Y){return U===Y||U!=U&&Y!=Y}(An&&ln(new An(new ArrayBuffer(1)))!=g||vn&&ln(new vn)!=ue||It&&ln(It.resolve())!=y||Pt&&ln(new Pt)!=b||Nt&&ln(new Nt)!=u)&&(ln=function(U){var Y=Bn(U),we=Y==me?U.constructor:void 0,Ne=we?jn(we):"";if(Ne)switch(Ne){case Lt:return g;case Mt:return ue;case Ut:return y;case Ct:return b;case $t:return u}return Y});var zr=jr(function(){return arguments}())?jr:function(U){return ir(U)&&je.call(U,"callee")&&!dt.call(U,"callee")},Kn=Array.isArray,Br=Cn||function(){return!1};function Yt(U){if(!Ue(U))return!1;var Y=Bn(U);return Y==fe||"[object GeneratorFunction]"==Y||"[object AsyncFunction]"==Y||"[object Proxy]"==Y}function Xt(U){return"number"==typeof U&&U>-1&&U%1==0&&U<=G}function Ue(U){var Y=typeof U;return null!=U&&("object"==Y||"function"==Y)}function ir(U){return null!=U&&"object"==typeof U}var Ai=De?function(U){return function(Y){return U(Y)}}(De):function(U){return ir(U)&&Xt(U.length)&&!!Ee[Bn(U)]};function Rs(U){return function(U){return null!=U&&Xt(U.length)&&!Yt(U)}(U)?function(U,Y){var we=Kn(U),Ne=!we&&zr(U),gt=!we&&!Ne&&Br(U),$e=!we&&!Ne&&!gt&&Ai(U),Dt=we||Ne||gt||$e,Vt=Dt?function(U,Y){for(var we=-1,Ne=Array(U);++we<U;)Ne[we]=Y(we);return Ne}(U.length,String):[],qt=Vt.length;for(var Ot in U)(Y||je.call(U,Ot))&&(!Dt||!("length"==Ot||gt&&("offset"==Ot||"parent"==Ot)||$e&&("buffer"==Ot||"byteLength"==Ot||"byteOffset"==Ot)||rr(Ot,qt)))&&Vt.push(Ot);return Vt}(U):function(U){if(!function(U){var Y=U&&U.constructor;return U===("function"==typeof Y&&Y.prototype||Fe)}(U))return Rn(U);var Y=[];for(var we in Object(U))je.call(U,we)&&"constructor"!=we&&Y.push(we);return Y}(U)}Oe.exports=function(U,Y){return Fr(U,Y)}},71778:Oe=>{"use strict";function p(M){try{return JSON.stringify(M)}catch{return'"[Circular]"'}}Oe.exports=function(M,oe,be){var ge=be&&be.stringify||p;if("object"==typeof M&&null!==M){var pe=oe.length+1;if(1===pe)return M;var K=new Array(pe);K[0]=ge(M);for(var $=1;$<pe;$++)K[$]=ge(oe[$]);return K.join(" ")}if("string"!=typeof M)return M;var L=oe.length;if(0===L)return M;for(var C="",W=0,fe=-1,se=M&&M.length||0,ue=0;ue<se;){if(37===M.charCodeAt(ue)&&ue+1<se){switch(fe=fe>-1?fe:0,M.charCodeAt(ue+1)){case 100:case 102:if(W>=L||null==oe[W])break;fe<ue&&(C+=M.slice(fe,ue)),C+=Number(oe[W]),fe=ue+2,ue++;break;case 105:if(W>=L||null==oe[W])break;fe<ue&&(C+=M.slice(fe,ue)),C+=Math.floor(Number(oe[W])),fe=ue+2,ue++;break;case 79:case 111:case 106:if(W>=L||void 0===oe[W])break;fe<ue&&(C+=M.slice(fe,ue));var w=typeof oe[W];if("string"===w){C+="'"+oe[W]+"'",fe=ue+2,ue++;break}if("function"===w){C+=oe[W].name||"<anonymous>",fe=ue+2,ue++;break}C+=ge(oe[W]),fe=ue+2,ue++;break;case 115:if(W>=L)break;fe<ue&&(C+=M.slice(fe,ue)),C+=String(oe[W]),fe=ue+2,ue++;break;case 37:fe<ue&&(C+=M.slice(fe,ue)),C+="%",fe=ue+2,ue++,W--}++W}++ue}return-1===fe?M:(fe<se&&(C+=M.slice(fe)),C)}},28898:(Oe,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.safeJsonParse=function(oe){if("string"!=typeof oe)throw new Error("Cannot safe json parse value of type "+typeof oe);try{return JSON.parse(oe)}catch{return oe}},p.safeJsonStringify=function(oe){return"string"==typeof oe?oe:JSON.stringify(oe,(be,ge)=>void 0===ge?null:ge)}},83411:(Oe,p,F)=>{"use strict";F.r(p),F.d(p,{__extends:()=>oe,__assign:()=>be,__rest:()=>ge,__decorate:()=>G,__param:()=>pe,__metadata:()=>K,__awaiter:()=>$,__generator:()=>L,__createBinding:()=>C,__exportStar:()=>W,__values:()=>fe,__read:()=>se,__spread:()=>ue,__spreadArrays:()=>w,__await:()=>ye,__asyncGenerator:()=>me,__asyncDelegator:()=>y,__asyncValues:()=>O,__makeTemplateObject:()=>E,__importStar:()=>b,__importDefault:()=>N,__classPrivateFieldGet:()=>A,__classPrivateFieldSet:()=>a});var M=function(u,m){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,x){g.__proto__=x}||function(g,x){for(var T in x)x.hasOwnProperty(T)&&(g[T]=x[T])})(u,m)};function oe(u,m){function g(){this.constructor=u}M(u,m),u.prototype=null===m?Object.create(m):(g.prototype=m.prototype,new g)}var be=function(){return be=Object.assign||function(m){for(var g,x=1,T=arguments.length;x<T;x++)for(var _ in g=arguments[x])Object.prototype.hasOwnProperty.call(g,_)&&(m[_]=g[_]);return m},be.apply(this,arguments)};function ge(u,m){var g={};for(var x in u)Object.prototype.hasOwnProperty.call(u,x)&&m.indexOf(x)<0&&(g[x]=u[x]);if(null!=u&&"function"==typeof Object.getOwnPropertySymbols){var T=0;for(x=Object.getOwnPropertySymbols(u);T<x.length;T++)m.indexOf(x[T])<0&&Object.prototype.propertyIsEnumerable.call(u,x[T])&&(g[x[T]]=u[x[T]])}return g}function G(u,m,g,x){var I,T=arguments.length,_=T<3?m:null===x?x=Object.getOwnPropertyDescriptor(m,g):x;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)_=Reflect.decorate(u,m,g,x);else for(var R=u.length-1;R>=0;R--)(I=u[R])&&(_=(T<3?I(_):T>3?I(m,g,_):I(m,g))||_);return T>3&&_&&Object.defineProperty(m,g,_),_}function pe(u,m){return function(g,x){m(g,x,u)}}function K(u,m){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(u,m)}function $(u,m,g,x){return new(g||(g=Promise))(function(_,I){function R(V){try{v(x.next(V))}catch(de){I(de)}}function j(V){try{v(x.throw(V))}catch(de){I(de)}}function v(V){V.done?_(V.value):function(_){return _ instanceof g?_:new g(function(I){I(_)})}(V.value).then(R,j)}v((x=x.apply(u,m||[])).next())})}function L(u,m){var x,T,_,I,g={label:0,sent:function(){if(1&_[0])throw _[1];return _[1]},trys:[],ops:[]};return I={next:R(0),throw:R(1),return:R(2)},"function"==typeof Symbol&&(I[Symbol.iterator]=function(){return this}),I;function R(v){return function(V){return function(v){if(x)throw new TypeError("Generator is already executing.");for(;g;)try{if(x=1,T&&(_=2&v[0]?T.return:v[0]?T.throw||((_=T.return)&&_.call(T),0):T.next)&&!(_=_.call(T,v[1])).done)return _;switch(T=0,_&&(v=[2&v[0],_.value]),v[0]){case 0:case 1:_=v;break;case 4:return g.label++,{value:v[1],done:!1};case 5:g.label++,T=v[1],v=[0];continue;case 7:v=g.ops.pop(),g.trys.pop();continue;default:if(!(_=(_=g.trys).length>0&&_[_.length-1])&&(6===v[0]||2===v[0])){g=0;continue}if(3===v[0]&&(!_||v[1]>_[0]&&v[1]<_[3])){g.label=v[1];break}if(6===v[0]&&g.label<_[1]){g.label=_[1],_=v;break}if(_&&g.label<_[2]){g.label=_[2],g.ops.push(v);break}_[2]&&g.ops.pop(),g.trys.pop();continue}v=m.call(u,g)}catch(V){v=[6,V],T=0}finally{x=_=0}if(5&v[0])throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}([v,V])}}}function C(u,m,g,x){void 0===x&&(x=g),u[x]=m[g]}function W(u,m){for(var g in u)"default"!==g&&!m.hasOwnProperty(g)&&(m[g]=u[g])}function fe(u){var m="function"==typeof Symbol&&Symbol.iterator,g=m&&u[m],x=0;if(g)return g.call(u);if(u&&"number"==typeof u.length)return{next:function(){return u&&x>=u.length&&(u=void 0),{value:u&&u[x++],done:!u}}};throw new TypeError(m?"Object is not iterable.":"Symbol.iterator is not defined.")}function se(u,m){var g="function"==typeof Symbol&&u[Symbol.iterator];if(!g)return u;var T,I,x=g.call(u),_=[];try{for(;(void 0===m||m-- >0)&&!(T=x.next()).done;)_.push(T.value)}catch(R){I={error:R}}finally{try{T&&!T.done&&(g=x.return)&&g.call(x)}finally{if(I)throw I.error}}return _}function ue(){for(var u=[],m=0;m<arguments.length;m++)u=u.concat(se(arguments[m]));return u}function w(){for(var u=0,m=0,g=arguments.length;m<g;m++)u+=arguments[m].length;var x=Array(u),T=0;for(m=0;m<g;m++)for(var _=arguments[m],I=0,R=_.length;I<R;I++,T++)x[T]=_[I];return x}function ye(u){return this instanceof ye?(this.v=u,this):new ye(u)}function me(u,m,g){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var T,x=g.apply(u,m||[]),_=[];return T={},I("next"),I("throw"),I("return"),T[Symbol.asyncIterator]=function(){return this},T;function I(q){x[q]&&(T[q]=function(Se){return new Promise(function(ve,Ee){_.push([q,Se,ve,Ee])>1||R(q,Se)})})}function R(q,Se){try{!function(q){q.value instanceof ye?Promise.resolve(q.value.v).then(v,V):de(_[0][2],q)}(x[q](Se))}catch(ve){de(_[0][3],ve)}}function v(q){R("next",q)}function V(q){R("throw",q)}function de(q,Se){q(Se),_.shift(),_.length&&R(_[0][0],_[0][1])}}function y(u){var m,g;return m={},x("next"),x("throw",function(T){throw T}),x("return"),m[Symbol.iterator]=function(){return this},m;function x(T,_){m[T]=u[T]?function(I){return(g=!g)?{value:ye(u[T](I)),done:"return"===T}:_?_(I):I}:_}}function O(u){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var g,m=u[Symbol.asyncIterator];return m?m.call(u):(u=fe(u),g={},x("next"),x("throw"),x("return"),g[Symbol.asyncIterator]=function(){return this},g);function x(_){g[_]=u[_]&&function(I){return new Promise(function(R,j){!function(_,I,R,j){Promise.resolve(j).then(function(v){_({value:v,done:R})},I)}(R,j,(I=u[_](I)).done,I.value)})}}}function E(u,m){return Object.defineProperty?Object.defineProperty(u,"raw",{value:m}):u.raw=m,u}function b(u){if(u&&u.__esModule)return u;var m={};if(null!=u)for(var g in u)Object.hasOwnProperty.call(u,g)&&(m[g]=u[g]);return m.default=u,m}function N(u){return u&&u.__esModule?u:{default:u}}function A(u,m){if(!m.has(u))throw new TypeError("attempted to get private field on non-instance");return m.get(u)}function a(u,m,g){if(!m.has(u))throw new TypeError("attempted to set private field on non-instance");return m.set(u,g),g}},57436:(Oe,p,F)=>{"use strict";F.r(p),F.d(p,{__extends:()=>oe,__assign:()=>be,__rest:()=>ge,__decorate:()=>G,__param:()=>pe,__metadata:()=>K,__awaiter:()=>$,__generator:()=>L,__createBinding:()=>C,__exportStar:()=>W,__values:()=>fe,__read:()=>se,__spread:()=>ue,__spreadArrays:()=>w,__await:()=>ye,__asyncGenerator:()=>me,__asyncDelegator:()=>y,__asyncValues:()=>O,__makeTemplateObject:()=>E,__importStar:()=>b,__importDefault:()=>N,__classPrivateFieldGet:()=>A,__classPrivateFieldSet:()=>a});var M=function(u,m){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,x){g.__proto__=x}||function(g,x){for(var T in x)x.hasOwnProperty(T)&&(g[T]=x[T])})(u,m)};function oe(u,m){function g(){this.constructor=u}M(u,m),u.prototype=null===m?Object.create(m):(g.prototype=m.prototype,new g)}var be=function(){return be=Object.assign||function(m){for(var g,x=1,T=arguments.length;x<T;x++)for(var _ in g=arguments[x])Object.prototype.hasOwnProperty.call(g,_)&&(m[_]=g[_]);return m},be.apply(this,arguments)};function ge(u,m){var g={};for(var x in u)Object.prototype.hasOwnProperty.call(u,x)&&m.indexOf(x)<0&&(g[x]=u[x]);if(null!=u&&"function"==typeof Object.getOwnPropertySymbols){var T=0;for(x=Object.getOwnPropertySymbols(u);T<x.length;T++)m.indexOf(x[T])<0&&Object.prototype.propertyIsEnumerable.call(u,x[T])&&(g[x[T]]=u[x[T]])}return g}function G(u,m,g,x){var I,T=arguments.length,_=T<3?m:null===x?x=Object.getOwnPropertyDescriptor(m,g):x;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)_=Reflect.decorate(u,m,g,x);else for(var R=u.length-1;R>=0;R--)(I=u[R])&&(_=(T<3?I(_):T>3?I(m,g,_):I(m,g))||_);return T>3&&_&&Object.defineProperty(m,g,_),_}function pe(u,m){return function(g,x){m(g,x,u)}}function K(u,m){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(u,m)}function $(u,m,g,x){return new(g||(g=Promise))(function(_,I){function R(V){try{v(x.next(V))}catch(de){I(de)}}function j(V){try{v(x.throw(V))}catch(de){I(de)}}function v(V){V.done?_(V.value):function(_){return _ instanceof g?_:new g(function(I){I(_)})}(V.value).then(R,j)}v((x=x.apply(u,m||[])).next())})}function L(u,m){var x,T,_,I,g={label:0,sent:function(){if(1&_[0])throw _[1];return _[1]},trys:[],ops:[]};return I={next:R(0),throw:R(1),return:R(2)},"function"==typeof Symbol&&(I[Symbol.iterator]=function(){return this}),I;function R(v){return function(V){return function(v){if(x)throw new TypeError("Generator is already executing.");for(;g;)try{if(x=1,T&&(_=2&v[0]?T.return:v[0]?T.throw||((_=T.return)&&_.call(T),0):T.next)&&!(_=_.call(T,v[1])).done)return _;switch(T=0,_&&(v=[2&v[0],_.value]),v[0]){case 0:case 1:_=v;break;case 4:return g.label++,{value:v[1],done:!1};case 5:g.label++,T=v[1],v=[0];continue;case 7:v=g.ops.pop(),g.trys.pop();continue;default:if(!(_=(_=g.trys).length>0&&_[_.length-1])&&(6===v[0]||2===v[0])){g=0;continue}if(3===v[0]&&(!_||v[1]>_[0]&&v[1]<_[3])){g.label=v[1];break}if(6===v[0]&&g.label<_[1]){g.label=_[1],_=v;break}if(_&&g.label<_[2]){g.label=_[2],g.ops.push(v);break}_[2]&&g.ops.pop(),g.trys.pop();continue}v=m.call(u,g)}catch(V){v=[6,V],T=0}finally{x=_=0}if(5&v[0])throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}([v,V])}}}function C(u,m,g,x){void 0===x&&(x=g),u[x]=m[g]}function W(u,m){for(var g in u)"default"!==g&&!m.hasOwnProperty(g)&&(m[g]=u[g])}function fe(u){var m="function"==typeof Symbol&&Symbol.iterator,g=m&&u[m],x=0;if(g)return g.call(u);if(u&&"number"==typeof u.length)return{next:function(){return u&&x>=u.length&&(u=void 0),{value:u&&u[x++],done:!u}}};throw new TypeError(m?"Object is not iterable.":"Symbol.iterator is not defined.")}function se(u,m){var g="function"==typeof Symbol&&u[Symbol.iterator];if(!g)return u;var T,I,x=g.call(u),_=[];try{for(;(void 0===m||m-- >0)&&!(T=x.next()).done;)_.push(T.value)}catch(R){I={error:R}}finally{try{T&&!T.done&&(g=x.return)&&g.call(x)}finally{if(I)throw I.error}}return _}function ue(){for(var u=[],m=0;m<arguments.length;m++)u=u.concat(se(arguments[m]));return u}function w(){for(var u=0,m=0,g=arguments.length;m<g;m++)u+=arguments[m].length;var x=Array(u),T=0;for(m=0;m<g;m++)for(var _=arguments[m],I=0,R=_.length;I<R;I++,T++)x[T]=_[I];return x}function ye(u){return this instanceof ye?(this.v=u,this):new ye(u)}function me(u,m,g){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var T,x=g.apply(u,m||[]),_=[];return T={},I("next"),I("throw"),I("return"),T[Symbol.asyncIterator]=function(){return this},T;function I(q){x[q]&&(T[q]=function(Se){return new Promise(function(ve,Ee){_.push([q,Se,ve,Ee])>1||R(q,Se)})})}function R(q,Se){try{!function(q){q.value instanceof ye?Promise.resolve(q.value.v).then(v,V):de(_[0][2],q)}(x[q](Se))}catch(ve){de(_[0][3],ve)}}function v(q){R("next",q)}function V(q){R("throw",q)}function de(q,Se){q(Se),_.shift(),_.length&&R(_[0][0],_[0][1])}}function y(u){var m,g;return m={},x("next"),x("throw",function(T){throw T}),x("return"),m[Symbol.iterator]=function(){return this},m;function x(T,_){m[T]=u[T]?function(I){return(g=!g)?{value:ye(u[T](I)),done:"return"===T}:_?_(I):I}:_}}function O(u){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var g,m=u[Symbol.asyncIterator];return m?m.call(u):(u=fe(u),g={},x("next"),x("throw"),x("return"),g[Symbol.asyncIterator]=function(){return this},g);function x(_){g[_]=u[_]&&function(I){return new Promise(function(R,j){!function(_,I,R,j){Promise.resolve(j).then(function(v){_({value:v,done:R})},I)}(R,j,(I=u[_](I)).done,I.value)})}}}function E(u,m){return Object.defineProperty?Object.defineProperty(u,"raw",{value:m}):u.raw=m,u}function b(u){if(u&&u.__esModule)return u;var m={};if(null!=u)for(var g in u)Object.hasOwnProperty.call(u,g)&&(m[g]=u[g]);return m.default=u,m}function N(u){return u&&u.__esModule?u:{default:u}}function A(u,m){if(!m.has(u))throw new TypeError("attempted to get private field on non-instance");return m.get(u)}function a(u,m,g){if(!m.has(u))throw new TypeError("attempted to set private field on non-instance");return m.set(u,g),g}},17978:(Oe,p,F)=>{"use strict";F.r(p),F.d(p,{__extends:()=>oe,__assign:()=>be,__rest:()=>ge,__decorate:()=>G,__param:()=>pe,__metadata:()=>K,__awaiter:()=>$,__generator:()=>L,__createBinding:()=>C,__exportStar:()=>W,__values:()=>fe,__read:()=>se,__spread:()=>ue,__spreadArrays:()=>w,__await:()=>ye,__asyncGenerator:()=>me,__asyncDelegator:()=>y,__asyncValues:()=>O,__makeTemplateObject:()=>E,__importStar:()=>b,__importDefault:()=>N,__classPrivateFieldGet:()=>A,__classPrivateFieldSet:()=>a});var M=function(u,m){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,x){g.__proto__=x}||function(g,x){for(var T in x)x.hasOwnProperty(T)&&(g[T]=x[T])})(u,m)};function oe(u,m){function g(){this.constructor=u}M(u,m),u.prototype=null===m?Object.create(m):(g.prototype=m.prototype,new g)}var be=function(){return be=Object.assign||function(m){for(var g,x=1,T=arguments.length;x<T;x++)for(var _ in g=arguments[x])Object.prototype.hasOwnProperty.call(g,_)&&(m[_]=g[_]);return m},be.apply(this,arguments)};function ge(u,m){var g={};for(var x in u)Object.prototype.hasOwnProperty.call(u,x)&&m.indexOf(x)<0&&(g[x]=u[x]);if(null!=u&&"function"==typeof Object.getOwnPropertySymbols){var T=0;for(x=Object.getOwnPropertySymbols(u);T<x.length;T++)m.indexOf(x[T])<0&&Object.prototype.propertyIsEnumerable.call(u,x[T])&&(g[x[T]]=u[x[T]])}return g}function G(u,m,g,x){var I,T=arguments.length,_=T<3?m:null===x?x=Object.getOwnPropertyDescriptor(m,g):x;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)_=Reflect.decorate(u,m,g,x);else for(var R=u.length-1;R>=0;R--)(I=u[R])&&(_=(T<3?I(_):T>3?I(m,g,_):I(m,g))||_);return T>3&&_&&Object.defineProperty(m,g,_),_}function pe(u,m){return function(g,x){m(g,x,u)}}function K(u,m){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(u,m)}function $(u,m,g,x){return new(g||(g=Promise))(function(_,I){function R(V){try{v(x.next(V))}catch(de){I(de)}}function j(V){try{v(x.throw(V))}catch(de){I(de)}}function v(V){V.done?_(V.value):function(_){return _ instanceof g?_:new g(function(I){I(_)})}(V.value).then(R,j)}v((x=x.apply(u,m||[])).next())})}function L(u,m){var x,T,_,I,g={label:0,sent:function(){if(1&_[0])throw _[1];return _[1]},trys:[],ops:[]};return I={next:R(0),throw:R(1),return:R(2)},"function"==typeof Symbol&&(I[Symbol.iterator]=function(){return this}),I;function R(v){return function(V){return function(v){if(x)throw new TypeError("Generator is already executing.");for(;g;)try{if(x=1,T&&(_=2&v[0]?T.return:v[0]?T.throw||((_=T.return)&&_.call(T),0):T.next)&&!(_=_.call(T,v[1])).done)return _;switch(T=0,_&&(v=[2&v[0],_.value]),v[0]){case 0:case 1:_=v;break;case 4:return g.label++,{value:v[1],done:!1};case 5:g.label++,T=v[1],v=[0];continue;case 7:v=g.ops.pop(),g.trys.pop();continue;default:if(!(_=(_=g.trys).length>0&&_[_.length-1])&&(6===v[0]||2===v[0])){g=0;continue}if(3===v[0]&&(!_||v[1]>_[0]&&v[1]<_[3])){g.label=v[1];break}if(6===v[0]&&g.label<_[1]){g.label=_[1],_=v;break}if(_&&g.label<_[2]){g.label=_[2],g.ops.push(v);break}_[2]&&g.ops.pop(),g.trys.pop();continue}v=m.call(u,g)}catch(V){v=[6,V],T=0}finally{x=_=0}if(5&v[0])throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}([v,V])}}}function C(u,m,g,x){void 0===x&&(x=g),u[x]=m[g]}function W(u,m){for(var g in u)"default"!==g&&!m.hasOwnProperty(g)&&(m[g]=u[g])}function fe(u){var m="function"==typeof Symbol&&Symbol.iterator,g=m&&u[m],x=0;if(g)return g.call(u);if(u&&"number"==typeof u.length)return{next:function(){return u&&x>=u.length&&(u=void 0),{value:u&&u[x++],done:!u}}};throw new TypeError(m?"Object is not iterable.":"Symbol.iterator is not defined.")}function se(u,m){var g="function"==typeof Symbol&&u[Symbol.iterator];if(!g)return u;var T,I,x=g.call(u),_=[];try{for(;(void 0===m||m-- >0)&&!(T=x.next()).done;)_.push(T.value)}catch(R){I={error:R}}finally{try{T&&!T.done&&(g=x.return)&&g.call(x)}finally{if(I)throw I.error}}return _}function ue(){for(var u=[],m=0;m<arguments.length;m++)u=u.concat(se(arguments[m]));return u}function w(){for(var u=0,m=0,g=arguments.length;m<g;m++)u+=arguments[m].length;var x=Array(u),T=0;for(m=0;m<g;m++)for(var _=arguments[m],I=0,R=_.length;I<R;I++,T++)x[T]=_[I];return x}function ye(u){return this instanceof ye?(this.v=u,this):new ye(u)}function me(u,m,g){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var T,x=g.apply(u,m||[]),_=[];return T={},I("next"),I("throw"),I("return"),T[Symbol.asyncIterator]=function(){return this},T;function I(q){x[q]&&(T[q]=function(Se){return new Promise(function(ve,Ee){_.push([q,Se,ve,Ee])>1||R(q,Se)})})}function R(q,Se){try{!function(q){q.value instanceof ye?Promise.resolve(q.value.v).then(v,V):de(_[0][2],q)}(x[q](Se))}catch(ve){de(_[0][3],ve)}}function v(q){R("next",q)}function V(q){R("throw",q)}function de(q,Se){q(Se),_.shift(),_.length&&R(_[0][0],_[0][1])}}function y(u){var m,g;return m={},x("next"),x("throw",function(T){throw T}),x("return"),m[Symbol.iterator]=function(){return this},m;function x(T,_){m[T]=u[T]?function(I){return(g=!g)?{value:ye(u[T](I)),done:"return"===T}:_?_(I):I}:_}}function O(u){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var g,m=u[Symbol.asyncIterator];return m?m.call(u):(u=fe(u),g={},x("next"),x("throw"),x("return"),g[Symbol.asyncIterator]=function(){return this},g);function x(_){g[_]=u[_]&&function(I){return new Promise(function(R,j){!function(_,I,R,j){Promise.resolve(j).then(function(v){_({value:v,done:R})},I)}(R,j,(I=u[_](I)).done,I.value)})}}}function E(u,m){return Object.defineProperty?Object.defineProperty(u,"raw",{value:m}):u.raw=m,u}function b(u){if(u&&u.__esModule)return u;var m={};if(null!=u)for(var g in u)Object.hasOwnProperty.call(u,g)&&(m[g]=u[g]);return m.default=u,m}function N(u){return u&&u.__esModule?u:{default:u}}function A(u,m){if(!m.has(u))throw new TypeError("attempted to get private field on non-instance");return m.get(u)}function a(u,m,g){if(!m.has(u))throw new TypeError("attempted to set private field on non-instance");return m.set(u,g),g}},80017:(Oe,p,F)=>{"use strict";F.r(p),F.d(p,{__extends:()=>oe,__assign:()=>be,__rest:()=>ge,__decorate:()=>G,__param:()=>pe,__metadata:()=>K,__awaiter:()=>$,__generator:()=>L,__createBinding:()=>C,__exportStar:()=>W,__values:()=>fe,__read:()=>se,__spread:()=>ue,__spreadArrays:()=>w,__await:()=>ye,__asyncGenerator:()=>me,__asyncDelegator:()=>y,__asyncValues:()=>O,__makeTemplateObject:()=>E,__importStar:()=>b,__importDefault:()=>N,__classPrivateFieldGet:()=>A,__classPrivateFieldSet:()=>a});var M=function(u,m){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,x){g.__proto__=x}||function(g,x){for(var T in x)x.hasOwnProperty(T)&&(g[T]=x[T])})(u,m)};function oe(u,m){function g(){this.constructor=u}M(u,m),u.prototype=null===m?Object.create(m):(g.prototype=m.prototype,new g)}var be=function(){return be=Object.assign||function(m){for(var g,x=1,T=arguments.length;x<T;x++)for(var _ in g=arguments[x])Object.prototype.hasOwnProperty.call(g,_)&&(m[_]=g[_]);return m},be.apply(this,arguments)};function ge(u,m){var g={};for(var x in u)Object.prototype.hasOwnProperty.call(u,x)&&m.indexOf(x)<0&&(g[x]=u[x]);if(null!=u&&"function"==typeof Object.getOwnPropertySymbols){var T=0;for(x=Object.getOwnPropertySymbols(u);T<x.length;T++)m.indexOf(x[T])<0&&Object.prototype.propertyIsEnumerable.call(u,x[T])&&(g[x[T]]=u[x[T]])}return g}function G(u,m,g,x){var I,T=arguments.length,_=T<3?m:null===x?x=Object.getOwnPropertyDescriptor(m,g):x;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)_=Reflect.decorate(u,m,g,x);else for(var R=u.length-1;R>=0;R--)(I=u[R])&&(_=(T<3?I(_):T>3?I(m,g,_):I(m,g))||_);return T>3&&_&&Object.defineProperty(m,g,_),_}function pe(u,m){return function(g,x){m(g,x,u)}}function K(u,m){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(u,m)}function $(u,m,g,x){return new(g||(g=Promise))(function(_,I){function R(V){try{v(x.next(V))}catch(de){I(de)}}function j(V){try{v(x.throw(V))}catch(de){I(de)}}function v(V){V.done?_(V.value):function(_){return _ instanceof g?_:new g(function(I){I(_)})}(V.value).then(R,j)}v((x=x.apply(u,m||[])).next())})}function L(u,m){var x,T,_,I,g={label:0,sent:function(){if(1&_[0])throw _[1];return _[1]},trys:[],ops:[]};return I={next:R(0),throw:R(1),return:R(2)},"function"==typeof Symbol&&(I[Symbol.iterator]=function(){return this}),I;function R(v){return function(V){return function(v){if(x)throw new TypeError("Generator is already executing.");for(;g;)try{if(x=1,T&&(_=2&v[0]?T.return:v[0]?T.throw||((_=T.return)&&_.call(T),0):T.next)&&!(_=_.call(T,v[1])).done)return _;switch(T=0,_&&(v=[2&v[0],_.value]),v[0]){case 0:case 1:_=v;break;case 4:return g.label++,{value:v[1],done:!1};case 5:g.label++,T=v[1],v=[0];continue;case 7:v=g.ops.pop(),g.trys.pop();continue;default:if(!(_=(_=g.trys).length>0&&_[_.length-1])&&(6===v[0]||2===v[0])){g=0;continue}if(3===v[0]&&(!_||v[1]>_[0]&&v[1]<_[3])){g.label=v[1];break}if(6===v[0]&&g.label<_[1]){g.label=_[1],_=v;break}if(_&&g.label<_[2]){g.label=_[2],g.ops.push(v);break}_[2]&&g.ops.pop(),g.trys.pop();continue}v=m.call(u,g)}catch(V){v=[6,V],T=0}finally{x=_=0}if(5&v[0])throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}([v,V])}}}function C(u,m,g,x){void 0===x&&(x=g),u[x]=m[g]}function W(u,m){for(var g in u)"default"!==g&&!m.hasOwnProperty(g)&&(m[g]=u[g])}function fe(u){var m="function"==typeof Symbol&&Symbol.iterator,g=m&&u[m],x=0;if(g)return g.call(u);if(u&&"number"==typeof u.length)return{next:function(){return u&&x>=u.length&&(u=void 0),{value:u&&u[x++],done:!u}}};throw new TypeError(m?"Object is not iterable.":"Symbol.iterator is not defined.")}function se(u,m){var g="function"==typeof Symbol&&u[Symbol.iterator];if(!g)return u;var T,I,x=g.call(u),_=[];try{for(;(void 0===m||m-- >0)&&!(T=x.next()).done;)_.push(T.value)}catch(R){I={error:R}}finally{try{T&&!T.done&&(g=x.return)&&g.call(x)}finally{if(I)throw I.error}}return _}function ue(){for(var u=[],m=0;m<arguments.length;m++)u=u.concat(se(arguments[m]));return u}function w(){for(var u=0,m=0,g=arguments.length;m<g;m++)u+=arguments[m].length;var x=Array(u),T=0;for(m=0;m<g;m++)for(var _=arguments[m],I=0,R=_.length;I<R;I++,T++)x[T]=_[I];return x}function ye(u){return this instanceof ye?(this.v=u,this):new ye(u)}function me(u,m,g){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var T,x=g.apply(u,m||[]),_=[];return T={},I("next"),I("throw"),I("return"),T[Symbol.asyncIterator]=function(){return this},T;function I(q){x[q]&&(T[q]=function(Se){return new Promise(function(ve,Ee){_.push([q,Se,ve,Ee])>1||R(q,Se)})})}function R(q,Se){try{!function(q){q.value instanceof ye?Promise.resolve(q.value.v).then(v,V):de(_[0][2],q)}(x[q](Se))}catch(ve){de(_[0][3],ve)}}function v(q){R("next",q)}function V(q){R("throw",q)}function de(q,Se){q(Se),_.shift(),_.length&&R(_[0][0],_[0][1])}}function y(u){var m,g;return m={},x("next"),x("throw",function(T){throw T}),x("return"),m[Symbol.iterator]=function(){return this},m;function x(T,_){m[T]=u[T]?function(I){return(g=!g)?{value:ye(u[T](I)),done:"return"===T}:_?_(I):I}:_}}function O(u){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var g,m=u[Symbol.asyncIterator];return m?m.call(u):(u=fe(u),g={},x("next"),x("throw"),x("return"),g[Symbol.asyncIterator]=function(){return this},g);function x(_){g[_]=u[_]&&function(I){return new Promise(function(R,j){!function(_,I,R,j){Promise.resolve(j).then(function(v){_({value:v,done:R})},I)}(R,j,(I=u[_](I)).done,I.value)})}}}function E(u,m){return Object.defineProperty?Object.defineProperty(u,"raw",{value:m}):u.raw=m,u}function b(u){if(u&&u.__esModule)return u;var m={};if(null!=u)for(var g in u)Object.hasOwnProperty.call(u,g)&&(m[g]=u[g]);return m.default=u,m}function N(u){return u&&u.__esModule?u:{default:u}}function A(u,m){if(!m.has(u))throw new TypeError("attempted to get private field on non-instance");return m.get(u)}function a(u,m,g){if(!m.has(u))throw new TypeError("attempted to set private field on non-instance");return m.set(u,g),g}},22694:(Oe,p,F)=>{"use strict";const M=F(71778);Oe.exports=G;const oe=function(){function A(a){return void 0!==a&&a}try{return"undefined"!=typeof globalThis||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return A(self)||A(window)||A(this)||{}}}().console||{},be={mapHttpRequest:w,mapHttpResponse:w,wrapRequestSerializer:ye,wrapResponseSerializer:ye,wrapErrorSerializer:ye,req:w,res:w,err:function(A){const a={type:A.constructor.name,msg:A.message,stack:A.stack};for(const u in A)void 0===a[u]&&(a[u]=A[u]);return a}};function G(A){(A=A||{}).browser=A.browser||{};const a=A.browser.transmit;if(a&&"function"!=typeof a.send)throw Error("pino: transmit option must have a send function");const u=A.browser.write||oe;A.browser.write&&(A.browser.asObject=!0);const m=A.serializers||{},g=function(A,a){return Array.isArray(A)?A.filter(function(m){return"!stdSerializers.err"!==m}):!0===A&&Object.keys(a)}(A.browser.serialize,m);let x=A.browser.serialize;Array.isArray(A.browser.serialize)&&A.browser.serialize.indexOf("!stdSerializers.err")>-1&&(x=!1),"function"==typeof u&&(u.error=u.fatal=u.warn=u.info=u.debug=u.trace=u),!1===A.enabled&&(A.level="silent");const _=A.level||"info",I=Object.create(u);I.log||(I.log=me),Object.defineProperty(I,"levelVal",{get:function(){return"silent"===this.level?1/0:this.levels.values[this.level]}}),Object.defineProperty(I,"level",{get:function(){return this._level},set:function(q){if("silent"!==q&&!this.levels.values[q])throw Error("unknown level "+q);this._level=q,pe(R,I,"error","log"),pe(R,I,"fatal","error"),pe(R,I,"warn","error"),pe(R,I,"info","log"),pe(R,I,"debug","log"),pe(R,I,"trace","log")}});const R={transmit:a,serialize:g,asObject:A.browser.asObject,levels:["error","fatal","warn","info","debug","trace"],timestamp:ue(A)};return I.levels=G.levels,I.level=_,I.setMaxListeners=I.getMaxListeners=I.emit=I.addListener=I.on=I.prependListener=I.once=I.prependOnceListener=I.removeListener=I.removeAllListeners=I.listeners=I.listenerCount=I.eventNames=I.write=I.flush=me,I.serializers=m,I._serialize=g,I._stdErrSerialize=x,I.child=function(q,Se){if(!q)throw new Error("missing bindings for child Pino");Se=Se||{},g&&q.serializers&&(Se.serializers=q.serializers);const ve=Se.serializers;if(g&&ve){var Ee=Object.assign({},m,ve),Ie=!0===A.browser.serialize?Object.keys(Ee):g;delete q.serializers,L([q],Ie,Ee,this._stdErrSerialize)}function Ce(Ae){this._childLevel=1+(0|Ae._childLevel),this.error=C(Ae,q,"error"),this.fatal=C(Ae,q,"fatal"),this.warn=C(Ae,q,"warn"),this.info=C(Ae,q,"info"),this.debug=C(Ae,q,"debug"),this.trace=C(Ae,q,"trace"),Ee&&(this.serializers=Ee,this._serialize=Ie),a&&(this._logEvent=fe([].concat(Ae._logEvent.bindings,q)))}return Ce.prototype=this,new Ce(this)},a&&(I._logEvent=fe()),I}function pe(A,a,u,m){const g=Object.getPrototypeOf(a);a[u]=a.levelVal>a.levels.values[u]?me:g[u]?g[u]:oe[u]||oe[m]||me,function(A,a,u){!A.transmit&&a[u]===me||(a[u]=function(m){return function(){const x=A.timestamp(),T=new Array(arguments.length),_=Object.getPrototypeOf&&Object.getPrototypeOf(this)===oe?oe:this;for(var I=0;I<T.length;I++)T[I]=arguments[I];if(A.serialize&&!A.asObject&&L(T,this._serialize,this.serializers,this._stdErrSerialize),A.asObject?m.call(_,$(this,u,T,x)):m.apply(_,T),A.transmit){const R=A.transmit.level||a.level,v=G.levels.values[u];if(v<G.levels.values[R])return;W(this,{ts:x,methodLevel:u,methodValue:v,transmitLevel:R,transmitValue:G.levels.values[A.transmit.level||a.level],send:A.transmit.send,val:a.levelVal},T)}}}(a[u]))}(A,a,u)}function $(A,a,u,m){A._serialize&&L(u,A._serialize,A.serializers,A._stdErrSerialize);const g=u.slice();let x=g[0];const T={};m&&(T.time=m),T.level=G.levels.values[a];let _=1+(0|A._childLevel);if(_<1&&(_=1),null!==x&&"object"==typeof x){for(;_--&&"object"==typeof g[0];)Object.assign(T,g.shift());x=g.length?M(g.shift(),g):void 0}else"string"==typeof x&&(x=M(g.shift(),g));return void 0!==x&&(T.msg=x),T}function L(A,a,u,m){for(const g in A)if(m&&A[g]instanceof Error)A[g]=G.stdSerializers.err(A[g]);else if("object"==typeof A[g]&&!Array.isArray(A[g]))for(const x in A[g])a&&a.indexOf(x)>-1&&x in u&&(A[g][x]=u[x](A[g][x]))}function C(A,a,u){return function(){const m=new Array(1+arguments.length);m[0]=a;for(var g=1;g<m.length;g++)m[g]=arguments[g-1];return A[u].apply(this,m)}}function W(A,a,u){const m=a.send,g=a.ts,x=a.methodLevel,T=a.methodValue,_=a.val,I=A._logEvent.bindings;L(u,A._serialize||Object.keys(A.serializers),A.serializers,void 0===A._stdErrSerialize||A._stdErrSerialize),A._logEvent.ts=g,A._logEvent.messages=u.filter(function(R){return-1===I.indexOf(R)}),A._logEvent.level.label=x,A._logEvent.level.value=T,m(x,A._logEvent,_),A._logEvent=fe(I)}function fe(A){return{ts:0,messages:[],bindings:A||[],level:{label:"",value:0}}}function ue(A){return"function"==typeof A.timestamp?A.timestamp:!1===A.timestamp?y:O}function w(){return{}}function ye(A){return A}function me(){}function y(){return!1}function O(){return Date.now()}G.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},G.stdSerializers=be,G.stdTimeFunctions=Object.assign({},{nullTime:y,epochTime:O,unixTime:function(){return Math.round(Date.now()/1e3)},isoTime:function(){return new Date(Date.now()).toISOString()}})}}]);