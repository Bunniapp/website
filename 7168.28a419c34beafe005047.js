"use strict";(self.webpackChunktimeless_frontend=self.webpackChunktimeless_frontend||[]).push([[7168],{47168:(b,c,g)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.SafeAppProvider=void 0;var l=g(66623);Object.defineProperty(c,"SafeAppProvider",{enumerable:!0,get:function(){return l.SafeAppProvider}})},66623:(b,c,g)=>{var l=g(91052).default;Object.defineProperty(c,"__esModule",{value:!0}),c.SafeAppProvider=void 0;const k=g(93105),L=g(62161);c.SafeAppProvider=class extends k.EventEmitter{constructor(d,i){super(),this.submittedTxs=new Map,this.safe=d,this.sdk=i}connect(){var d=this;return l(function*(){d.emit("connect",{chainId:d.chainId})})()}disconnect(){return l(function*(){})()}get chainId(){return this.safe.chainId}request(d){var i=this;return l(function*(){const{method:y,params:u=[]}=d;switch(y){case"eth_accounts":return[i.safe.safeAddress];case"net_version":case"eth_chainId":return`0x${i.chainId.toString(16)}`;case"personal_sign":{const[h,v]=u;if(i.safe.safeAddress.toLowerCase()!==v.toLowerCase())throw new Error("The address or message hash is invalid");return yield i.sdk.txs.signMessage(h),"0x"}case"eth_sign":{const[h,v]=u;if(i.safe.safeAddress.toLowerCase()!==h.toLowerCase()||!v.startsWith("0x"))throw new Error("The address or message hash is invalid");return yield i.sdk.txs.signMessage(v),"0x"}case"eth_sendTransaction":const _=Object.assign({value:"0",data:"0x"},u[0]),w=yield i.sdk.txs.send({txs:[_]});return i.submittedTxs.set(w.safeTxHash,{from:i.safe.safeAddress,hash:w.safeTxHash,gas:0,gasPrice:"0x00",nonce:0,input:_.data,value:_.value,to:_.to,blockHash:null,blockNumber:null,transactionIndex:null}),w.safeTxHash;case"eth_blockNumber":return(yield i.sdk.eth.getBlockByNumber(["latest"])).number;case"eth_getBalance":return i.sdk.eth.getBalance([(0,L.getLowerCase)(u[0]),u[1]]);case"eth_getCode":return i.sdk.eth.getCode([(0,L.getLowerCase)(u[0]),u[1]]);case"eth_getTransactionCount":return i.sdk.eth.getTransactionCount([(0,L.getLowerCase)(u[0]),u[1]]);case"eth_getStorageAt":return i.sdk.eth.getStorageAt([(0,L.getLowerCase)(u[0]),u[1],u[2]]);case"eth_getBlockByNumber":return i.sdk.eth.getBlockByNumber([u[0],u[1]]);case"eth_getBlockByHash":return i.sdk.eth.getBlockByHash([u[0],u[1]]);case"eth_getTransactionByHash":let m=u[0];try{m=(yield i.sdk.txs.getBySafeTxHash(m)).txHash||m}catch{}return i.submittedTxs.has(m)?i.submittedTxs.get(m):i.sdk.eth.getTransactionByHash([m]).then(h=>(h&&(h.hash=u[0]),h));case"eth_getTransactionReceipt":{let h=u[0];try{h=(yield i.sdk.txs.getBySafeTxHash(h)).txHash||h}catch{}return i.sdk.eth.getTransactionReceipt([h]).then(v=>(v&&(v.transactionHash=u[0]),v))}case"eth_estimateGas":return i.sdk.eth.getEstimateGas(u[0]);case"eth_call":return i.sdk.eth.call([u[0],u[1]]);case"eth_getLogs":return i.sdk.eth.getPastLogs([u[0]]);case"eth_gasPrice":return i.sdk.eth.getGasPrice();default:throw Error(`"${d.method}" not implemented`)}})()}send(d,i){d||i("Undefined request"),this.request(d).then(y=>i(null,{jsonrpc:"2.0",id:d.id,result:y})).catch(y=>i(y,null))}}},62161:(b,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.getLowerCase=void 0,c.getLowerCase=function(l){return l&&l.toLowerCase()}},93105:b=>{var l,c="object"==typeof Reflect?Reflect:null,g=c&&"function"==typeof c.apply?c.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)};l=c&&"function"==typeof c.ownKeys?c.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var L=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}b.exports=a,b.exports.once=function(t,e){return new Promise(function(n,r){function s(o){t.removeListener(e,f),r(o)}function f(){"function"==typeof t.removeListener&&t.removeListener("error",s),n([].slice.call(arguments))}O(t,e,f,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&O(t,"error",e,{once:!0})}(t,s)})},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var C=10;function d(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function i(t){return void 0===t._maxListeners?a.defaultMaxListeners:t._maxListeners}function y(t,e,n,r){var s,f,o;if(d(n),void 0===(f=t._events)?(f=t._events=Object.create(null),t._eventsCount=0):(void 0!==f.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),f=t._events),o=f[e]),void 0===o)o=f[e]=n,++t._eventsCount;else if("function"==typeof o?o=f[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(s=i(t))>0&&o.length>s&&!o.warned){o.warned=!0;var p=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");p.name="MaxListenersExceededWarning",p.emitter=t,p.type=e,p.count=o.length,function(t){console&&console.warn&&console.warn(t)}(p)}return t}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},s=u.bind(r);return s.listener=n,r.wrapFn=s,s}function w(t,e,n){var r=t._events;if(void 0===r)return[];var s=r[e];return void 0===s?[]:"function"==typeof s?n?[s.listener||s]:[s]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(s):m(s,s.length)}function E(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function O(t,e,n,r){if("function"==typeof t.on)r.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,function s(f){r.once&&t.removeEventListener(e,s),n(f)})}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return C},set:function(t){if("number"!=typeof t||t<0||L(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");C=t}}),a.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||L(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return i(this)},a.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var s="error"===e,f=this._events;if(void 0!==f)s=s&&void 0===f.error;else if(!s)return!1;if(s){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var p=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw p.context=o,p}var x=f[e];if(void 0===x)return!1;if("function"==typeof x)g(x,this,n);else{var T=x.length,j=m(x,T);for(r=0;r<T;++r)g(j[r],this,n)}return!0},a.prototype.on=a.prototype.addListener=function(e,n){return y(this,e,n,!1)},a.prototype.prependListener=function(e,n){return y(this,e,n,!0)},a.prototype.once=function(e,n){return d(n),this.on(e,_(this,e,n)),this},a.prototype.prependOnceListener=function(e,n){return d(n),this.prependListener(e,_(this,e,n)),this},a.prototype.off=a.prototype.removeListener=function(e,n){var r,s,f,o,p;if(d(n),void 0===(s=this._events))return this;if(void 0===(r=s[e]))return this;if(r===n||r.listener===n)0==--this._eventsCount?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,r.listener||n));else if("function"!=typeof r){for(f=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){p=r[o].listener,f=o;break}if(f<0)return this;0===f?r.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(r,f),1===r.length&&(s[e]=r[0]),void 0!==s.removeListener&&this.emit("removeListener",e,p||n)}return this},a.prototype.removeAllListeners=function(e){var n,r,s;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var o,f=Object.keys(r);for(s=0;s<f.length;++s)"removeListener"!==(o=f[s])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(n=r[e]))this.removeListener(e,n);else if(void 0!==n)for(s=n.length-1;s>=0;s--)this.removeListener(e,n[s]);return this},a.prototype.listeners=function(e){return w(this,e,!0)},a.prototype.rawListeners=function(e){return w(this,e,!1)},a.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):E.call(t,e)},a.prototype.listenerCount=E,a.prototype.eventNames=function(){return this._eventsCount>0?l(this._events):[]}}}]);