"use strict";(self.webpackChunktimeless_frontend=self.webpackChunktimeless_frontend||[]).push([[7168],{47168:(g,r,d)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.SafeAppProvider=void 0;var o=d(66623);Object.defineProperty(r,"SafeAppProvider",{enumerable:!0,get:function(){return o.SafeAppProvider}})},66623:(g,r,d)=>{var o=d(91052).default;Object.defineProperty(r,"__esModule",{value:!0}),r.SafeAppProvider=void 0;const f=d(93105),h=d(62161);r.SafeAppProvider=class extends f.EventEmitter{constructor(a,e){super(),this.submittedTxs=new Map,this.safe=a,this.sdk=e}connect(){var a=this;return o(function*(){a.emit("connect",{chainId:a.chainId})})()}disconnect(){return o(function*(){})()}get chainId(){return this.safe.chainId}request(a){var e=this;return o(function*(){const{method:i,params:t=[]}=a;switch(i){case"eth_accounts":return[e.safe.safeAddress];case"net_version":case"eth_chainId":return`0x${e.chainId.toString(16)}`;case"personal_sign":{const[s,n]=t;if(e.safe.safeAddress.toLowerCase()!==n.toLowerCase())throw new Error("The address or message hash is invalid");return yield e.sdk.txs.signMessage(s),"0x"}case"eth_sign":{const[s,n]=t;if(e.safe.safeAddress.toLowerCase()!==s.toLowerCase()||!n.startsWith("0x"))throw new Error("The address or message hash is invalid");return yield e.sdk.txs.signMessage(n),"0x"}case"eth_sendTransaction":const u=Object.assign({value:"0",data:"0x"},t[0]),l=yield e.sdk.txs.send({txs:[u]});return e.submittedTxs.set(l.safeTxHash,{from:e.safe.safeAddress,hash:l.safeTxHash,gas:0,gasPrice:"0x00",nonce:0,input:u.data,value:u.value,to:u.to,blockHash:null,blockNumber:null,transactionIndex:null}),l.safeTxHash;case"eth_blockNumber":return(yield e.sdk.eth.getBlockByNumber(["latest"])).number;case"eth_getBalance":return e.sdk.eth.getBalance([(0,h.getLowerCase)(t[0]),t[1]]);case"eth_getCode":return e.sdk.eth.getCode([(0,h.getLowerCase)(t[0]),t[1]]);case"eth_getTransactionCount":return e.sdk.eth.getTransactionCount([(0,h.getLowerCase)(t[0]),t[1]]);case"eth_getStorageAt":return e.sdk.eth.getStorageAt([(0,h.getLowerCase)(t[0]),t[1],t[2]]);case"eth_getBlockByNumber":return e.sdk.eth.getBlockByNumber([t[0],t[1]]);case"eth_getBlockByHash":return e.sdk.eth.getBlockByHash([t[0],t[1]]);case"eth_getTransactionByHash":let c=t[0];try{c=(yield e.sdk.txs.getBySafeTxHash(c)).txHash||c}catch{}return e.submittedTxs.has(c)?e.submittedTxs.get(c):e.sdk.eth.getTransactionByHash([c]).then(s=>(s&&(s.hash=t[0]),s));case"eth_getTransactionReceipt":{let s=t[0];try{s=(yield e.sdk.txs.getBySafeTxHash(s)).txHash||s}catch{}return e.sdk.eth.getTransactionReceipt([s]).then(n=>(n&&(n.transactionHash=t[0]),n))}case"eth_estimateGas":return e.sdk.eth.getEstimateGas(t[0]);case"eth_call":return e.sdk.eth.call([t[0],t[1]]);case"eth_getLogs":return e.sdk.eth.getPastLogs([t[0]]);case"eth_gasPrice":return e.sdk.eth.getGasPrice();default:throw Error(`"${a.method}" not implemented`)}})()}send(a,e){a||e("Undefined request"),this.request(a).then(i=>e(null,{jsonrpc:"2.0",id:a.id,result:i})).catch(i=>e(i,null))}}},62161:(g,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.getLowerCase=void 0,r.getLowerCase=function(o){return o&&o.toLowerCase()}}}]);