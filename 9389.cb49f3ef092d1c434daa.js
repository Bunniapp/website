"use strict";(self.webpackChunktimeless_frontend=self.webpackChunktimeless_frontend||[]).push([[9389],{7663:(N,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DEFAULT_BASE_URL=void 0,s.DEFAULT_BASE_URL="https://safe-client.safe.global"},58030:(N,s,b)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.deleteEndpoint=s.getEndpoint=s.postEndpoint=void 0;const m=b(74656);function E(O,P,u,h){return`${O}${(0,m.insertParams)(P,u)}${(0,m.stringifyQuery)(h)}`}s.postEndpoint=function(O,P,u){const h=E(O,P,null==u?void 0:u.path,null==u?void 0:u.query);return(0,m.fetchData)(h,null==u?void 0:u.body)},s.getEndpoint=function(O,P,u,h){if(h)return(0,m.fetchData)(h);const c=E(O,P,null==u?void 0:u.path,null==u?void 0:u.query);return(0,m.fetchData)(c)},s.deleteEndpoint=function(O,P,u){const h=E(O,P,null==u?void 0:u.path);return(0,m.deleteData)(h)}},31199:function(N,s,b){var m=this&&this.__createBinding||(Object.create?function(f,g,p,_){void 0===_&&(_=p);var V=Object.getOwnPropertyDescriptor(g,p);(!V||("get"in V?!g.__esModule:V.writable||V.configurable))&&(V={enumerable:!0,get:function(){return g[p]}}),Object.defineProperty(f,_,V)}:function(f,g,p,_){void 0===_&&(_=p),f[_]=g[p]}),E=this&&this.__exportStar||function(f,g){for(var p in f)"default"!==p&&!Object.prototype.hasOwnProperty.call(g,p)&&m(g,f,p)};Object.defineProperty(s,"__esModule",{value:!0}),s.unregisterDevice=s.unregisterSafe=s.registerDevice=s.getDelegates=s.confirmSafeMessage=s.proposeSafeMessage=s.getSafeMessage=s.getSafeMessages=s.getDecodedData=s.getMasterCopies=s.getSafeApps=s.getChainConfig=s.getChainsConfig=s.proposeTransaction=s.postSafeGasEstimation=s.getTransactionDetails=s.getTransactionQueue=s.getTransactionHistory=s.getCollectiblesPage=s.getCollectibles=s.getOwnedSafes=s.getFiatCurrencies=s.getBalances=s.getMultisigTransactions=s.getModuleTransactions=s.getIncomingTransfers=s.getSafeInfo=s.setBaseUrl=void 0;const d=b(58030),$=b(7663);E(b(23851),s),E(b(57351),s),E(b(86145),s),E(b(56556),s),E(b(39063),s),E(b(86056),s),E(b(73768),s),E(b(59829),s),E(b(35848),s);let y=$.DEFAULT_BASE_URL;s.setBaseUrl=f=>{y=f},s.getSafeInfo=function(f,g){return(0,d.getEndpoint)(y,"/v1/chains/{chainId}/safes/{address}",{path:{chainId:f,address:g}})},s.getIncomingTransfers=function(f,g,p,_){return(0,d.getEndpoint)(y,"/v1/chains/{chainId}/safes/{address}/incoming-transfers/",{path:{chainId:f,address:g},query:p},_)},s.getModuleTransactions=function(f,g,p,_){return(0,d.getEndpoint)(y,"/v1/chains/{chainId}/safes/{address}/module-transactions/",{path:{chainId:f,address:g},query:p},_)},s.getMultisigTransactions=function(f,g,p,_){return(0,d.getEndpoint)(y,"/v1/chains/{chainId}/safes/{address}/multisig-transactions/",{path:{chainId:f,address:g},query:p},_)},s.getBalances=function(f,g,p="usd",_={}){return(0,d.getEndpoint)(y,"/v1/chains/{chainId}/safes/{address}/balances/{currency}",{path:{chainId:f,address:g,currency:p},query:_})},s.getFiatCurrencies=function(){return(0,d.getEndpoint)(y,"/v1/balances/supported-fiat-codes")},s.getOwnedSafes=function(f,g){return(0,d.getEndpoint)(y,"/v1/chains/{chainId}/owners/{address}/safes",{path:{chainId:f,address:g}})},s.getCollectibles=function(f,g,p={}){return(0,d.getEndpoint)(y,"/v1/chains/{chainId}/safes/{address}/collectibles",{path:{chainId:f,address:g},query:p})},s.getCollectiblesPage=function(f,g,p={},_){return(0,d.getEndpoint)(y,"/v2/chains/{chainId}/safes/{address}/collectibles",{path:{chainId:f,address:g},query:p},_)},s.getTransactionHistory=function(f,g,p){return(0,d.getEndpoint)(y,"/v1/chains/{chainId}/safes/{safe_address}/transactions/history",{path:{chainId:f,safe_address:g},query:{}},p)},s.getTransactionQueue=function(f,g,p,_){return(0,d.getEndpoint)(y,"/v1/chains/{chainId}/safes/{safe_address}/transactions/queued",{path:{chainId:f,safe_address:g},query:{trusted:_}},p)},s.getTransactionDetails=function(f,g){return(0,d.getEndpoint)(y,"/v1/chains/{chainId}/transactions/{transactionId}",{path:{chainId:f,transactionId:g}})},s.postSafeGasEstimation=function(f,g,p){return(0,d.postEndpoint)(y,"/v2/chains/{chainId}/safes/{safe_address}/multisig-transactions/estimations",{path:{chainId:f,safe_address:g},body:p})},s.proposeTransaction=function(f,g,p){return(0,d.postEndpoint)(y,"/v1/chains/{chainId}/transactions/{safe_address}/propose",{path:{chainId:f,safe_address:g},body:p})},s.getChainsConfig=function(f){return(0,d.getEndpoint)(y,"/v1/chains",{query:f})},s.getChainConfig=function(f){return(0,d.getEndpoint)(y,"/v1/chains/{chainId}",{path:{chainId:f}})},s.getSafeApps=function(f,g={}){return(0,d.getEndpoint)(y,"/v1/chains/{chainId}/safe-apps",{path:{chainId:f},query:g})},s.getMasterCopies=function(f){return(0,d.getEndpoint)(y,"/v1/chains/{chainId}/about/master-copies",{path:{chainId:f}})},s.getDecodedData=function(f,g,p){return(0,d.postEndpoint)(y,"/v1/chains/{chainId}/data-decoder",{path:{chainId:f},body:{data:g,to:p}})},s.getSafeMessages=function(f,g,p){return(0,d.getEndpoint)(y,"/v1/chains/{chainId}/safes/{safe_address}/messages",{path:{chainId:f,safe_address:g},query:{}},p)},s.getSafeMessage=function(f,g){return(0,d.getEndpoint)(y,"/v1/chains/{chainId}/messages/{message_hash}",{path:{chainId:f,message_hash:g}})},s.proposeSafeMessage=function(f,g,p){return(0,d.postEndpoint)(y,"/v1/chains/{chainId}/safes/{safe_address}/messages",{path:{chainId:f,safe_address:g},body:p})},s.confirmSafeMessage=function(f,g,p){return(0,d.postEndpoint)(y,"/v1/chains/{chainId}/messages/{message_hash}/signatures",{path:{chainId:f,message_hash:g},body:p})},s.getDelegates=function(f,g={}){return(0,d.getEndpoint)(y,"/v1/chains/{chainId}/delegates",{path:{chainId:f},query:g})},s.registerDevice=function(f){return(0,d.postEndpoint)(y,"/v1/register/notifications",{body:f})},s.unregisterSafe=function(f,g,p){return(0,d.deleteEndpoint)(y,"/v1/chains/{chainId}/notifications/devices/{uuid}/safes/{safe_address}",{path:{chainId:f,safe_address:g,uuid:p}})},s.unregisterDevice=function(f,g){return(0,d.deleteEndpoint)(y,"/v1/chains/{chainId}/notifications/devices/{uuid}",{path:{chainId:f,uuid:g}})}},56556:(N,s)=>{var d;Object.defineProperty(s,"__esModule",{value:!0}),s.FEATURES=s.GAS_PRICE_TYPE=s.RPC_AUTHENTICATION=void 0,(d=s.RPC_AUTHENTICATION||(s.RPC_AUTHENTICATION={})).API_KEY_PATH="API_KEY_PATH",d.NO_AUTHENTICATION="NO_AUTHENTICATION",d.UNKNOWN="UNKNOWN",function(d){d.ORACLE="ORACLE",d.FIXED="FIXED",d.FIXED_1559="FIXED1559",d.UNKNOWN="UNKNOWN"}(s.GAS_PRICE_TYPE||(s.GAS_PRICE_TYPE={})),function(d){d.ERC721="ERC721",d.SAFE_APPS="SAFE_APPS",d.CONTRACT_INTERACTION="CONTRACT_INTERACTION",d.DOMAIN_LOOKUP="DOMAIN_LOOKUP",d.SPENDING_LIMIT="SPENDING_LIMIT",d.EIP1559="EIP1559",d.SAFE_TX_GAS_OPTIONAL="SAFE_TX_GAS_OPTIONAL",d.TX_SIMULATION="TX_SIMULATION",d.EIP1271="EIP1271"}(s.FEATURES||(s.FEATURES={}))},39063:(N,s)=>{var m;Object.defineProperty(s,"__esModule",{value:!0}),s.TokenType=void 0,(m=s.TokenType||(s.TokenType={})).ERC20="ERC20",m.ERC721="ERC721",m.NATIVE_TOKEN="NATIVE_TOKEN"},73768:(N,s)=>{Object.defineProperty(s,"__esModule",{value:!0})},86056:(N,s)=>{Object.defineProperty(s,"__esModule",{value:!0})},35848:(N,s)=>{var m;Object.defineProperty(s,"__esModule",{value:!0}),s.DeviceType=void 0,(m=s.DeviceType||(s.DeviceType={})).ANDROID="ANDROID",m.IOS="IOS",m.WEB="WEB"},57351:(N,s)=>{var d;Object.defineProperty(s,"__esModule",{value:!0}),s.SafeAppSocialPlatforms=s.SafeAppFeatures=s.SafeAppAccessPolicyTypes=void 0,(d=s.SafeAppAccessPolicyTypes||(s.SafeAppAccessPolicyTypes={})).NoRestrictions="NO_RESTRICTIONS",d.DomainAllowlist="DOMAIN_ALLOWLIST",function(d){d.BATCHED_TRANSACTIONS="BATCHED_TRANSACTIONS"}(s.SafeAppFeatures||(s.SafeAppFeatures={})),function(d){d.TWITTER="TWITTER",d.GITHUB="GITHUB",d.DISCORD="DISCORD"}(s.SafeAppSocialPlatforms||(s.SafeAppSocialPlatforms={}))},23851:(N,s)=>{var m;Object.defineProperty(s,"__esModule",{value:!0}),s.ImplementationVersionState=void 0,(m=s.ImplementationVersionState||(s.ImplementationVersionState={})).UP_TO_DATE="UP_TO_DATE",m.OUTDATED="OUTDATED",m.UNKNOWN="UNKNOWN"},59829:(N,s)=>{var E;Object.defineProperty(s,"__esModule",{value:!0}),s.SafeMessageStatus=s.SafeMessageListItemType=void 0,(E=s.SafeMessageListItemType||(s.SafeMessageListItemType={})).DATE_LABEL="DATE_LABEL",E.MESSAGE="MESSAGE",function(E){E.NEEDS_CONFIRMATION="NEEDS_CONFIRMATION",E.CONFIRMED="CONFIRMED"}(s.SafeMessageStatus||(s.SafeMessageStatus={}))},86145:(N,s)=>{var c;Object.defineProperty(s,"__esModule",{value:!0}),s.LabelValue=s.DetailedExecutionInfoType=s.TransactionListItemType=s.ConflictType=s.TransactionInfoType=s.SettingsInfoType=s.TransactionTokenType=s.TransferDirection=s.TransactionStatus=s.Operation=void 0,(c=s.Operation||(s.Operation={}))[c.CALL=0]="CALL",c[c.DELEGATE=1]="DELEGATE",function(c){c.AWAITING_CONFIRMATIONS="AWAITING_CONFIRMATIONS",c.AWAITING_EXECUTION="AWAITING_EXECUTION",c.CANCELLED="CANCELLED",c.FAILED="FAILED",c.SUCCESS="SUCCESS"}(s.TransactionStatus||(s.TransactionStatus={})),function(c){c.INCOMING="INCOMING",c.OUTGOING="OUTGOING",c.UNKNOWN="UNKNOWN"}(s.TransferDirection||(s.TransferDirection={})),function(c){c.ERC20="ERC20",c.ERC721="ERC721",c.NATIVE_COIN="NATIVE_COIN"}(s.TransactionTokenType||(s.TransactionTokenType={})),function(c){c.SET_FALLBACK_HANDLER="SET_FALLBACK_HANDLER",c.ADD_OWNER="ADD_OWNER",c.REMOVE_OWNER="REMOVE_OWNER",c.SWAP_OWNER="SWAP_OWNER",c.CHANGE_THRESHOLD="CHANGE_THRESHOLD",c.CHANGE_IMPLEMENTATION="CHANGE_IMPLEMENTATION",c.ENABLE_MODULE="ENABLE_MODULE",c.DISABLE_MODULE="DISABLE_MODULE",c.SET_GUARD="SET_GUARD",c.DELETE_GUARD="DELETE_GUARD"}(s.SettingsInfoType||(s.SettingsInfoType={})),function(c){c.TRANSFER="Transfer",c.SETTINGS_CHANGE="SettingsChange",c.CUSTOM="Custom",c.CREATION="Creation"}(s.TransactionInfoType||(s.TransactionInfoType={})),function(c){c.NONE="None",c.HAS_NEXT="HasNext",c.END="End"}(s.ConflictType||(s.ConflictType={})),function(c){c.TRANSACTION="TRANSACTION",c.LABEL="LABEL",c.CONFLICT_HEADER="CONFLICT_HEADER",c.DATE_LABEL="DATE_LABEL"}(s.TransactionListItemType||(s.TransactionListItemType={})),function(c){c.MULTISIG="MULTISIG",c.MODULE="MODULE"}(s.DetailedExecutionInfoType||(s.DetailedExecutionInfoType={})),function(c){c.Queued="Queued",c.Next="Next"}(s.LabelValue||(s.LabelValue={}))},74656:function(N,s){var b=this&&this.__awaiter||function(u,h,c,w){return new(c||(c=Promise))(function(j,T){function D(I){try{L(w.next(I))}catch(G){T(G)}}function Z(I){try{L(w.throw(I))}catch(G){T(G)}}function L(I){I.done?j(I.value):function(j){return j instanceof c?j:new c(function(T){T(j)})}(I.value).then(D,Z)}L((w=w.apply(u,h||[])).next())})};function y(u){return b(this,void 0,void 0,function*(){let h;try{h=yield u.json()}catch{if(u.headers&&"0"!==u.headers.get("content-length"))throw new Error(`Invalid response content: ${u.statusText}`)}if(!u.ok){const c=(u=>"object"==typeof u&&null!==u&&"code"in u&&"message"in u)(h)?`${h.code}: ${h.message}`:u.statusText;throw new Error(c)}return h})}Object.defineProperty(s,"__esModule",{value:!0}),s.deleteData=s.fetchData=s.stringifyQuery=s.insertParams=void 0,s.insertParams=function(u,h){return h?Object.keys(h).reduce((c,w)=>function(u,h,c){return u.replace(new RegExp(`\\{${h}\\}`,"g"),c)}(c,w,String(h[w])),u):u},s.stringifyQuery=function(u){if(!u)return"";const h=new URLSearchParams;Object.keys(u).forEach(w=>{null!=u[w]&&h.append(w,String(u[w]))});const c=h.toString();return c?`?${c}`:""},s.fetchData=function(u,h){return b(this,void 0,void 0,function*(){let c;return null!=h&&(c={method:"POST",body:"string"==typeof h?h:JSON.stringify(h),headers:{"Content-Type":"application/json"}}),y(yield fetch(u,c))})},s.deleteData=function(u){return b(this,void 0,void 0,function*(){return y(yield fetch(u,{method:"DELETE"}))})}},69389:(N,s,b)=>{b.r(s),b.d(s,{MessageFormatter:()=>y,Methods:()=>h,Operation:()=>R.Operation,RPC_CALLS:()=>T,RestrictedMethods:()=>c,TokenType:()=>R.TokenType,TransactionStatus:()=>R.TransactionStatus,TransferDirection:()=>R.TransferDirection,default:()=>Un,getSDKVersion:()=>m,isObjectEIP712TypedData:()=>w});const m=()=>"9.0.0",E=e=>e.toString(16).padStart(2,"0");let y=(()=>{class e{}return e.makeRequest=(t,n)=>({id:"undefined"!=typeof window?(e=>{const t=new Uint8Array(5);return window.crypto.getRandomValues(t),Array.from(t,E).join("")})():(new Date).getTime().toString(36),method:t,params:n,env:{sdkVersion:m()}}),e.makeResponse=(t,n,r)=>({id:t,success:!0,version:r,data:n}),e.makeErrorResponse=(t,n,r)=>({id:t,success:!1,error:n,version:r}),e})();var u=b(34553),h=(()=>{return(e=h||(h={})).sendTransactions="sendTransactions",e.rpcCall="rpcCall",e.getChainInfo="getChainInfo",e.getSafeInfo="getSafeInfo",e.getTxBySafeTxHash="getTxBySafeTxHash",e.getSafeBalances="getSafeBalances",e.signMessage="signMessage",e.signTypedMessage="signTypedMessage",e.getEnvironmentInfo="getEnvironmentInfo",e.getOffChainSignature="getOffChainSignature",e.requestAddressBook="requestAddressBook",e.wallet_getPermissions="wallet_getPermissions",e.wallet_requestPermissions="wallet_requestPermissions",h;var e})(),c=(()=>((c||(c={})).requestAddressBook="requestAddressBook",c))();const w=e=>"object"==typeof e&&null!=e&&"domain"in e&&"types"in e&&"message"in e;var R=b(31199);class j{constructor(t){this.communicator=t}getBySafeTxHash(t){var n=this;return(0,u.Z)(function*(){if(!t)throw new Error("Invalid safeTxHash");return(yield n.communicator.send(h.getTxBySafeTxHash,{safeTxHash:t})).data})()}signMessage(t){var n=this;return(0,u.Z)(function*(){const r={message:t};return(yield n.communicator.send(h.signMessage,r)).data})()}signTypedMessage(t){var n=this;return(0,u.Z)(function*(){if(!w(t))throw new Error("Invalid typed data");return(yield n.communicator.send(h.signTypedMessage,{typedData:t})).data})()}send({txs:t,params:n}){var r=this;return(0,u.Z)(function*(){if(!t||!t.length)throw new Error("No transactions were passed");const i={txs:t,params:n};return(yield r.communicator.send(h.sendTransactions,i)).data})()}}const T={eth_call:"eth_call",eth_gasPrice:"eth_gasPrice",eth_getLogs:"eth_getLogs",eth_getBalance:"eth_getBalance",eth_getCode:"eth_getCode",eth_getBlockByHash:"eth_getBlockByHash",eth_getBlockByNumber:"eth_getBlockByNumber",eth_getStorageAt:"eth_getStorageAt",eth_getTransactionByHash:"eth_getTransactionByHash",eth_getTransactionReceipt:"eth_getTransactionReceipt",eth_getTransactionCount:"eth_getTransactionCount",eth_estimateGas:"eth_estimateGas",safe_setSettings:"safe_setSettings"},D={defaultBlockParam:(e="latest")=>e,returnFullTxObjectParam:(e=!1)=>e,blockNumberToHex:e=>Number.isInteger(e)?`0x${e.toString(16)}`:e};class Z{constructor(t){this.communicator=t,this.call=this.buildRequest({call:T.eth_call,formatters:[null,D.defaultBlockParam]}),this.getBalance=this.buildRequest({call:T.eth_getBalance,formatters:[null,D.defaultBlockParam]}),this.getCode=this.buildRequest({call:T.eth_getCode,formatters:[null,D.defaultBlockParam]}),this.getStorageAt=this.buildRequest({call:T.eth_getStorageAt,formatters:[null,D.blockNumberToHex,D.defaultBlockParam]}),this.getPastLogs=this.buildRequest({call:T.eth_getLogs}),this.getBlockByHash=this.buildRequest({call:T.eth_getBlockByHash,formatters:[null,D.returnFullTxObjectParam]}),this.getBlockByNumber=this.buildRequest({call:T.eth_getBlockByNumber,formatters:[D.blockNumberToHex,D.returnFullTxObjectParam]}),this.getTransactionByHash=this.buildRequest({call:T.eth_getTransactionByHash}),this.getTransactionReceipt=this.buildRequest({call:T.eth_getTransactionReceipt}),this.getTransactionCount=this.buildRequest({call:T.eth_getTransactionCount,formatters:[null,D.defaultBlockParam]}),this.getGasPrice=this.buildRequest({call:T.eth_gasPrice}),this.getEstimateGas=n=>this.buildRequest({call:T.eth_estimateGas})([n]),this.setSafeSettings=this.buildRequest({call:T.safe_setSettings})}buildRequest(t){var n=this;const{call:r,formatters:i}=t;return function(){var o=(0,u.Z)(function*(a){i&&Array.isArray(a)&&i.forEach((S,B)=>{S&&(a[B]=S(a[B]))});const l={call:r,params:a||[]};return(yield n.communicator.send(h.rpcCall,l)).data});return function(a){return o.apply(this,arguments)}}()}}function L(e,{strict:t=!0}={}){return!(!e||"string"!=typeof e)&&(t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x"))}function I(e){return L(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}class v extends Error{constructor(t,n={}){super(),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ViemError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:"viem@1.16.2"});const r=n.cause instanceof v?n.cause.details:n.cause?.message?n.cause.message:n.details,i=n.cause instanceof v&&n.cause.docsPath||n.docsPath;this.message=[t||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: https://viem.sh${i}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join("\n"),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=i,this.metaMessages=n.metaMessages,this.shortMessage=t}walk(t){return J(this,t)}}function J(e,t){return t?.(e)?e:e&&"object"==typeof e&&"cause"in e?J(e.cause,t):t?null:e}class se extends v{constructor({expectedLength:t,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${t}`,`Given length: ${n}`].join("\n")),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEncodingArrayLengthMismatchError"})}}class oe extends v{constructor({expectedSize:t,value:n}){super(`Size of bytes "${n}" (bytes${I(n)}) does not match expected size (bytes${t}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEncodingBytesSizeMismatchError"})}}class ae extends v{constructor({expectedLength:t,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${t}`,`Given length (values): ${n}`].join("\n")),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEncodingLengthMismatchError"})}}class Ne extends v{constructor(t,{docsPath:n}={}){super([`Function ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join("\n"),{docsPath:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiFunctionNotFoundError"})}}class bt extends v{constructor({expectedSize:t,givenSize:n}){super(`Expected bytes${t}, got bytes${n}.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BytesSizeMismatchError"})}}class mt extends v{constructor(t,{docsPath:n}){super([`Type "${t}" is not a valid encoding type.`,"Please provide a valid ABI type."].join("\n"),{docsPath:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiEncodingType"})}}class Et extends v{constructor(t){super([`Value "${t}" is not a valid array.`].join("\n")),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidArrayError"})}}class At extends v{constructor(t){super([`"${t}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join("\n")),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidDefinitionTypeError"})}}function H(e){return"string"==typeof e[0]?De(e):function(e){let t=0;for(const i of e)t+=i.length;const n=new Uint8Array(t);let r=0;for(const i of e)n.set(i,r),r+=i.length;return n}(e)}function De(e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}class Le extends v{constructor({offset:t,position:n,size:r}){super(`Slice ${"start"===n?"starting":"ending"} at offset "${t}" is out-of-bounds (size: ${r}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SliceOffsetOutOfBoundsError"})}}class Ce extends v{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${t}) exceeds padding size (${n}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SizeExceedsPaddingSizeError"})}}function Me(e,t,n,{strict:r}={}){return L(e,{strict:!1})?function(e,t,n,{strict:r}={}){$e(e,t);const i=`0x${e.replace("0x","").slice(2*(t??0),2*(n??e.length))}`;return r&&je(i,t,n),i}(e,t,n,{strict:r}):function(e,t,n,{strict:r}={}){$e(e,t);const i=e.slice(t,n);return r&&je(i,t,n),i}(e,t,n,{strict:r})}function $e(e,t){if("number"==typeof t&&t>0&&t>I(e)-1)throw new Le({offset:t,position:"start",size:I(e)})}function je(e,t,n){if("number"==typeof t&&"number"==typeof n&&I(e)!==n-t)throw new Le({offset:n,position:"end",size:I(e)})}function q(e,{dir:t,size:n=32}={}){return"string"==typeof e?F(e,{dir:t,size:n}):function(e,{dir:t,size:n=32}={}){if(null===n)return e;if(e.length>n)throw new Ce({size:e.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let i=0;i<n;i++){const o="right"===t;r[o?i:n-i-1]=e[o?i:e.length-i-1]}return r}(e,{dir:t,size:n})}function F(e,{dir:t,size:n=32}={}){if(null===n)return e;const r=e.replace("0x","");if(r.length>2*n)throw new Ce({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r["right"===t?"padEnd":"padStart"](2*n,"0")}`}class vt extends v{constructor({max:t,min:n,signed:r,size:i,value:o}){super(`Number "${o}" is not in safe ${i?`${8*i}-bit ${r?"signed":"unsigned"} `:""}integer range ${t?`(${n} to ${t})`:`(above ${n})`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"IntegerOutOfRangeError"})}}class St extends v{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${t} bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SizeOverflowError"})}}function x(e,{size:t}){if(I(e)>t)throw new St({givenSize:I(e),maxSize:t})}const Nt=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function ce(e,t={}){return"number"==typeof e||"bigint"==typeof e?z(e,t):"string"==typeof e?Fe(e,t):"boolean"==typeof e?Re(e,t):He(e,t)}function Re(e,t={}){const n=`0x${Number(e)}`;return"number"==typeof t.size?(x(n,{size:t.size}),q(n,{size:t.size})):n}function He(e,t={}){let n="";for(let i=0;i<e.length;i++)n+=Nt[e[i]];const r=`0x${n}`;return"number"==typeof t.size?(x(r,{size:t.size}),q(r,{dir:"right",size:t.size})):r}function z(e,t={}){const{signed:n,size:r}=t,i=BigInt(e);let o;r?o=n?(1n<<8n*BigInt(r)-1n)-1n:2n**(8n*BigInt(r))-1n:"number"==typeof e&&(o=BigInt(Number.MAX_SAFE_INTEGER));const a="bigint"==typeof o&&n?-o-1n:0;if(o&&i>o||i<a){const A="bigint"==typeof e?"n":"";throw new vt({max:o?`${o}${A}`:void 0,min:`${a}${A}`,signed:n,size:r,value:`${e}${A}`})}const l=`0x${(n&&i<0?(1n<<BigInt(8*r))+BigInt(i):i).toString(16)}`;return r?q(l,{size:r}):l}const Dt=new TextEncoder;function Fe(e,t={}){return He(Dt.encode(e),t)}const Lt=new TextEncoder;function ee(e,t={}){return"number"==typeof e||"bigint"==typeof e?function(e,t){return ze(z(e,t))}(e,t):"boolean"==typeof e?function(e,t={}){const n=new Uint8Array(1);return n[0]=Number(e),"number"==typeof t.size?(x(n,{size:t.size}),q(n,{size:t.size})):n}(e,t):L(e)?ze(e,t):ue(e,t)}function xe(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:void 0}function ze(e,t={}){let n=e;t.size&&(x(n,{size:t.size}),n=q(n,{dir:"right",size:t.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const i=r.length/2,o=new Uint8Array(i);for(let a=0,l=0;a<i;a++){const A=xe(r.charCodeAt(l++)),S=xe(r.charCodeAt(l++));if(void 0===A||void 0===S)throw new v(`Invalid byte sequence ("${r[l-2]}${r[l-1]}" in "${r}").`);o[a]=16*A+S}return o}function ue(e,t={}){const n=Lt.encode(e);return"number"==typeof t.size?(x(n,{size:t.size}),q(n,{dir:"right",size:t.size})):n}function Ue(e,{includeName:t=!1}={}){if("function"!==e.type&&"event"!==e.type&&"error"!==e.type)throw new At(e.type);return`${e.name}(${Ge(e.inputs,{includeName:t})})`}function Ge(e,{includeName:t=!1}={}){return e?e.map(n=>function(e,{includeName:t}){return e.type.startsWith("tuple")?`(${Ge(e.components,{includeName:t})})${e.type.slice("tuple".length)}`:e.type+(t&&e.name?` ${e.name}`:"")}(n,{includeName:t})).join(t?", ":","):""}const jt=/((function|event)\s)?(.*)(\((.*)\))/;function le(e){const t=e.match(jt),r=t?.[3];return{type:t?.[2]||void 0,name:r,params:t?.[5]||void 0}}const Ve=e=>{if("string"==typeof e){const t=function(e){return le(e).name}(e),n=function(e){return le(e).params?.split(",").map(r=>r.trim().split(" "))?.map(r=>({type:r[0],name:"indexed"===r[1]?r[2]:r[1],..."indexed"===r[1]?{indexed:!0}:{}}))}(e)||[];return`${t}(${n.map(({type:r})=>r).join(",")})`}return Ue(e)};function K(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function de(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function fe(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}const te=BigInt(2**32-1),he=BigInt(32);function qe(e,t=!1){return t?{h:Number(e&te),l:Number(e>>he&te)}:{h:0|Number(e>>he&te),l:0|Number(e&te)}}function Ze(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:o,l:a}=qe(e[i],t);[n[i],r[i]]=[o,a]}return[n,r]}if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");function ne(e){if("string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),!(e=>e instanceof Uint8Array)(e))throw new Error("expected Uint8Array, got "+typeof e);return e}const[Je,et,tt]=[[],[],[]],sn=BigInt(0),X=BigInt(1),on=BigInt(2),an=BigInt(7),cn=BigInt(256),un=BigInt(113);for(let e=0,t=X,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],Je.push(2*(5*r+n)),et.push((e+1)*(e+2)/2%64);let i=sn;for(let o=0;o<7;o++)t=(t<<X^(t>>an)*un)%cn,t&on&&(i^=X<<(X<<BigInt(o))-X);tt.push(i)}const[ln,dn]=Ze(tt,!0),nt=(e,t,n)=>n>32?((e,t,n)=>t<<n-32|e>>>64-n)(e,t,n):((e,t,n)=>e<<n|t>>>32-n)(e,t,n),rt=(e,t,n)=>n>32?((e,t,n)=>e<<n-32|t>>>64-n)(e,t,n):((e,t,n)=>t<<n|e>>>32-n)(e,t,n);class re extends class{clone(){return this._cloneInto()}}{constructor(t,n,r,i=!1,o=24){if(super(),this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,K(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var e;this.state=new Uint8Array(200),this.state32=(e=this.state,new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)))}keccak(){(function(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let a=0;a<10;a++)n[a]=e[a]^e[a+10]^e[a+20]^e[a+30]^e[a+40];for(let a=0;a<10;a+=2){const l=(a+8)%10,A=(a+2)%10,S=n[A],B=n[A+1],U=nt(S,B,1)^n[l],C=rt(S,B,1)^n[l+1];for(let W=0;W<50;W+=10)e[a+W]^=U,e[a+W+1]^=C}let i=e[2],o=e[3];for(let a=0;a<24;a++){const l=et[a],A=nt(i,o,l),S=rt(i,o,l),B=Je[a];i=e[B],o=e[B+1],e[B]=A,e[B+1]=S}for(let a=0;a<50;a+=10){for(let l=0;l<10;l++)n[l]=e[a+l];for(let l=0;l<10;l++)e[a+l]^=~n[(l+2)%10]&n[(l+4)%10]}e[0]^=ln[r],e[1]^=dn[r]}n.fill(0)})(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){fe(this);const{blockLen:n,state:r}=this,i=(t=ne(t)).length;for(let o=0;o<i;){const a=Math.min(n-this.pos,i-o);for(let l=0;l<a;l++)r[this.pos++]^=t[o++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:i}=this;t[r]^=n,0!=(128&n)&&r===i-1&&this.keccak(),t[i-1]^=128,this.keccak()}writeInto(t){fe(this,!1),de(t),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,o=t.length;i<o;){this.posOut>=r&&this.keccak();const a=Math.min(r-this.posOut,o-i);t.set(n.subarray(this.posOut,this.posOut+a),i),this.posOut+=a,i+=a}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return K(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(function(e,t){de(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:i,rounds:o,enableXOF:a}=this;return t||(t=new re(n,r,i,a,o)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=o,t.suffix=r,t.outputLen=i,t.enableXOF=a,t.destroyed=this.destroyed,t}}const gn=((e,t,n)=>function(e){const t=r=>e().update(ne(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}(()=>new re(136,1,32)))();function M(e,t){const n=t||"hex",r=gn(L(e,{strict:!1})?ee(e):e);return"bytes"===n?r:ce(r)}const it=e=>Me((e=>M(ee(e)))(Ve(e)),0,4);class st extends v{constructor({address:t}){super(`Address "${t}" is invalid.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAddressError"})}}const yn=/^0x[a-fA-F0-9]{40}$/;function ye(e){return yn.test(e)}function be(e,t){if(e.length!==t.length)throw new ae({expectedLength:e.length,givenLength:t.length});const n=function({params:e,values:t}){const n=[];for(let r=0;r<e.length;r++)n.push(me({param:e[r],value:t[r]}));return n}({params:e,values:t}),r=Ee(n);return 0===r.length?"0x":r}function me({param:e,value:t}){const n=function(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}(e.type);if(n){const[r,i]=n;return function(e,{length:t,param:n}){const r=null===t;if(!Array.isArray(e))throw new Et(e);if(!r&&e.length!==t)throw new se({expectedLength:t,givenLength:e.length,type:`${n.type}[${t}]`});let i=!1;const o=[];for(let a=0;a<e.length;a++){const l=me({param:n,value:e[a]});l.dynamic&&(i=!0),o.push(l)}if(r||i){const a=Ee(o);if(r){const l=z(o.length,{size:32});return{dynamic:!0,encoded:o.length>0?H([l,a]):l}}if(i)return{dynamic:!0,encoded:a}}return{dynamic:!1,encoded:H(o.map(({encoded:a})=>a))}}(t,{length:r,param:{...e,type:i}})}if("tuple"===e.type)return function(e,{param:t}){let n=!1;const r=[];for(let i=0;i<t.components.length;i++){const o=t.components[i],l=me({param:o,value:e[Array.isArray(e)?i:o.name]});r.push(l),l.dynamic&&(n=!0)}return{dynamic:n,encoded:n?Ee(r):H(r.map(({encoded:i})=>i))}}(t,{param:e});if("address"===e.type)return function(e){if(!ye(e))throw new st({address:e});return{dynamic:!1,encoded:F(e.toLowerCase())}}(t);if("bool"===e.type)return function(e){return{dynamic:!1,encoded:F(Re(e))}}(t);if(e.type.startsWith("uint")||e.type.startsWith("int"))return function(e,{signed:t}){return{dynamic:!1,encoded:z(e,{size:32,signed:t})}}(t,{signed:e.type.startsWith("int")});if(e.type.startsWith("bytes"))return function(e,{param:t}){const[,n]=t.type.split("bytes"),r=I(e);if(!n){let i=e;return r%32!=0&&(i=F(i,{dir:"right",size:32*Math.ceil((e.length-2)/2/32)})),{dynamic:!0,encoded:H([F(z(r,{size:32})),i])}}if(r!==parseInt(n))throw new oe({expectedSize:parseInt(n),value:e});return{dynamic:!1,encoded:F(e,{dir:"right"})}}(t,{param:e});if("string"===e.type)return function(e){const t=Fe(e),n=Math.ceil(I(t)/32),r=[];for(let i=0;i<n;i++)r.push(F(Me(t,32*i,32*(i+1)),{dir:"right"}));return{dynamic:!0,encoded:H([F(z(I(t),{size:32})),...r])}}(t);throw new mt(e.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function Ee(e){let t=0;for(let o=0;o<e.length;o++){const{dynamic:a,encoded:l}=e[o];t+=a?32:I(l)}const n=[],r=[];let i=0;for(let o=0;o<e.length;o++){const{dynamic:a,encoded:l}=e[o];a?(n.push(z(t+i,{size:32})),r.push(l),i+=I(l)):n.push(l)}return H([...n,...r])}function Ae(e,t){const n=typeof e,r=t.type;switch(r){case"address":return ye(e);case"bool":return"boolean"===n;case"function":case"string":return"string"===n;default:return"tuple"===r&&"components"in t?Object.values(t.components).every((i,o)=>Ae(Object.values(e)[o],i)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?"number"===n||"bigint"===n:/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?"string"===n||e instanceof Uint8Array:!!/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)&&Array.isArray(e)&&e.every(i=>Ae(i,{...t,type:r.replace(/(\[[0-9]{0,}\])$/,"")}))}}function ot({abi:e,args:t,functionName:n}){let r=e[0];if(n&&(r=function({abi:e,args:t=[],name:n}){const r=L(n,{strict:!1}),i=e.filter(o=>r?"function"===o.type?it(o)===n:"event"===o.type&&(e=>(e=>M(ee(e)))((e=>Ve(e))(e)))(o)===n:"name"in o&&o.name===n);if(0!==i.length){if(1===i.length)return i[0];for(const o of i)if("inputs"in o)if(t&&0!==t.length){if(o.inputs&&0!==o.inputs.length&&o.inputs.length===t.length&&t.every((l,A)=>{const S="inputs"in o&&o.inputs[A];return!!S&&Ae(l,S)}))return o}else if(!o.inputs||0===o.inputs.length)return o;return i[0]}}({abi:e,args:t,name:n}),!r))throw new Ne(n,{docsPath:"/docs/contract/encodeFunctionData"});if("function"!==r.type)throw new Ne(void 0,{docsPath:"/docs/contract/encodeFunctionData"});const i=Ue(r);return De([it(i),("inputs"in r&&r.inputs?be(r.inputs,t??[]):void 0)??"0x"])}const Dn=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Ln=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function at({domain:e}){return["string"==typeof e?.name&&{name:"name",type:"string"},e?.version&&{name:"version",type:"string"},"number"==typeof e?.chainId&&{name:"chainId",type:"uint256"},e?.verifyingContract&&{name:"verifyingContract",type:"address"},e?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}function ct({data:e,primaryType:t,types:n}){return M(ut({data:e,primaryType:t,types:n}))}function ut({data:e,primaryType:t,types:n}){const r=[{type:"bytes32"}],i=[jn({primaryType:t,types:n})];for(const o of n[t]){const[a,l]=dt({types:n,name:o.name,type:o.type,value:e[o.name]});r.push(a),i.push(l)}return be(r,i)}function jn({primaryType:e,types:t}){const n=ce(function({primaryType:e,types:t}){let n="";const r=lt({primaryType:e,types:t});r.delete(e);const i=[e,...Array.from(r).sort()];for(const o of i)n+=`${o}(${t[o].map(({name:a,type:l})=>`${l} ${a}`).join(",")})`;return n}({primaryType:e,types:t}));return M(n)}function lt({primaryType:e,types:t},n=new Set){const i=e.match(/^\w*/u)?.[0];if(n.has(i)||void 0===t[i])return n;n.add(i);for(const o of t[i])lt({primaryType:o.type,types:t},n);return n}function dt({types:e,name:t,type:n,value:r}){if(void 0!==e[n])return[{type:"bytes32"},M(ut({data:r,primaryType:n,types:e}))];if("bytes"===n)return[{type:"bytes32"},M(r="0x"+(r.length%2?"0":"")+r.slice(2))];if("string"===n)return[{type:"bytes32"},M(ce(r))];if(n.lastIndexOf("]")===n.length-1){const i=n.slice(0,n.lastIndexOf("[")),o=r.map(a=>dt({name:t,type:i,types:e,value:a}));return[{type:"bytes32"},M(be(o.map(([a])=>a),o.map(([,a])=>a)))]}return[{type:n},r]}class Q extends Error{constructor(t,n,r){super(t),this.code=n,this.data=r,Object.setPrototypeOf(this,Q.prototype)}}class ft{constructor(t){this.communicator=t}getPermissions(){var t=this;return(0,u.Z)(function*(){return(yield t.communicator.send(h.wallet_getPermissions,void 0)).data})()}requestPermissions(t){var n=this;return(0,u.Z)(function*(){if(!n.isPermissionRequestValid(t))throw new Q("Permissions request is invalid",4001);try{return(yield n.communicator.send(h.wallet_requestPermissions,t)).data}catch{throw new Q("Permissions rejected",4001)}})()}isPermissionRequestValid(t){return t.every(n=>"object"==typeof n&&Object.keys(n).every(r=>!!Object.values(c).includes(r)))}}const ht=(e,t)=>t.some(n=>n.parentCapability===e);class gt{constructor(t){this.communicator=t}getChainInfo(){var t=this;return(0,u.Z)(function*(){return(yield t.communicator.send(h.getChainInfo,void 0)).data})()}getInfo(){var t=this;return(0,u.Z)(function*(){return(yield t.communicator.send(h.getSafeInfo,void 0)).data})()}experimental_getBalances({currency:t="usd"}={}){var n=this;return(0,u.Z)(function*(){return(yield n.communicator.send(h.getSafeBalances,{currency:t})).data})()}check1271Signature(t,n="0x"){var r=this;return(0,u.Z)(function*(){const i=yield r.getInfo(),o=ot({abi:[{constant:!1,inputs:[{name:"_dataHash",type:"bytes32"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[t,n]}),a={call:T.eth_call,params:[{to:i.safeAddress,data:o},"latest"]};try{return"0x1626ba7e"===(yield r.communicator.send(h.rpcCall,a)).data.slice(0,10).toLowerCase()}catch{return!1}})()}check1271SignatureBytes(t,n="0x"){var r=this;return(0,u.Z)(function*(){const i=yield r.getInfo(),o=ot({abi:[{constant:!1,inputs:[{name:"_data",type:"bytes"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[t,n]}),a={call:T.eth_call,params:[{to:i.safeAddress,data:o},"latest"]};try{return"0x20c13b0b"===(yield r.communicator.send(h.rpcCall,a)).data.slice(0,10).toLowerCase()}catch{return!1}})()}calculateMessageHash(t){return function(e,t){const n="string"==typeof e?ue(e):e.raw instanceof Uint8Array?e.raw:ee(e.raw);return M(H([ue(`\x19Ethereum Signed Message:\n${n.length}`),n]),void 0)}(t)}calculateTypedMessageHash(t){const n="object"==typeof t.domain.chainId?t.domain.chainId.toNumber():Number(t.domain.chainId);let r=t.primaryType;if(!r){const i=Object.values(t.types),o=Object.keys(t.types).filter(a=>i.every(l=>l.every(({type:A})=>A.replace("[","").replace("]","")!==a)));if(0===o.length||o.length>1)throw new Error("Please specify primaryType");r=o[0]}return function({domain:e,message:t,primaryType:n,types:r}){const i=void 0===e?{}:e,o={EIP712Domain:at({domain:i}),...r};!function({domain:e,message:t,primaryType:n,types:r}){const i=r,o=(a,l)=>{for(const A of a){const{name:S,type:B}=A,U=B,C=l[S],W=U.match(Ln);if(W&&("number"==typeof C||"bigint"==typeof C)){const[Gn,Y,Vn]=W;z(C,{signed:"int"===Y,size:parseInt(Vn)/8})}if("address"===U&&"string"==typeof C&&!ye(C))throw new st({address:C});const pt=U.match(Dn);if(pt){const[Gn,Y]=pt;if(Y&&I(C)!==parseInt(Y))throw new bt({expectedSize:parseInt(Y),givenSize:I(C)})}const yt=i[U];yt&&o(yt,C)}};i.EIP712Domain&&e&&o(i.EIP712Domain,e),"EIP712Domain"!==n&&o(i[n],t)}({domain:i,message:t,primaryType:n,types:o});const a=["0x1901"];return i&&a.push(function({domain:e,types:t}){return ct({data:e,primaryType:"EIP712Domain",types:t})}({domain:i,types:o})),"EIP712Domain"!==n&&a.push(ct({data:t,primaryType:n,types:o})),M(H(a))}({message:t.message,domain:{...t.domain,chainId:n,verifyingContract:t.domain.verifyingContract,salt:t.domain.salt},types:t.types,primaryType:r})}getOffChainSignature(t){var n=this;return(0,u.Z)(function*(){return(yield n.communicator.send(h.getOffChainSignature,t)).data})()}isMessageSigned(t,n="0x"){var r=this;return(0,u.Z)(function*(){let i;if("string"==typeof t&&(i=function(){var o=(0,u.Z)(function*(){const a=r.calculateMessageHash(t);return yield r.isMessageHashSigned(a,n)});return function(){return o.apply(this,arguments)}}()),w(t)&&(i=function(){var o=(0,u.Z)(function*(){const a=r.calculateTypedMessageHash(t);return yield r.isMessageHashSigned(a,n)});return function(){return o.apply(this,arguments)}}()),i)return yield i();throw new Error("Invalid message type")})()}isMessageHashSigned(t,n="0x"){var r=this;return(0,u.Z)(function*(){const i=[r.check1271Signature.bind(r),r.check1271SignatureBytes.bind(r)];for(const o of i)if(yield o(t,n))return!0;return!1})()}getEnvironmentInfo(){var t=this;return(0,u.Z)(function*(){return(yield t.communicator.send(h.getEnvironmentInfo,void 0)).data})()}requestAddressBook(){var t=this;return(0,u.Z)(function*(){return(yield t.communicator.send(h.requestAddressBook,void 0)).data})()}}!function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);i>3&&o&&Object.defineProperty(t,n,o)}([(e,t,n)=>{const r=n.value;return n.value=(0,u.Z)(function*(){const i=new ft(this.communicator);let o=yield i.getPermissions();if(ht(t,o)||(o=yield i.requestPermissions([{[t]:{}}])),!ht(t,o))throw new Q("Permissions rejected",4001);return r.apply(this)}),n}],gt.prototype,"requestAddressBook",null);const Un=class{constructor(t={}){const{allowedDomains:n=null,debug:r=!1}=t;this.communicator=new class{constructor(t=null,n=!1){this.allowedOrigins=null,this.callbacks=new Map,this.debugMode=!1,this.isServer="undefined"==typeof window,this.isValidMessage=({origin:r,data:i,source:o})=>{const a=!i,l=!this.isServer&&o===window.parent,A=void 0!==i.version&&parseInt(i.version.split(".")[0]),S="number"==typeof A&&A>=1;let B=!0;return Array.isArray(this.allowedOrigins)&&(B=void 0!==this.allowedOrigins.find(U=>U.test(r))),!a&&l&&S&&B},this.logIncomingMessage=r=>{console.info(`Safe Apps SDK v1: A message was received from origin ${r.origin}. `,r.data)},this.onParentMessage=r=>{this.isValidMessage(r)&&(this.debugMode&&this.logIncomingMessage(r),this.handleIncomingMessage(r.data))},this.handleIncomingMessage=r=>{const{id:i}=r,o=this.callbacks.get(i);o&&(o(r),this.callbacks.delete(i))},this.send=(r,i)=>{const o=y.makeRequest(r,i);if(this.isServer)throw new Error("Window doesn't exist");return window.parent.postMessage(o,"*"),new Promise((a,l)=>{this.callbacks.set(o.id,A=>{A.success?a(A):l(new Error(A.error))})})},this.allowedOrigins=t,this.debugMode=n,this.isServer||window.addEventListener("message",this.onParentMessage)}}(n,r),this.eth=new Z(this.communicator),this.txs=new j(this.communicator),this.safe=new gt(this.communicator),this.wallet=new ft(this.communicator)}}}}]);